!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=wp.data;r.dispatch,r.select;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=wp.element,c=(l.createElement,l.useRef),s=l.useEffect,u=(l.Fragment,l.render,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=c(Date.now());s((function(){var n=setTimeout((function(){Date.now()-r.current>=t&&(e(),r.current=Date.now())}),t-(Date.now()-r.current));return function(){clearTimeout(n)}}),[t].concat(i(n)))});var m=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},p=function(e){var t,n,r=e.progress;switch(e.size){case"xs":t=10,n=1;break;case"us":t=24,n=4;break;case"sm":t=25,n=2.5;break;case"md":t=32,n=4;break;case"med":t=50,n=5;break;case"lg":t=75,n=7.5;break;case"xl":t=100,n=10;break;default:t=50,n=5}var a=t-2*n,i=2*a*Math.PI,o=i-r/100*i;return wp.element.createElement("div",{className:"react-progress-circle"},wp.element.createElement("svg",{height:2*t,width:2*t},wp.element.createElement("circle",{className:"ReactProgressCircle_circleBackground",strokeWidth:n,style:{strokeDashoffset:o},r:a,cx:t,cy:t}),wp.element.createElement("circle",{className:"ReactProgressCircle_circle",strokeWidth:n,strokeDasharray:i+" "+i,style:{strokeDashoffset:o},r:a,cx:t,cy:t})))};function d(e,t,n){e&&t.unshift(e);var r=function(e){for(var t="object"!=a(e)?JSON.parse(e):e,n="",r=0;r<t.length;r++){var i="";for(var o in t[r])""!=i&&(i+=","),i+=t[r][o];n+=i+"\r\n"}return n}(JSON.stringify(t)),i=n+".csv"||!1,o=new Blob([r],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(o,i);else{var l=document.createElement("a");if(void 0!==l.download){var c=URL.createObjectURL(o);l.setAttribute("href",c),l.setAttribute("download",i),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}}}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=e.slice(0,e.indexOf("\n")).split(t),r=e.slice(e.indexOf("\n")+1).split("\n"),a=[];return r.map((function(e,r){a.push([]);var i=e.split(t);return n.reduce((function(e,t,n){return a[r].push({key:t,value:i[n]}),e}),{})})),a}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=wp.element,O=(E.createElement,E.useState),j=E.useEffect,S=(E.Fragment,E.render,wp.data),N=S.dispatch,k=S.select,P=function(e){var t=g(O(!0),2),n=(t[0],t[1],g(O(e.field),2)),r=n[0],a=(n[1],g(O(!1),2)),i=a[0],o=a[1],l=g(O({icon:"",url:""}),2),c=l[0],s=l[1],u=g(O([]),2),m=u[0],p=u[1];j((function(){"string"==typeof e.field.value&&e.field.value.length&&p(JSON.parse(e.field.value))}),[]);var d,f=function(t){e.hasOwnProperty("registration")&&e.registration?e.update(r):fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),{method:"post",body:JSON.stringify(v({field_id:r.id,value:JSON.stringify(t),token:k("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(e){N("vibebp").addNotification({text:e.message})}))};return wp.element.createElement("div",{className:"vibebp_profile_field social"},m.length?wp.element.createElement("div",{className:"social_icons_list"},m.map((function(e,t){return wp.element.createElement("div",{className:"social_icon_wrapper"},wp.element.createElement("div",{className:"social_icon"},wp.element.createElement("span",{className:e.icon}),wp.element.createElement("span",null,e.url)),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){var e=y(m);e.splice(t,1),p(e),f(e)}}))}))):"",wp.element.createElement("a",{className:i?"vicon vicon-close":"vicon vicon-plus",onClick:function(){o(!i)}}),i?wp.element.createElement("div",{className:"add_social_icon"},wp.element.createElement("div",{className:"social_icons"},window.vibebp.social_icons.map((function(e){return wp.element.createElement("div",{className:c.icon===e.icon?"social_icon selected":"social_icon",onClick:function(){s(v(v({},c),{},{icon:e.icon}))}},wp.element.createElement("span",{className:e.icon}),wp.element.createElement("span",null,e.label))}))),wp.element.createElement("div",{className:!c.url.length||(d=c.url,/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(d))?"social_icon_url":"social_icon_url error"},wp.element.createElement("input",{type:"text",onChange:function(e){s(v(v({},c),{},{url:e.target.value}))},value:c.url})),wp.element.createElement("a",{className:"button is-primary",onClick:function(){if(c.url.length){var e=y(m);e.push(c),p(e),o(!1),s({icon:"",url:""}),f(e)}}},window.vibebp.translations.set_icon)):"")};function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L=wp.element,J=(L.createElement,L.useState),U=L.useEffect,R=(L.Fragment,L.render,wp.data),F=R.dispatch,H=R.select,q=function(e){var t=T(J(!0),2),n=(t[0],t[1],T(J(e.field),2)),r=n[0],a=(n[1],T(J(!1),2)),i=a[0],o=a[1],l=T(J({icon:"",title:"",description:""}),2),c=l[0],s=l[1],u=T(J([]),2),p=u[0],d=u[1];U((function(){"string"==typeof e.field.value&&e.field.value.length&&m(e.field.value)&&d(JSON.parse(e.field.value))}),[]);var f=function(t){e.hasOwnProperty("registration")&&e.registration?e.update(r):fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),{method:"post",body:JSON.stringify({field_id:r.id,value:JSON.stringify(t),token:H("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){F("vibebp").addNotification({text:e.message})}))};return wp.element.createElement("div",{className:"vibebp_profile_field repeatable"},p.length?wp.element.createElement("div",{className:"repeatable_icons_list"},p.map((function(e,t){return wp.element.createElement("div",{className:"repeatable_icon_wrapper"},wp.element.createElement("div",{className:"desc"!=r.rtype?"titled"!=r.rtype?"repeatable_title":"repeatable_icon":"repeatable_desc"},("stacked"==r.rtype||"spaced"==r.rtype)&&e.hasOwnProperty("icon")&&e.icon.length>100?wp.element.createElement("span",{dangerouslySetInnetHTML:{__html:e.icon}}):wp.element.createElement("span",{className:e.icon}),wp.element.createElement("span",null,"desc"!=r.rtype&&e.hasOwnProperty("title")?wp.element.createElement("h4",null,e.title):"",wp.element.createElement("p",null,e.description))),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){var e=C(p);e.splice(t,1),d(e),f(e)}}))}))):"",wp.element.createElement("a",{className:i?"vicon vicon-close":"vicon vicon-plus",onClick:function(){o(!i)}}),i?wp.element.createElement("div",{className:"add_repeatable_icon"},"stacked"==r.rtype||"spaced"==r.rtype?wp.element.createElement("div",{className:"repeatable_icons"},window.vibebp.repeatable_icons.map((function(e){if(!(e.length>100))return wp.element.createElement("div",{className:c.icon===e?"repeatable_icon selected":"repeatable_icon",onClick:function(){s(A(A({},c),{},{icon:e}))}},wp.element.createElement("span",{className:e}));wp.element.createElement("div",{className:c.icon===e?"repeatable_icon selected":"repeatable_icon",onClick:function(){s(A(A({},c),{},{icon:e}))}},wp.element.createElement("span",{dangerouslySetInnetHTML:{__html:e}}))}))):"",wp.element.createElement("div",{className:"desc"!=r.rtype?"repeatable_title":"repeatable_desc"},"stacked"!=r.rtype&&"spaced"!=r.rtype||!c.icon?"":c.icon.length>100?wp.element.createElement("span",{dangerouslySetInnetHTML:{__html:c.icon}}):wp.element.createElement("span",{className:c.icon}),wp.element.createElement("span",null,"desc"!=r.rtype?wp.element.createElement("input",{type:"text",onChange:function(e){s(A(A({},c),{},{title:e.target.value}))},value:c.title,placeholder:window.vibebp.translations.title}):"",wp.element.createElement("input",{type:"text",onChange:function(e){s(A(A({},c),{},{description:e.target.value}))},value:c.description,placeholder:window.vibebp.translations.description}))),wp.element.createElement("a",{className:"button is-primary",onClick:function(){var e=C(p);e.push(c),d(e),o(!1),f(e),s({icon:"",title:"",description:""})}},window.vibebp.translations.set_icon)):"")};function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=wp.element,Y=(X.createElement,X.useState),Q=X.useEffect,ee=(X.Fragment,X.render,wp.data),te=ee.dispatch,ne=ee.select,re=function(e){var t=G(Y(!0),2),n=t[0],r=t[1],a=G(Y(e.field),2),i=a[0],o=a[1],l=G(Y(),2),c=l[0],s=l[1],m=G(Y(),2),p=m[0],d=m[1],f=G(Y(),2),b=f[0],v=f[1],w=G(Y(),2),y=w[0],g=w[1],h=G(Y(""),2),_=h[0],E=h[1],O=G(Y([]),2),j=O[0],S=O[1],N=G(Y(!1),2),k=N[0],P=N[1];Q((function(){if(Array.isArray(e.field.value)){var t=e.field.value,n={lat:t[0],lng:t[1],address:t[2],zipcode:t[3],city:t[4],country:t[5]};o(W(W({},e.field),{},{value:n}))}}),[e.field]);u((function(){if(!n){var e=new google.maps.places.AutocompleteService;_.length&&e.getQueryPredictions({input:_},(function(e,t){if(t==google.maps.places.PlacesServiceStatus.OK){var n=z(j);e.forEach((function(e){n.push(e.description)})),S(n)}}))}}),500,[_]),Q((function(){if(c)if(window.hasOwnProperty("google")&&window.google.hasOwnProperty("maps")){var e={lat:-34.397,lng:150.644},t={zoom:16,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP,imageDefaultUI:!0},n=new google.maps.Map(c,t);d(n);var a=new google.maps.Marker({map:n,position:e,animation:google.maps.Animation.DROP});v(a),r(!1),g(new google.maps.Geocoder)}else{var i=window.document.createElement("script");i.src="https://maps.googleapis.com/maps/api/js?key=".concat(window.vibebp.settings.google_maps_api_key,"&libraries=places"),i.async=!0,window.document.body.appendChild(i),i.addEventListener("load",(function(){var e={lat:-34.397,lng:150.644},t={zoom:16,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP,imageDefaultUI:!0},n=new google.maps.Map(c,t);d(n);var a={url:window.vibebp.settings.map_marker,size:new google.maps.Size(51,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(21,30)},i=new google.maps.Marker({map:n,position:e,animation:google.maps.Animation.DROP,draggable:!0,icon:a});v(i),r(!1),g(new google.maps.Geocoder)}))}}),[c]),Q((function(){if(b){var e,t;(null===(e=window.google)||void 0===e||null===(t=e.maps)||void 0===t?void 0:t.event)&&window.google.maps.event.addListener(b,"dragend",(function(e){(new google.maps.Geocoder).geocode({location:e.latLng},(function(e,t){"OK"==t&&(console.log(e),p.setCenter(e[0].geometry.location),o(W(W({},i),{},{value:{lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng(),address:e[0].formatted_address,zipcode:e[0].address_components[e[0].address_components.findIndex((function(e){return-1!==e.types.indexOf("postal_code")}))].long_name,city:e[0].address_components[e[0].address_components.findIndex((function(e){return-1!==e.types.indexOf("locality")}))].long_name,country:e[0].address_components[e[0].address_components.findIndex((function(e){return-1!==e.types.indexOf("country")}))].long_name}})))}))}))}return function(){var e,t;null===(e=window.google)||void 0===e||null===(t=e.maps)||void 0===t||t.event}}),[b]),Q((function(){if("object"==$(i.value)&&p&&b){console.log("--\x3e");var e=new google.maps.LatLng(i.value.lat,i.value.lng);p.setCenter(e),b.setPosition(e)}}),[i,p,b]),Q((function(){if(!n)if(i.value){var e={lat:-34.397,lng:150.644},t=i.value;if(Array.isArray(t)||"string"!=typeof t?e={lat:parseFloat(i.value.lat),lng:parseFloat(i.value.lng)}:t.split(","),t.length){var r=W({},i);6===t.length&&(r.value={lat:t[0],lng:t[1],address:t[2],zipcode:t[3],city:t[4],country:t[5]}),o(r),e={lat:parseFloat(r.value.lat),lng:parseFloat(r.value.lng)}}if(p){var a={url:window.vibebp.settings.map_marker,size:new google.maps.Size(51,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(21,30)},l=new google.maps.Marker({map:p,position:e,animation:google.maps.Animation.DROP,draggable:!0,icon:a});v(l)}}else A()}),[n]);var x=function(){y&&(new google.maps.Geocoder).geocode({address:_},(function(e,t){"OK"==t&&(p.setCenter(e[0].geometry.location),console.log(e[0].geometry.location),b.setPosition(e[0].geometry.location)),S([])}))},A=function(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){var t=W({},i);t.value=[e.coords.latitude,e.coords.longitude],o(t);var n=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);console.log(n),p.setCenter(n),b.setPosition(n),y&&y.geocode({location:{lat:e.coords.latitude,lng:e.coords.longitude}}).then((function(e){console.log(e)}),(function(e){console.error(e)}))})):fetch("http://ip-api.com/json",{method:"get"}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=W({},i);t.value={lat:e.lat,lng:e.lng},o(t);new google.maps.LatLng(e.lat,e.lng);y&&y.geocode({location:{lat:e.lat,lng:e.lng}}).then((function(e){console.log(e)}),(function(e){console.error(e)}))}));var e={url:window.vibebp.settings.map_marker,size:new google.maps.Size(51,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(21,30)},t=new google.maps.Marker({map:p,position:{lat:i.value.lat,lng:i.value.lng},animation:google.maps.Animation.DROP,draggable:!0,icon:e});v(t)};return wp.element.createElement("div",{className:"vibebp_profile_field location"},wp.element.createElement("div",{className:"search_me"},wp.element.createElement("span",{className:"vicon vicon-target",onClick:A}),wp.element.createElement("input",{type:"text",value:_,onChange:function(e){E(e.target.value)}}),_.length?wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){E(""),S([])}}):"",wp.element.createElement("span",{className:_.length?"vicon vicon-search is_active":"vicon vicon-search",onClick:x})),j.length?wp.element.createElement("div",{className:"vibebp_autocomplete_results"},j.map((function(e){return wp.element.createElement("div",{className:"vibebp_autocomplete_result",onClick:function(){E(e),S([]),x()}},e)}))):"",wp.element.createElement("div",{className:"google_map_locator"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",wp.element.createElement("div",{ref:function(e){e&&!c&&s(e)},style:{height:"400px",width:"100%"}})),wp.element.createElement("div",{className:"google_map_details"},wp.element.createElement("textarea",{placeholder:window.vibebp.translations.address,onChange:function(e){o(W(W({},i),{},{value:W(W({},i.value),{},{address:e.target.value})}))},value:i.value.hasOwnProperty("address")?i.value.address:""}),wp.element.createElement("div",{className:"gmap_fields"},wp.element.createElement("input",{type:"text",onChange:function(e){o(W(W({},i),{},{value:W(W({},i.value),{},{zipcode:e.target.value})}))},placeholder:window.vibebp.translations.zipcode,value:i.value.hasOwnProperty("zipcode")?i.value.zipcode:""}),wp.element.createElement("input",{type:"text",onChange:function(e){o(W(W({},i),{},{value:W(W({},i.value),{},{city:e.target.value})}))},placeholder:window.vibebp.translations.city,value:i.value.hasOwnProperty("city")?i.value.city:""}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.country,value:i.value.hasOwnProperty("country")?i.value.country:""}),i.value.zipcode?wp.element.createElement("a",{className:k?"button is-loading":"button",onClick:function(){P(!0),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),{method:"post",body:JSON.stringify(W({field_id:i.id,type:"location",value:i.value,token:ne("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(e){P(!1),e.hasOwnProperty("message")&&te("vibebp").addNotification({text:e.message})}))}},window.vibebp.translations.save_changes):"")))};function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||se(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||se(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var me=wp.element,pe=(me.createElement,me.render,me.useState),de=me.useEffect;me.useContext,me.Fragment,me.RawHTML;function fe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Array.isArray(t))if(n){for(var r=0;r<t.length;r++)if(t[r][n]===e[n])return r}else for(var a=0;a<t.length;a++)if(t[a].name===e.name)return a;return-1}var be=function(e){var t=ce(pe({}),2),n=t[0],r=t[1],a=ce(pe(""),2),i=(a[0],a[1]),o=ce(pe([]),2),l=o[0],c=o[1],s=ce(pe([]),2),u=s[0],m=s[1],p=ce(pe(!1),2),d=p[0],f=p[1],b=ce(pe(!1),2),v=b[0],w=b[1],y=ce(pe(!1),2),g=(y[0],y[1]);de((function(){if(e.field&&e.field.hasOwnProperty("value")&&e.field.value.length&&e.field.options&&e.field.options.length){var t=[];e.field.value.map((function(n){e.field.options.map((function(e){e.value!=n&&e.name!=n||t.push(e)}))})),m(t)}e.field.options&&e.field.options.length&&Array.isArray(e.field.options)&&(f(!0),c(le(e.field.options)),f(!1)),r(e.field),g(!0)}),[e.field]);var h="search_results";return v&&(h="search_results active"),wp.element.createElement("div",{className:"selectcptfield multiselect"},wp.element.createElement("div",{className:"selectcptfield_list"},u.length?wp.element.createElement("div",{className:"selectcptfield_items"},u.map((function(t){var a=n.cpt?n.multiselect:"";return wp.element.createElement("span",{type:a,onClick:function(){var a=le(u),i=le(l);a.splice(fe(t,u,"name"),1),i.push(t),c(i),m(a);var o=ie({},n);if(a&&a.length){var s=[];a.map((function(e){e.hasOwnProperty("name")&&s.push(e.name)})),o.value=s,o.show_value=a,r(o),e.update(o,e.fieldIndex,"fieldvaluechanged")}else o.value=[],o.show_value=[],r(o),e.update(o,e.fieldIndex,"fieldvaluechanged")}},t.name)}))):""),wp.element.createElement("div",{className:"selectimitate",onClick:function(){w(!v)}},v?wp.element.createElement("i",{class:"vicon vicon-angle-up","aria-hidden":"true"}):wp.element.createElement("i",{class:"vicon vicon-angle-down","aria-hidden":"true"}),l.length?wp.element.createElement("div",{className:h},l.map((function(t,a){if(-1===fe(t,u,"name"))return wp.element.createElement("div",{className:"search_result selectcpt",onClick:function(){i("");var o=le(u);if(-1===fe(t,o,"name")){o.push(t),l.splice(a,1),m(o);var c=ie({},n);if(o&&o.length){var s=[];o.map((function(e){e.hasOwnProperty("name")&&s.push(e.name)})),c.value=s,c.show_value=o,r(c),e.update(c,e.fieldIndex,"fieldvaluechanged")}}}},wp.element.createElement("span",null,t.name))}))):d?"......":""))};function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return he(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _e=wp.element,Ee=(_e.createElement,_e.render,_e.useState),Oe=_e.useEffect,je=_e.Fragment,Se=(_e.useContext,wp.data),Ne=Se.dispatch,ke=Se.select,Pe=function(e){var t=ge(Ee(!1),2),n=(t[0],t[1],ge(Ee({}),2)),r=n[0],a=n[1],i=ge(Ee(!1),2),o=(i[0],i[1],ge(Ee(0),2)),l=o[0],c=(o[1],ge(Ee(""),2)),s=c[0],u=c[1];Oe((function(){s.length&&setTimeout((function(){u("")}),5e3)}),[s]),Oe((function(){e.field.hasOwnProperty("value")&&void 0!==e.field.value&&e.field.value.hasOwnProperty("url")&&a(e.field.value)}),[e.field]);var m=function(t){void 0===t&&(t=r),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),{method:"post",body:JSON.stringify(we({field_id:e.field.id,type:e.field.type,value:t,token:ke("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(e){Ne("vibebp").addNotification({text:e.message})}))},p=function(){a({}),m({}),fetch("".concat(window.vibebp.api.url,"/user/delete_media?post"),{method:"post",body:JSON.stringify({token:ke("vibebp").getToken(),media:r})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("message")&&Ne("vibebp").addNotification({text:e.message})}))};return wp.element.createElement(je,null,r&&r.hasOwnProperty("url")?wp.element.createElement("div",{className:"single_media"},function(e){if(e.hasOwnProperty("url"))return wp.element.createElement("div",{className:"media_snapashot"},wp.element.createElement("a",{href:e.url,target:"_blank"},e.name),wp.element.createElement("span",{className:"vicon vicon-close",onClick:p}))}(r)):wp.element.createElement("div",{className:"upload_media"},wp.element.createElement("label",{for:"vibe_editor_upload_media",style:{border:"1px dotted var(--darkborder)",padding:"1rem"}},l?wp.element.createElement("div",{className:"vibebp_progress_wrapper"},wp.element.createElement("span",{className:"progress_wrapper"},wp.element.createElement("span",{className:"progress_bar",style:{width:l+"%"}})),wp.element.createElement("span",null,l,"%")):wp.element.createElement("span",{className:"vicon vicon-plus"})),wp.element.createElement("input",{type:"file",id:"vibe_editor_upload_media",onChange:function(t){!function(t){if(t.target.files[0]){var n=t.target.files[0],r=n.size/1024/1024,i=[];if(e.field.all_upload_types&&Array.isArray(e.field.upload_types)&&e.field.upload_types.length&&e.field.upload_types.map((function(t){e.field.all_upload_types.hasOwnProperty(t)&&e.field.all_upload_types[t].length&&e.field.all_upload_types[t].map((function(e){i.push(e)}))})),-1===i.indexOf(n.type))return u(window.vibebp.translations.file_type_not_allowed),!1;if(parseInt(e.field.upload_size)<r)return u(window.vibebp.translations.file_size_error+" "+e.field.upload_size+"MB"),!1;var o=new FormData;o.append("file",t.target.files[0]),o.append("body",JSON.stringify({token:ke("vibebp").getToken()})),fetch("".concat(window.vibebp.api.url,"/user/upload_media?upload"),{method:"post",body:o}).then((function(e){return e.json()})).then((function(e){e.status?(a(e.data),m(e.data)):e.hasOwnPropoerty("message")&&Ne("vibebp").addNotification({text:e.message})}))}}(t)},style:{visibility:"hidden"}}),wp.element.createElement("div",{className:"file_restrictions_info"},wp.element.createElement("div",{className:"allowed_file_types"},e.field.hasOwnProperty("upload_types")&&e.field.upload_types.length?wp.element.createElement(je,null,wp.element.createElement("span",null,window.vibebp.translations.allowed_file_types),wp.element.createElement("div",null,e.field.upload_types.map((function(e){return wp.element.createElement("span",null,e)})))):""),wp.element.createElement("div",{className:"allowed_file_size"},e.field.hasOwnProperty("upload_size")&&e.field.upload_size?wp.element.createElement(je,null,wp.element.createElement("span",null,window.vibebp.translations.max_size),wp.element.createElement("span",null,e.field.upload_size+" MB")):"")),s&&s.length?wp.element.createElement("div",{className:"vbp_message vbp_error"},s):""))};function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e){return function(e){if(Array.isArray(e))return Le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Me(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){Te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Me(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){if(e){if("string"==typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Le(e,t):void 0}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Je=wp.element,Ue=(Je.createElement,Je.render,Je.useState),Re=Je.useEffect,Fe=Je.Fragment,He=(Je.useContext,wp.data),qe=He.dispatch,$e=He.select,ze=function(e){var t=De(Ue(!1),2),n=t[0],r=t[1],a=De(Ue([]),2),i=a[0],o=a[1],l=De(Ue([]),2),c=l[0],s=(l[1],De(Ue(!1),2)),m=s[0],p=s[1],d=De(Ue(!1),2),f=d[0],b=d[1],v=De(Ue(0),2),w=v[0],y=v[1],g=De(Ue("media"),2),h=g[0],_=g[1],E=De(Ue((function(){var t={posts_per_page:20,paged:1,search_terms:"",orderby:""};return e.hasOwnProperty("post_mime_type")&&void 0!==e.post_mime_type&&(t.post_mime_type=e.post_mime_type),t})),2),O=E[0],j=E[1],S=De(Ue(""),2),N=S[0],k=S[1],P=De(Ue([]),2),x=(P[0],P[1],De(Ue({name:"",url:"",type:"file"}),2)),A=x[0],I=x[1];Re((function(){return document.querySelector(".vibebp_myprofile")&&document.querySelector(".vibebp_myprofile").classList.add("popup_active"),function(){document.querySelector(".vibebp_myprofile.popup_active")&&document.querySelector(".vibebp_myprofile").classList.remove("popup_active")}}),[]),u((function(){fetch("".concat(window.vibebp.api.url,"/user/fetch_media?").concat(O.search_terms.length?"nocache":encodeURIComponent(JSON.stringify(Ce(Ce({},O),{},{search_terms:""})))),{method:"post",body:JSON.stringify(Ce(Ce({},O),{},{token:$e("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){if(r(!1),e.status)if(f){var t=Ae(i);e.data.map((function(e){t.push(e)})),o(t),b(!1),t.length<parseInt(data.total)?p(!0):p(!1)}else o(e.data),e.data.length<parseInt(e.total)?p(!0):p(!1)}))}),500,[O]);var C=function(){j(Ce({},O))};Re((function(){return document.addEventListener("vibebp_component_reload",C),function(){document.removeEventListener("vibebp_component_reload",C)}})),Re((function(){N.length&&setTimeout((function(){k("")}),5e3)}),[N]);var T=function(t){e.share(t)},D=function(e){switch(e.type){case"image":return wp.element.createElement("img",{src:e.url,className:"content_to_html_image"});case"video":return wp.element.createElement("video",{class:"video_plyr"},wp.element.createElement("source",{src:e.url,type:"video/mp4"}));case"audio":return wp.element.createElement("audio",{class:"audio_plyr"},wp.element.createElement("source",{src:e.url,type:"audio/mp3"}));case"document":return wp.element.createElement("span",{class:"modal_document"},e.name)}};return wp.element.createElement("div",{className:"vibe_editor_modal"},wp.element.createElement("span",{onClick:function(t){e.close(!1)}}),wp.element.createElement("div",{className:"ve_modal-content"},wp.element.createElement("div",{className:"ve_modal-header"},wp.element.createElement("div",null,window.vibebp.settings.media_tabs?Object.keys(window.vibebp.settings.media_tabs).map((function(t){if("upload"!=t||!window.vibebp.settings.hasOwnProperty("upload_capability")||!window.vibebp.settings.upload_capability)return wp.element.createElement("a",{className:h==t?"active":"",onClick:function(){_(t)}},window.vibebp.settings.media_tabs[t]);var n=$e("vibebp").getUser();if(void 0!==n&&n.hasOwnProperty("caps")&&void 0!==n.caps){var r=0;if(Array.isArray(n.caps)?n.caps.findIndex((function(e,t){return e==window.vibebp.settings.upload_capability}))>-1&&(r=1):"object"===xe(n.caps)&&Object.keys(n.caps).map((function(e,t){e===window.vibebp.settings.upload_capability&&n.caps[e]&&(r=1)})),e.hasOwnProperty("allow_upload")&&e.allow_upload&&(r=1),r)return wp.element.createElement("a",{className:h==t?"active":"",onClick:function(){_(t)}},window.vibebp.settings.media_tabs[t])}})):""),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(t){e.close(!1)}})),wp.element.createElement("div",{className:"ve_modal-body"},"media"==h?wp.element.createElement(Fe,null,wp.element.createElement("div",{className:"vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_text,onChange:function(e){return j(Ce(Ce({},O),{},{search_terms:e.target.value}))}})),wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("select",{onChange:function(e){j(Ce(Ce({},O),{},{order:e.target.value}))}},Object.keys(window.vibeEditor.media_order).map((function(e){return wp.element.createElement("option",{value:e},window.vibeEditor.media_order[e])}))))),n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):i&&i.length?wp.element.createElement("div",{className:"allMedia"},i.map((function(t,n){return wp.element.createElement("div",{className:"single_media"},wp.element.createElement("span",{onClick:function(n){T(t),e.hasOwnProperty("autoclose")||e.close(!1)}},D(t)),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){return function(e){var t=Ae(i);t.splice(t.findIndex((function(t){return t.id==e.id})),1),o(t),fetch("".concat(window.vibebp.api.url,"/user/delete_media?post"),{method:"post",body:JSON.stringify({token:$e("vibebp").getToken(),media:e})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("message")&&qe("vibebp").addNotification({text:e.message})}))}(t)}}))}))):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_media),m?wp.element.createElement("a",{className:"link",onClick:function(){j(Ce(Ce({},O),{},{paged:O.paged+1})),b(!0)}},window.vibebp.translations.more):""):"upload"===h?wp.element.createElement(Fe,null,wp.element.createElement("div",{className:"upload_media"},wp.element.createElement("label",{for:"vibe_editor_upload_media"},window.vibebp.translations.upload_media,w?wp.element.createElement("div",{className:"vibebp_progress_wrapper"},wp.element.createElement("span",{className:"progress_wrapper"},wp.element.createElement("span",{className:"progress_bar",style:{width:w+"%"}})),wp.element.createElement("span",null,w,"%")):wp.element.createElement("span",{className:"vicon vicon-plus"})),wp.element.createElement("input",{type:"file",id:"vibe_editor_upload_media",onChange:function(t){return function(t){var n=e.post_mime_type,r=e.allowed_file_size;if(void 0===r&&(r=window.vibebp.settings.upload_limit),void 0===n||!Array.isArray(n)){var a=n;(n=[]).push(a)}if(t.target.files[0]){var l=t.target.files[0].size/1024/1024;if(n.indexOf(t.target.files[0].type)<=-1)return k(window.vibebp.translations.allowed_file_types+" "+n.join(",")),!1;if(r<l)return k(window.vibebp.translations.file_size_error+" "+r+"Mb"),!1;if(tus.isSupported&&tus.canStoreURLs&&l>4){var c="".concat(window.vibebp.api.url,"/user/upload_media_stream?upload"),s=new tus.Upload(t.target.files[0],{endpoint:c,chunkSize:2097152,retryDelays:[0,3e3],metadata:{token:$e("vibebp").getToken(),filename:t.target.files[0].name,filetype:t.target.files[0].type},onError:function(e){e.hasOwnProperty("message")&&qe("vibebp").addNotification({text:e.message})},onProgress:function(t,n){var r=(t/n*100).toFixed(2);y(r),100==r&&setTimeout((function(){var t={posts_per_page:20,paged:1,search_terms:"",orderby:""};e.hasOwnProperty("post_mime_type")&&void 0!==e.post_mime_type&&(t.post_mime_type=e.post_mime_type),j(t),y(0),_("media")}),500)},onSuccess:function(){localStorage.removeItem(s._urlStorageKey),s.url=s.url.replace("?upload",""),fetch("".concat(s.url,"/complete_stream?nocache"),{method:"post",body:JSON.stringify({token:$e("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){if(t.status){e.hasOwnProperty("post_mime_type")&&void 0!==e.post_mime_type&&e.post_mime_type,y(0),_("media")}t.hasOwnProperty("message")&&qe("vibebp").addNotification({text:t.message})}))}});s.findPreviousUploads().then((function(e){e.length>0&&s.resumeFromPreviousUpload(e[0]),s.start()})),tus.Upload.terminate(c).then((function(){})).catch((function(e){}))}else{var u=new FormData;u.append("file",t.target.files[0]),u.append("body",JSON.stringify({token:$e("vibebp").getToken()})),fetch("".concat(window.vibebp.api.url,"/user/upload_media?upload"),{method:"post",body:u}).then((function(e){return e.json()})).then((function(e){if(e.status){var t=Ae(i);t.unshift(e.data),o(t),_("media")}else e.hasOwnPropoerty("message")&&qe("vibebp").addNotification({text:e.message})}))}}}(t)}}),c&&c.length?wp.element.createElement("div",{className:"uploaded"},wp.element.createElement("strong",null,window.vibebp.translations.uploaded_media),wp.element.createElement("div",{className:"uploaded_files"},c.map((function(e,t){return wp.element.createElement("div",{className:"single_media",onClick:function(t){T(e)}},D(e))})))):""),N&&N.length?wp.element.createElement("div",{className:"vbp_message vbp_error"},N):""):"embed"===h?wp.element.createElement(Fe,null,wp.element.createElement("div",{className:"embed_media"},wp.element.createElement("label",{for:"vibe_editor_embed_name"}," ",window.vibebp.translations.enter_emabed_name," "),wp.element.createElement("input",{type:"text",id:"vibe_editor_embed_name",onChange:function(e){return I(Ce(Ce({},A),{},{name:e.target.value}))}}),wp.element.createElement("label",{for:"vibe_editor_embed_url"}," ",window.vibebp.translations.enter_embed_url," "),wp.element.createElement("input",{type:"text",id:"vibe_editor_embed_url",onChange:function(e){return I(Ce(Ce({},A),{},{url:e.target.value}))}}),wp.element.createElement("select",{onChange:function(e){return I(Ce(Ce({},A),{},{type:e.target.value}))},value:A.type},e.hasOwnProperty("embed_options")?e.embed_options.map((function(e){return wp.element.createElement("option",{value:e},e.charAt(0).toUpperCase()+e.slice(1))})):Object.keys(window.vibeEditor.embed_types).map((function(t){if(e.hasOwnProperty("post_mime_type")&&void 0!==e.post_mime_type)if(Array.isArray(e.post_mime_type)){if(e.post_mime_type.indexOf(t)<0)return}else if(e.post_mime_type.split(",").indexOf(t)<0)return;return wp.element.createElement("option",{value:t},window.vibeEditor.embed_types[t])}))),Object.values(A).findIndex((function(e){return""==e||null==e}))>-1?"":wp.element.createElement("button",{className:"button is-primary",onClick:function(){T(A),e.close(!1)}},window.vibebp.translations.embed))):wp.element.createElement("div",{className:h}))))};function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){Ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ke=wp.element,Xe=(Ke.createElement,Ke.render,Ke.useState),Ye=Ke.useEffect,Qe=Ke.Fragment,et=(Ke.useContext,Ke.useRef),tt=wp.data,nt=tt.dispatch,rt=tt.select,at=function(e){var t=et(null),n=Ge(Xe(!1),2),r=(n[0],n[1],Ge(Xe({}),2)),a=r[0],i=r[1],o=Ge(Xe(!1),2),l=(o[0],o[1],Ge(Xe(0),2)),c=(l[0],l[1],Ge(Xe(""),2)),s=c[0],u=c[1],m=Ge(Xe(!1),2),p=m[0],d=m[1],f=Ge(Xe([]),2),b=f[0],v=f[1],w=Ge(Xe(null),2),y=w[0],g=w[1];Ye((function(){s.length&&setTimeout((function(){u("")}),5e3)}),[s]),Ye((function(){e.field.hasOwnProperty("value")&&void 0!==e.field.value&&e.field.value.hasOwnProperty("url")&&i(e.field.value);var t=[];e.field.all_upload_types&&Array.isArray(e.field.upload_types)&&e.field.upload_types.length&&e.field.upload_types.map((function(n){e.field.all_upload_types.hasOwnProperty(n)&&e.field.all_upload_types[n].length&&e.field.all_upload_types[n].map((function(e){t.push(e)}))})),t.push("video"),v(t)}),[e.field]),Ye((function(){if(a&&a.hasOwnProperty("type")&&t.current){if("video"==a.type){var e=new Plyr(t.current);g(e)}if("youtube"==a.type){var n=new Plyr(t.current);g(n)}if("vimeo"==a.type){var r=new Plyr(t.current);g(r)}}}),[a]);var h=function(t){void 0===t&&(t=a),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),{method:"post",body:JSON.stringify(We({field_id:e.field.id,type:e.field.type,value:t,token:rt("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(e){nt("vibebp").addNotification({text:e.message})}))},_=function(e){var t=e.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&|?]+)/);return!(!t||!t.length)&&t[1]};return wp.element.createElement("div",{className:"video_field"},a&&a.hasOwnProperty("url")?wp.element.createElement("div",null,wp.element.createElement("div",{className:"single_media"},wp.element.createElement("div",null,wp.element.createElement("span",{className:"remove vicon vicon-close",onClick:function(){y&&(y.destroy(),g(null)),h(null),i({})}}),wp.element.createElement("div",null,"  ",wp.element.createElement("div",null," ",function(e){switch(e.type){case"image":return wp.element.createElement("img",{src:e.url,className:"content_to_html_image"});case"video":return wp.element.createElement("div",{className:"video_wrapper"},wp.element.createElement("video",{ref:t,class:"video_plyr"},wp.element.createElement("source",{src:e.url,type:"video/mp4"})));case"youtube":var n=_(a.url);return wp.element.createElement("div",{className:"video_wrapper"},wp.element.createElement("div",{ref:t,"data-plyr-provider":"youtube","data-plyr-embed-id":n}));case"vimeo":var r=e.url.match(/(http|https)?:\/\/(www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|)(\d+)(?:|\/\?)/);return wp.element.createElement("div",{className:"video_wrapper"}," ",wp.element.createElement("div",{ref:t,"data-plyr-provider":"vimeo","data-plyr-embed-id":r[4]}));case"audio":return wp.element.createElement("div",{className:"video_wrapper"},wp.element.createElement("audio",{class:"audio_plyr",controls:!0},wp.element.createElement("source",{src:e.url,type:"audio/mp3"})));default:if(void 0!==e.url&&e.type)return e.url.split(".pdf").length>1?wp.element.createElement("div",{className:"embed_block_wrapper"},wp.element.createElement("embed",{width:"200px",height:"300px",controls:!0,type:"application/pdf",src:e.url}),wp.element.createElement("div",{className:"embed_block"})):wp.element.createElement("div",{className:"embed_block_wrapper"},wp.element.createElement("a",{href:e.url},wp.element.createElement("span",{className:"vicon vicon-clip"})))}}(a)))," "))):wp.element.createElement("div",{className:"upload_media"},wp.element.createElement("label",{for:"vibe_editor_upload_media_wrap",style:{border:"1px dotted var(--darkborder)",padding:"1rem"},onClick:function(){d(!0)}},wp.element.createElement("span",{className:"vicon vicon-plus"})),wp.element.createElement("div",{className:"file_restrictions_info"},wp.element.createElement("div",{className:"allowed_file_types"},e.field.hasOwnProperty("upload_types")&&e.field.upload_types.length?wp.element.createElement(Qe,null,wp.element.createElement("span",null,window.vibebp.translations.allowed_file_types),wp.element.createElement("div",null,e.field.upload_types.map((function(e){return wp.element.createElement("span",null,e)})))):""),wp.element.createElement("div",{className:"allowed_file_size"},e.field.hasOwnProperty("upload_size")&&e.field.upload_size?wp.element.createElement(Qe,null,wp.element.createElement("span",null,window.vibebp.translations.max_size),wp.element.createElement("span",null,e.field.upload_size+" MB")):"")),s&&s.length?wp.element.createElement("div",{className:"vbp_message vbp_error"},s):"",p?wp.element.createElement(ze,{post_mime_type:b,allowed_file_size:e.field.upload_size,close:function(){d(!1)},share:function(e){if(e.hasOwnProperty("type")&&["youtube","vimeo"].includes(e.type))if("youtube"==e.type){if(!_(e.url))return u(window.vibebp.translations.invalid_url),!1}else if("vimeo"==e.type){if(!e.url.match(/(http|https)?:\/\/(www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|)(\d+)(?:|\/\?)/))return u(window.vibebp.translations.invalid_url),!1}i(e),h(e)},embed_options:["video","youtube","vimeo"]}):""))};function it(e){return function(e){if(Array.isArray(e))return mt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ut(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||ut(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){if(e){if("string"==typeof e)return mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mt(e,t):void 0}}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pt=wp.element,dt=(pt.createElement,pt.render,pt.useState),ft=pt.useEffect,bt=pt.Fragment,vt=(pt.useContext,pt.useRef),wt=wp.data,yt=wt.dispatch,gt=wt.select,ht=function(e){var t=vt(null),n=st(dt(!1),2),r=(n[0],n[1],st(dt([]),2)),a=r[0],i=r[1],o=st(dt(!1),2),l=(o[0],o[1],st(dt(0),2)),c=(l[0],l[1],st(dt(""),2)),s=c[0],u=c[1],p=st(dt(!1),2),d=p[0],f=p[1],b=st(dt([]),2),v=b[0],w=b[1],y=st(dt(null),2),g=y[0],h=y[1];ft((function(){s.length&&setTimeout((function(){u("")}),5e3)}),[s]),ft((function(){e.field.hasOwnProperty("value")&&void 0!==e.field.value&&e.field.value.length&&(m(e.field.value)?i(JSON.parse(e.field.value)):i(e.field.value));var t=[];e.field.all_upload_types&&Array.isArray(e.field.upload_types)&&e.field.upload_types.length&&e.field.upload_types.map((function(n){e.field.all_upload_types.hasOwnProperty(n)&&e.field.all_upload_types[n].length&&e.field.all_upload_types[n].map((function(e){t.push(e)}))})),t.push("image"),w(t)}),[e.field]);var _=function(t){if(void 0===t&&(t=a),e.hasOwnProperty("registration")&&e.registration)e.update(field);else{g&&g.abort();var n={},r=new AbortController;g&&(n={signal:r.signal}),h(r),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),lt(lt({method:"post"},n),{},{body:JSON.stringify(lt({field_id:e.field.id,type:e.field.type,value:t,token:gt("vibebp").getToken()},e))})).then((function(e){return e.json()})).then((function(e){h(null),f(!1),yt("vibebp").addNotification({text:e.message})}))}};return wp.element.createElement("div",{className:"gallery_field"},wp.element.createElement("div",{className:"upload_media"},a&&a.length?wp.element.createElement("div",{className:"media_gallery"},a.map((function(e,n){return wp.element.createElement("div",null,wp.element.createElement("div",{className:"single_media"},wp.element.createElement("div",null,wp.element.createElement("span",{className:"remove vicon vicon-close",onClick:function(){var e=it(a);e.splice(n,1),_(e),i(e)}}),wp.element.createElement("div",null,"  ",wp.element.createElement("div",null," ",function(e){switch(e.type){case"image":return wp.element.createElement("img",{src:e.url,className:"content_to_html_image"});case"video":return wp.element.createElement("div",{className:"video_wrapper"},wp.element.createElement("video",{ref:t,class:"video_plyr"},wp.element.createElement("source",{src:e.url,type:"video/mp4"})));default:if(void 0!==e.url&&e.type)return e.url.split(".pdf").length>1?wp.element.createElement("div",{className:"embed_block_wrapper"},wp.element.createElement("embed",{width:"200px",height:"300px",controls:!0,type:"application/pdf",src:e.url}),wp.element.createElement("div",{className:"embed_block"})):wp.element.createElement("div",{className:"embed_block_wrapper"},wp.element.createElement("a",{href:e.url},wp.element.createElement("span",{className:"vicon vicon-clip"})))}}(e)))," ")))}))):"",wp.element.createElement("label",{for:"vibe_editor_upload_media_wrap",onClick:function(){f(!0)}},wp.element.createElement("span",{className:"vicon vicon-plus"})),wp.element.createElement("div",{className:"file_restrictions_info"},wp.element.createElement("div",{className:"allowed_file_types"},e.field.hasOwnProperty("upload_types")&&e.field.upload_types.length?wp.element.createElement(bt,null,wp.element.createElement("strong",null,window.vibebp.translations.allowed_file_types),wp.element.createElement("div",null,e.field.upload_types.map((function(e){return wp.element.createElement("span",null,e)})))):""),wp.element.createElement("div",{className:"allowed_file_size"},e.field.hasOwnProperty("upload_size")&&e.field.upload_size?wp.element.createElement(bt,null,wp.element.createElement("strong",null,window.vibebp.translations.max_size),wp.element.createElement("span",null,e.field.upload_size+" MB")):"")),s&&s.length?wp.element.createElement("div",{className:"vbp_message vbp_error"},s):"",d?wp.element.createElement(ze,{post_mime_type:v,autoclose:"1",allowed_file_size:e.field.upload_size,close:function(){f(!1)},share:function(e){if(e.hasOwnProperty("type")&&e.hasOwnProperty("url")){var t=it(a);t.push(e),i(t),_(t)}},embed_options:["video","youtube","vimeo"]}):""))};function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Et(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ot=wp.element,jt=(Ot.createElement,Ot.useState),St=Ot.useEffect,Nt=(Ot.Fragment,Ot.render,Ot.useRef,wp.data),kt=(Nt.dispatch,Nt.select,function(e){var t=_t(jt(e.value),2),n=t[0],r=t[1],a=_t(jt({}),2),i=a[0],o=a[1];return St((function(){var t=100,r=0;e.hasOwnProperty("max")&&(t=e.max),e.hasOwnProperty("min")&&(r=e.min);var a=Math.round(100*n/(t-r));o({background:"linear-gradient(to right, var(--primary), var(--primary) "+a+"%, var(--light) "+a+"%, var(--light) 100%)"})}),[]),wp.element.createElement("div",{class:"range"},wp.element.createElement("div",{class:"form-group range__slider"},wp.element.createElement("input",{type:"range",style:i,step:e.hasOwnProperty("step")?e.step:"",min:e.hasOwnProperty("min")?e.min:0,max:e.hasOwnProperty("max")?e.max:100,value:n,onChange:function(t){r(t.target.value);var n=100,a=0;e.hasOwnProperty("max")&&(n=e.max),e.hasOwnProperty("min")&&(a=e.min);var i=Math.round(100*t.target.value/(n-a));console.log(i),o({background:"linear-gradient(to right, var(--primary), var(--primary) "+i+"%, var(--light) "+i+"%, var(--light) 100%)"}),e.change(t.target.value)}})),wp.element.createElement("div",{class:"form-group range__value"},e.hasOwnProperty("valueLabel")?wp.element.createElement("label",null,e.valueLabel):"",wp.element.createElement("span",null,n)))});function Pt(e){return function(e){if(Array.isArray(e))return Dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Tt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){It(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Tt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e,t){if(e){if("string"==typeof e)return Dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(e,t):void 0}}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Mt=wp.element,Lt=(Mt.createElement,Mt.render,Mt.Fragment,Mt.useState),Jt=Mt.useEffect,Ut=wp.data,Rt=Ut.dispatch,Ft=Ut.select;function Ht(e){var t=Ct(Lt(e.field),2),n=t[0],r=t[1],a=Ct(Lt(),2),i=a[0],o=a[1],l=Ct(Lt(!1),2),c=l[0],s=l[1],m=Ct(Lt(null),2),p=m[0],d=m[1];Jt((function(){s(!0),fetch("".concat(window.vibebp.api.url,"/xprofile/field/options?field_id=").concat(n.id).concat(e.registration?"&client_id="+window.vibebp.settings.client_id:""),{method:"post",body:JSON.stringify(At({field_id:n.id,type:n.type,token:Ft("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(e){s(!1),e.status&&o(e.values)})).catch((function(e){s(!1),console.log({error:e})}))}),[]);u((function(){n.value&&i&&function(){if(e.hasOwnProperty("registration")&&e.registration)e.update(n);else{p&&p.abort();var t=new AbortController,r=p?{signal:t.signal}:{};d(t),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),At(At({method:"post"},r),{},{body:JSON.stringify(At({field_id:n.id,type:n.type,value:n.value,token:Ft("vibebp").getToken()},e))})).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("message")&&Rt("vibebp").addNotification({text:e.message})})).catch((function(e){console.log({error:e})}))}}()}),500,[n.value]);return wp.element.createElement("div",{className:"frontend_profile_field"},c?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",wp.element.createElement("div",{className:"_profile_field_body"},i?wp.element.createElement("div",{className:"vibebpProfile_table_wrapper"},wp.element.createElement("table",{className:"vibebpProfile_table"},i.hasOwnProperty("columns")&&i.columns&&i.columns.length&&i.hasOwnProperty("rows")&&i.rows&&i.rows.length?function(){for(var e=[],t=function(t){e.push(wp.element.createElement("tr",null,function(){for(var e=[],a=0;a<=i.columns.length;a++)if(0===a)if(0===t)e.push(wp.element.createElement("th",null));else{var o=i.rows[t-1];e.push(wp.element.createElement("th",{className:"removable_item"},wp.element.createElement("span",null,o.name)))}else if(0===t){var l=i.columns[a-1];e.push(wp.element.createElement("th",{className:"removable_item"},wp.element.createElement("span",null,l.name)))}else!function(){var o={row:i.rows[t-1].id,column:i.columns[a-1].id},l=At(At({},o),{},{type:"text",value:""});if(i.values){var c=i.values.findIndex((function(e){return e.row===o.row&&e.column===o.column}));c>-1&&i.values[c].row&&i.values[c].column&&(l=i.values[c])}var s=[];if(n.value&&Array.isArray(n.value)&&n.value.length){var u=n.value.find((function(e){return e.row===o.row&&e.column===o.column}));u&&(s=u.value)}e.push(wp.element.createElement("td",null,wp.element.createElement("div",null,wp.element.createElement(qt,{field:At(At({},l),{},{value:s}),change:function(e){r((function(t){var n=At({},t);n.hasOwnProperty("value")&&Array.isArray(n.value)?n.value=Pt(t.value):n.value=[];var r=At(At({},o),{},{value:e}),a=n.value.findIndex((function(e){return e.row===o.row&&e.column===o.column}));return a>-1?n.value.splice(a,1,At({},r)):n.value.push(At({},r)),n}))}}))))}();return e}()))},a=0;a<=i.rows.length;a++)t(a);return e}():"")):""))}function qt(e){var t=Ct(Lt({}),2),n=t[0],r=t[1],a=Ct(Lt(!0),2),i=a[0],o=(a[1],function(t){return e.change(t)});return Jt((function(){r(e.field&&e.field.row&&e.field.column?At({},e.field):At(At({},e.ids),{},{type:"text",value:""}))}),[e.field]),wp.element.createElement("div",{className:"profile_field_fields_element"},i?wp.element.createElement("div",{className:"field_settings"},"text"===n.type||"number"===n.type?wp.element.createElement("input",{type:"string"==typeof n.value||"number"==typeof n.value?n.value:"",value:n.value,onChange:function(e){return o(e.target.value)}}):"option"===n.type?wp.element.createElement("div",null,n.options&&n.options.length?wp.element.createElement("select",{onChange:function(e){return o(e.target.value)},value:n.value},n.options.map((function(e){return wp.element.createElement("option",{field:e.field},e.lable)}))):""):"range"===n.type||"points"===n.type?wp.element.createElement(kt,{value:n.value,min:"0",max:"100",change:function(e){return o(e)}}):"checkbox"===n.type?wp.element.createElement("div",null,n.options&&n.options.length?n.options.map((function(e,t){var a=At({},n);return a.value&&Array.isArray(a.value)||(a.value=[]),wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{type:"checkbox",id:"custom-checkbox-".concat(t),value:t,checked:a.value.indexOf(t)>-1,onChange:function(){var e=At({},n);e.value&&Array.isArray(e.value)||(e.value=[]);var a=Pt(e.value);a.indexOf(t)>-1?a.splice(a.indexOf(t),1):a.push(t),r(At(At({},e),{},{value:a})),o(a)}}),wp.element.createElement("label",{htmlFor:"custom-checkbox-".concat(t)},e.lable))})):""):""):"")}function $t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(n),!0).forEach((function(t){Bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Gt=wp.element,Zt=(Gt.createElement,Gt.render,Gt.useState),Kt=Gt.useEffect,Xt=Gt.Fragment,Yt=(Gt.useContext,Gt.useRef,wp.data),Qt=(Yt.dispatch,Yt.select,[{name:"Afghanistan",dial_code:"93",code:"AF"},{name:"Aland Islands",dial_code:"358",code:"AX"},{name:"Albania",dial_code:"355",code:"AL"},{name:"Algeria",dial_code:"213",code:"DZ"},{name:"AmericanSamoa",dial_code:"1684",code:"AS"},{name:"Andorra",dial_code:"376",code:"AD"},{name:"Angola",dial_code:"244",code:"AO"},{name:"Anguilla",dial_code:"1264",code:"AI"},{name:"Antarctica",dial_code:"672",code:"AQ"},{name:"Antigua and Barbuda",dial_code:"1268",code:"AG"},{name:"Argentina",dial_code:"54",code:"AR"},{name:"Armenia",dial_code:"374",code:"AM"},{name:"Aruba",dial_code:"297",code:"AW"},{name:"Australia",dial_code:"61",code:"AU"},{name:"Austria",dial_code:"43",code:"AT"},{name:"Azerbaijan",dial_code:"994",code:"AZ"},{name:"Bahamas",dial_code:"1242",code:"BS"},{name:"Bahrain",dial_code:"973",code:"BH"},{name:"Bangladesh",dial_code:"880",code:"BD"},{name:"Barbados",dial_code:"1246",code:"BB"},{name:"Belarus",dial_code:"375",code:"BY"},{name:"Belgium",dial_code:"32",code:"BE"},{name:"Belize",dial_code:"501",code:"BZ"},{name:"Benin",dial_code:"229",code:"BJ"},{name:"Bermuda",dial_code:"1441",code:"BM"},{name:"Bhutan",dial_code:"975",code:"BT"},{name:"Bolivia, Plurinational State of",dial_code:"591",code:"BO"},{name:"Bosnia and Herzegovina",dial_code:"387",code:"BA"},{name:"Botswana",dial_code:"267",code:"BW"},{name:"Brazil",dial_code:"55",code:"BR"},{name:"British Indian Ocean Territory",dial_code:"246",code:"IO"},{name:"Brunei Darussalam",dial_code:"673",code:"BN"},{name:"Bulgaria",dial_code:"359",code:"BG"},{name:"Burkina Faso",dial_code:"226",code:"BF"},{name:"Burundi",dial_code:"257",code:"BI"},{name:"Cambodia",dial_code:"855",code:"KH"},{name:"Cameroon",dial_code:"237",code:"CM"},{name:"Canada",dial_code:"1",code:"CA"},{name:"Cape Verde",dial_code:"238",code:"CV"},{name:"Cayman Islands",dial_code:" 345",code:"KY"},{name:"Central African Republic",dial_code:"236",code:"CF"},{name:"Chad",dial_code:"235",code:"TD"},{name:"Chile",dial_code:"56",code:"CL"},{name:"China",dial_code:"86",code:"CN"},{name:"Christmas Island",dial_code:"61",code:"CX"},{name:"Cocos (Keeling) Islands",dial_code:"61",code:"CC"},{name:"Colombia",dial_code:"57",code:"CO"},{name:"Comoros",dial_code:"269",code:"KM"},{name:"Congo",dial_code:"242",code:"CG"},{name:"Congo, The Democratic Republic of the Congo",dial_code:"243",code:"CD"},{name:"Cook Islands",dial_code:"682",code:"CK"},{name:"Costa Rica",dial_code:"506",code:"CR"},{name:"Cote d'Ivoire",dial_code:"225",code:"CI"},{name:"Croatia",dial_code:"385",code:"HR"},{name:"Cuba",dial_code:"53",code:"CU"},{name:"Cyprus",dial_code:"357",code:"CY"},{name:"Czech Republic",dial_code:"420",code:"CZ"},{name:"Denmark",dial_code:"45",code:"DK"},{name:"Djibouti",dial_code:"253",code:"DJ"},{name:"Dominica",dial_code:"1767",code:"DM"},{name:"Dominican Republic",dial_code:"1849",code:"DO"},{name:"Ecuador",dial_code:"593",code:"EC"},{name:"Egypt",dial_code:"20",code:"EG"},{name:"El Salvador",dial_code:"503",code:"SV"},{name:"Equatorial Guinea",dial_code:"240",code:"GQ"},{name:"Eritrea",dial_code:"291",code:"ER"},{name:"Estonia",dial_code:"372",code:"EE"},{name:"Ethiopia",dial_code:"251",code:"ET"},{name:"Falkland Islands (Malvinas)",dial_code:"500",code:"FK"},{name:"Faroe Islands",dial_code:"298",code:"FO"},{name:"Fiji",dial_code:"679",code:"FJ"},{name:"Finland",dial_code:"358",code:"FI"},{name:"France",dial_code:"33",code:"FR"},{name:"French Guiana",dial_code:"594",code:"GF"},{name:"French Polynesia",dial_code:"689",code:"PF"},{name:"Gabon",dial_code:"241",code:"GA"},{name:"Gambia",dial_code:"220",code:"GM"},{name:"Georgia",dial_code:"995",code:"GE"},{name:"Germany",dial_code:"49",code:"DE"},{name:"Ghana",dial_code:"233",code:"GH"},{name:"Gibraltar",dial_code:"350",code:"GI"},{name:"Greece",dial_code:"30",code:"GR"},{name:"Greenland",dial_code:"299",code:"GL"},{name:"Grenada",dial_code:"1473",code:"GD"},{name:"Guadeloupe",dial_code:"590",code:"GP"},{name:"Guam",dial_code:"1671",code:"GU"},{name:"Guatemala",dial_code:"502",code:"GT"},{name:"Guernsey",dial_code:"44",code:"GG"},{name:"Guinea",dial_code:"224",code:"GN"},{name:"Guinea-Bissau",dial_code:"245",code:"GW"},{name:"Guyana",dial_code:"595",code:"GY"},{name:"Haiti",dial_code:"509",code:"HT"},{name:"Holy See (Vatican City State)",dial_code:"379",code:"VA"},{name:"Honduras",dial_code:"504",code:"HN"},{name:"Hong Kong",dial_code:"852",code:"HK"},{name:"Hungary",dial_code:"36",code:"HU"},{name:"Iceland",dial_code:"354",code:"IS"},{name:"India",dial_code:"91",code:"IN"},{name:"Indonesia",dial_code:"62",code:"ID"},{name:"Iran, Islamic Republic of Persian Gulf",dial_code:"98",code:"IR"},{name:"Iraq",dial_code:"964",code:"IQ"},{name:"Ireland",dial_code:"353",code:"IE"},{name:"Isle of Man",dial_code:"44",code:"IM"},{name:"Israel",dial_code:"972",code:"IL"},{name:"Italy",dial_code:"39",code:"IT"},{name:"Jamaica",dial_code:"1876",code:"JM"},{name:"Japan",dial_code:"81",code:"JP"},{name:"Jersey",dial_code:"44",code:"JE"},{name:"Jordan",dial_code:"962",code:"JO"},{name:"Kazakhstan",dial_code:"77",code:"KZ"},{name:"Kenya",dial_code:"254",code:"KE"},{name:"Kiribati",dial_code:"686",code:"KI"},{name:"Korea, Democratic People's Republic of Korea",dial_code:"850",code:"KP"},{name:"Korea, Republic of South Korea",dial_code:"82",code:"KR"},{name:"Kuwait",dial_code:"965",code:"KW"},{name:"Kyrgyzstan",dial_code:"996",code:"KG"},{name:"Laos",dial_code:"856",code:"LA"},{name:"Latvia",dial_code:"371",code:"LV"},{name:"Lebanon",dial_code:"961",code:"LB"},{name:"Lesotho",dial_code:"266",code:"LS"},{name:"Liberia",dial_code:"231",code:"LR"},{name:"Libyan Arab Jamahiriya",dial_code:"218",code:"LY"},{name:"Liechtenstein",dial_code:"423",code:"LI"},{name:"Lithuania",dial_code:"370",code:"LT"},{name:"Luxembourg",dial_code:"352",code:"LU"},{name:"Macao",dial_code:"853",code:"MO"},{name:"Macedonia",dial_code:"389",code:"MK"},{name:"Madagascar",dial_code:"261",code:"MG"},{name:"Malawi",dial_code:"265",code:"MW"},{name:"Malaysia",dial_code:"60",code:"MY"},{name:"Maldives",dial_code:"960",code:"MV"},{name:"Mali",dial_code:"223",code:"ML"},{name:"Malta",dial_code:"356",code:"MT"},{name:"Marshall Islands",dial_code:"692",code:"MH"},{name:"Martinique",dial_code:"596",code:"MQ"},{name:"Mauritania",dial_code:"222",code:"MR"},{name:"Mauritius",dial_code:"230",code:"MU"},{name:"Mayotte",dial_code:"262",code:"YT"},{name:"Mexico",dial_code:"52",code:"MX"},{name:"Micronesia, Federated States of Micronesia",dial_code:"691",code:"FM"},{name:"Moldova",dial_code:"373",code:"MD"},{name:"Monaco",dial_code:"377",code:"MC"},{name:"Mongolia",dial_code:"976",code:"MN"},{name:"Montenegro",dial_code:"382",code:"ME"},{name:"Montserrat",dial_code:"1664",code:"MS"},{name:"Morocco",dial_code:"212",code:"MA"},{name:"Mozambique",dial_code:"258",code:"MZ"},{name:"Myanmar",dial_code:"95",code:"MM"},{name:"Namibia",dial_code:"264",code:"NA"},{name:"Nauru",dial_code:"674",code:"NR"},{name:"Nepal",dial_code:"977",code:"NP"},{name:"Netherlands",dial_code:"31",code:"NL"},{name:"Netherlands Antilles",dial_code:"599",code:"AN"},{name:"New Caledonia",dial_code:"687",code:"NC"},{name:"New Zealand",dial_code:"64",code:"NZ"},{name:"Nicaragua",dial_code:"505",code:"NI"},{name:"Niger",dial_code:"227",code:"NE"},{name:"Nigeria",dial_code:"234",code:"NG"},{name:"Niue",dial_code:"683",code:"NU"},{name:"Norfolk Island",dial_code:"672",code:"NF"},{name:"Northern Mariana Islands",dial_code:"1670",code:"MP"},{name:"Norway",dial_code:"47",code:"NO"},{name:"Oman",dial_code:"968",code:"OM"},{name:"Pakistan",dial_code:"92",code:"PK"},{name:"Palau",dial_code:"680",code:"PW"},{name:"Palestinian Territory, Occupied",dial_code:"970",code:"PS"},{name:"Panama",dial_code:"507",code:"PA"},{name:"Papua New Guinea",dial_code:"675",code:"PG"},{name:"Paraguay",dial_code:"595",code:"PY"},{name:"Peru",dial_code:"51",code:"PE"},{name:"Philippines",dial_code:"63",code:"PH"},{name:"Pitcairn",dial_code:"872",code:"PN"},{name:"Poland",dial_code:"48",code:"PL"},{name:"Portugal",dial_code:"351",code:"PT"},{name:"Puerto Rico",dial_code:"1939",code:"PR"},{name:"Qatar",dial_code:"974",code:"QA"},{name:"Romania",dial_code:"40",code:"RO"},{name:"Russia",dial_code:"7",code:"RU"},{name:"Rwanda",dial_code:"250",code:"RW"},{name:"Reunion",dial_code:"262",code:"RE"},{name:"Saint Barthelemy",dial_code:"590",code:"BL"},{name:"Saint Helena, Ascension and Tristan Da Cunha",dial_code:"290",code:"SH"},{name:"Saint Kitts and Nevis",dial_code:"1869",code:"KN"},{name:"Saint Lucia",dial_code:"1758",code:"LC"},{name:"Saint Martin",dial_code:"590",code:"MF"},{name:"Saint Pierre and Miquelon",dial_code:"508",code:"PM"},{name:"Saint Vincent and the Grenadines",dial_code:"1784",code:"VC"},{name:"Samoa",dial_code:"685",code:"WS"},{name:"San Marino",dial_code:"378",code:"SM"},{name:"Sao Tome and Principe",dial_code:"239",code:"ST"},{name:"Saudi Arabia",dial_code:"966",code:"SA"},{name:"Senegal",dial_code:"221",code:"SN"},{name:"Serbia",dial_code:"381",code:"RS"},{name:"Seychelles",dial_code:"248",code:"SC"},{name:"Sierra Leone",dial_code:"232",code:"SL"},{name:"Singapore",dial_code:"65",code:"SG"},{name:"Slovakia",dial_code:"421",code:"SK"},{name:"Slovenia",dial_code:"386",code:"SI"},{name:"Solomon Islands",dial_code:"677",code:"SB"},{name:"Somalia",dial_code:"252",code:"SO"},{name:"South Africa",dial_code:"27",code:"ZA"},{name:"South Sudan",dial_code:"211",code:"SS"},{name:"South Georgia and the South Sandwich Islands",dial_code:"500",code:"GS"},{name:"Spain",dial_code:"34",code:"ES"},{name:"Sri Lanka",dial_code:"94",code:"LK"},{name:"Sudan",dial_code:"249",code:"SD"},{name:"Suriname",dial_code:"597",code:"SR"},{name:"Svalbard and Jan Mayen",dial_code:"47",code:"SJ"},{name:"Swaziland",dial_code:"268",code:"SZ"},{name:"Sweden",dial_code:"46",code:"SE"},{name:"Switzerland",dial_code:"41",code:"CH"},{name:"Syrian Arab Republic",dial_code:"963",code:"SY"},{name:"Taiwan",dial_code:"886",code:"TW"},{name:"Tajikistan",dial_code:"992",code:"TJ"},{name:"Tanzania, United Republic of Tanzania",dial_code:"255",code:"TZ"},{name:"Thailand",dial_code:"66",code:"TH"},{name:"Timor-Leste",dial_code:"670",code:"TL"},{name:"Togo",dial_code:"228",code:"TG"},{name:"Tokelau",dial_code:"690",code:"TK"},{name:"Tonga",dial_code:"676",code:"TO"},{name:"Trinidad and Tobago",dial_code:"1868",code:"TT"},{name:"Tunisia",dial_code:"216",code:"TN"},{name:"Turkey",dial_code:"90",code:"TR"},{name:"Turkmenistan",dial_code:"993",code:"TM"},{name:"Turks and Caicos Islands",dial_code:"1649",code:"TC"},{name:"Tuvalu",dial_code:"688",code:"TV"},{name:"Uganda",dial_code:"256",code:"UG"},{name:"Ukraine",dial_code:"380",code:"UA"},{name:"United Arab Emirates",dial_code:"971",code:"AE"},{name:"United Kingdom",dial_code:"44",code:"GB"},{name:"United States",dial_code:"1",code:"US"},{name:"Uruguay",dial_code:"598",code:"UY"},{name:"Uzbekistan",dial_code:"998",code:"UZ"},{name:"Vanuatu",dial_code:"678",code:"VU"},{name:"Venezuela, Bolivarian Republic of Venezuela",dial_code:"58",code:"VE"},{name:"Vietnam",dial_code:"84",code:"VN"},{name:"Virgin Islands, British",dial_code:"1284",code:"VG"},{name:"Virgin Islands, U.S.",dial_code:"1340",code:"VI"},{name:"Wallis and Futuna",dial_code:"681",code:"WF"},{name:"Yemen",dial_code:"967",code:"YE"},{name:"Zambia",dial_code:"260",code:"ZM"},{name:"Zimbabwe",dial_code:"263",code:"ZW"}]);Qt=Qt.sort((function(e,t){return parseInt(t.dial_code)>parseInt(e.dial_code)}));var en=function(e){var t=Wt(Zt(e.field),2),n=t[0],r=t[1];Kt((function(){r(e.field)}),[e.field]);return wp.element.createElement("span",null,function(e){if(!e)return e;var t=e.replace(/[^\d]/g,""),n=t.length;return n<4?""+t:n<7?"".concat(""," (").concat(t.slice(0,3),") ").concat(t.slice(3)):n<15?"(".concat(t.slice(0,3),") ").concat(t.slice(3,6),"-").concat(t.slice(6,15)):wp.element.createElement(Xt,null,wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:""}})," `($",t.slice(0,3),") $",t.slice(3,6),"-$",t.slice(6,15),"`")}(n.value),wp.element.createElement("input",{type:"number",value:n.value,onChange:function(e){r(zt(zt({},n),{},{value:e.target.value}))},onBlur:function(t){return e.update(zt(zt({},n),{},{value:t.target.value}))}}))};function tn(){return(tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function nn(e){return function(e){if(Array.isArray(e))return un(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||sn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function an(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?an(Object(n),!0).forEach((function(t){ln(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||sn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sn(e,t){if(e){if("string"==typeof e)return un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?un(e,t):void 0}}function un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mn=wp.element,pn=(mn.createElement,mn.useState),dn=mn.useEffect,fn=mn.Fragment,bn=(mn.render,mn.useRef),vn=wp.data,wn=vn.dispatch,yn=vn.select,gn=!1,hn=function(e){var t=cn(pn(!1),2),n=t[0],r=t[1],a=cn(pn(!1),2),i=a[0],o=a[1],l=cn(pn({}),2),c=l[0],s=l[1],m=cn(pn(null),2),p=m[0],d=m[1],f=bn(null);dn((function(){}),[]),u((function(){var t;"checkbox"!=e.field.type&&"selectbox"!=e.field.type&&"radio"!=e.field.type&&"multiselect"!=e.field.type&&"multiselectbox"!=e.field.type||e.field.hasOwnProperty("options")&&e.field.options.length||((null===(t=c.options)||void 0===t?void 0:t.length)||fetch("".concat(window.vibebp.api.url,"/xprofile/field/options?field_id=").concat(e.field.id,"&client_id=").concat(window.vibebp.settings.client_id,"&force"),{method:"post",body:JSON.stringify(on({field_id:e.field.id,type:e.field.type,token:yn("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(t){t.status?(s(on(on({},e.field),{},{options:t.values})),e.update&&e.update(on(on({},e.field),{},{options:t.values}))):s(on(on({},e.field),{},{options:[]}))})));var n=new CustomEvent("field_loaded",{detail:{field:e.field}});document.dispatchEvent(n),s(e.field)}),500,[e.field]),dn((function(){return function(){f&&f.hasOwnProperty("current")&&f.current&&"undefined"!=typeof flatpickr&&f.current.flatpickr().destroy()}}),[e.field.id]);dn((function(){if(f&&f.hasOwnProperty("current")&&f.current&&"undefined"!=typeof flatpickr){var e={altInput:!0,dateFormat:"Y-m-d",defaultDate:c.hasOwnProperty("value")&&c.value.length?c.value:[],onChange:b};flatpickr(f.current,e)}}),[c]),dn((function(){if(e.hasOwnProperty("registration")&&e.registration)e.update(c);else if(n&&"checkbox"==c.type){gn&&gn.abort();var t={},a=new AbortController;gn&&(t={signal:a.signal}),gn=a,o(!0),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),on(on({method:"post"},t),{},{body:JSON.stringify(on({field_id:c.id,type:c.type,value:c.value,token:yn("vibebp").getToken()},e))})).then((function(e){return e.json()})).then((function(t){o(!1),r(!1),document.dispatchEvent(new CustomEvent("xprofile_field_saved",{detail:{field_id:c.id}})),e.hasOwnProperty("update")&&e.update(c),t.hasOwnProperty("message")&&wn("vibebp").addNotification({icon:t.status?"vicon vicon-check-box":"vicon vicon-alert",text:t.message})}))}}),[c.value,n]),u((function(){if(e.hasOwnProperty("registration")&&e.registration)e.update(c);else if(n&&"checkbox"!=c.type){gn&&gn.abort();var t={},a=new AbortController;gn&&(t={signal:a.signal}),gn=a,o(!0),fetch("".concat(window.vibebp.api.url,"/xprofile/field/save?post"),on(on({method:"post"},t),{},{body:JSON.stringify(on({field_id:c.id,type:c.type,value:c.value,token:yn("vibebp").getToken()},e))})).then((function(e){return e.json()})).then((function(t){o(!1),r(!1),document.dispatchEvent(new CustomEvent("xprofile_field_saved",{detail:{field_id:c.id}})),e.hasOwnProperty("update")&&e.update(c),t.hasOwnProperty("message")&&wn("vibebp").addNotification({icon:t.status?"vicon vicon-check-box":"vicon vicon-alert",text:t.message})}))}}),100,[n]);var b=function(e){var t=on({},c);if(e&&e.length){var n=e[0].getDate();(n=n.toString()).length<2&&(n="0"+n);var a=e[0].getMonth()+1;(a=a.toString()).length<2&&(a="0"+a);var i=e[0].getFullYear()+"-"+a+"-"+n;t.value=i}else t.value="";s(t),r(!0)};return wp.element.createElement("div",{className:i?"vibebp_form_field control is-loading":"vibebp_form_field control"},"checkbox_acceptance"!==c.type?wp.element.createElement("label",null,wp.element.createElement("span",null,wp.element.createElement("strong",{dangerouslySetInnerHTML:{__html:c.name}}),c.description&&c.description.length?wp.element.createElement(fn,null,wp.element.createElement("span",{className:"vicon vicon-help-alt"}),wp.element.createElement("div",{className:"field_description",dangerouslySetInnerHTML:{__html:c.description}})):""),window.vibebp.components.hasOwnProperty("xprofile")&&window.vibebp.components.xprofile.hasOwnProperty("visibility")?wp.element.createElement("span",null,window.vibebp.components.xprofile.visibility[c.visibility]):""):"",c.hasOwnProperty("type")?"textbox"===c.type?wp.element.createElement("input",{type:"text",value:c.value,onChange:function(){var e,t=(e=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(on(on({},c),{},{value:t.target.value}));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){rn(i,r,a,o,l,"next",e)}function l(e){rn(i,r,a,o,l,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),onBlur:function(){r(!0)}}):"number"===c.type?wp.element.createElement("input",{type:"number",value:c.value,onChange:function(e){s(on(on({},c),{},{value:e.target.value})),r(!0)}}):"telephone"===c.type?wp.element.createElement(en,{field:c,update:function(e){s(e),r(!0)}}):"url"===c.type?wp.element.createElement("input",{type:"text",value:c.value,onChange:function(e){s(on(on({},c),{},{value:e.target.value})),r(!0)}}):"range"===c.type?wp.element.createElement("input",{type:"range",value:c.value,min:"0",max:"100",onChange:function(e){s(on(on({},c),{},{value:e.target.value})),r(!0)}}):"points"===c.type?wp.element.createElement("input",{type:"range",value:c.value,min:"0",max:"5",onChange:function(e){s(on(on({},c),{},{value:e.target.value})),r(!0)}}):"textarea"===c.type?wp.element.createElement("textarea",{onChange:function(e){s(on(on({},c),{},{value:e.target.value}))},onBlur:function(){r(!0)}},c.value):"selectbox"===c.type?wp.element.createElement("select",{onChange:function(e){s(on(on({},c),{},{value:e.target.value})),r(!0)},value:c.value},c.hasOwnProperty("options")?c.options.map((function(e,t){return wp.element.createElement("option",{value:e.name},e.name)})):""):"radio"===c.type?wp.element.createElement("div",{className:"vibebp_field_group"},c.hasOwnProperty("options")?c.options.map((function(t,a){return wp.element.createElement("div",{className:"radio"},wp.element.createElement("input",{id:t.id,type:"radio",value:t.name,checked:c.value===t.name,onChange:function(t){n||(s(on(on({},c),{},{value:t.target.value})),e.registration||r(!0))}}),wp.element.createElement("label",{for:t.id},t.name))})):""):"checkbox"===c.type?wp.element.createElement("div",{className:"vibebp_field_group"},c.hasOwnProperty("options")?c.options.map((function(e,t){return wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{type:"checkbox",id:e.id,value:e.name,checked:c.value&&c.value.indexOf(e.name)>-1,onChange:function(t){if(Array.isArray(c.value)||(c.value=[]),c.value&&-1===c.value.indexOf(e.name)){var n=nn(c.value);n.push(e.name),s(on(on({},c),{},{value:n}))}else{var a=nn(c.value);a.splice(c.value.indexOf(e.name),1),s(on(on({},c),{},{value:a}))}r(!0)}}),wp.element.createElement("label",{for:e.id},e.name))})):""):"multiselectbox"===c.type?wp.element.createElement(be,{update:function(e,t,n){s(on(on({},c),{},{value:e.value})),r(!0)},field:c}):"datebox"===c.type?wp.element.createElement("input",{type:"date",ref:f}):"country"===c.type?wp.element.createElement("select",{onChange:function(e){s(on(on({},c),{},{value:e.target.value})),r(!0)},value:c.value},window.vibebp.components.hasOwnProperty("xprofile")&&Object.keys(window.vibebp.components.xprofile.countries).length?Object.keys(window.vibebp.components.xprofile.countries).map((function(e,t){return wp.element.createElement("option",{value:e},window.vibebp.components.xprofile.countries[e])})):""):"color"===c.type?wp.element.createElement(fn,null,"undefined"==typeof Picker?wp.element.createElement("input",{type:"color",value:c.value,onChange:function(t){e.update(on(on({},c),{},{value:t.target.value})),r(!0)}}):wp.element.createElement("span",{className:"vibebp_color_field",style:{background:c.value},ref:function(t){if(!p){var n=new Picker(t);n.onChange=function(n){t.style.background=n.rgbaString,console.log("change detected"),e.hasOwnProperty("update")&&e.update(on(on({},c),{},{value:n.rgbaString})),s(on(on({},c),{},{value:n.rgbaString})),r(!0)},d(n)}}})):"location"===c.type?wp.element.createElement(re,tn({field:c},e)):"social"===c.type?wp.element.createElement(P,tn({field:c},e)):"repeatable"===c.type?wp.element.createElement(q,tn({field:c},e)):"upload"===c.type?wp.element.createElement(Pe,tn({field:c},e)):"video"===c.type?wp.element.createElement(at,tn({field:c},e)):"gallery"===c.type?wp.element.createElement(ht,tn({field:c},e)):"table"===c.type?wp.element.createElement(Ht,tn({field:c},e)):"checkbox_acceptance"===c.type?wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{type:"checkbox",id:c.id,value:c.id,onChange:function(e){c.value&&c.value===c.id?s(on(on({},c),{},{value:null})):s(on(on({},c),{},{value:e.target.value})),r(!0)}}),wp.element.createElement("label",{for:c.id},wp.element.createElement("strong",{dangerouslySetInnerHTML:{__html:c.name}}))):"":"")};function _n(e){return function(e){if(Array.isArray(e))return jn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||On(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function En(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||On(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function On(e,t){if(e){if("string"==typeof e)return jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jn(e,t):void 0}}function jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Sn=wp.element,Nn=(Sn.createElement,Sn.useState),kn=Sn.useEffect,Pn=Sn.Fragment,xn=(Sn.render,wp.data),An=(xn.dispatch,xn.select),In=function(e){var t=En(Nn(!1),2),n=t[0],r=t[1],a=En(Nn(!1),2),i=a[0],o=a[1],l=En(Nn([]),2),c=l[0],s=l[1],u=En(Nn({complete:0,total:0,total_field_count:1}),2),m=u[0],d=u[1],f=En(Nn(100),2),b=f[0],v=f[1];An("vibebp").getUser();kn((function(){fetch("".concat(window.vibebp.api.url,"/getProfileCompleteness?nocache"),{method:"post",body:JSON.stringify({token:An("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&(v(e.completeness),e.fields&&e.fields.length&&(s(e.fields),d({complete:0,total:e.fields.length,total_field_count:e.total_field_count}),o(e.fields[0].id)))}))}),[]);return wp.element.createElement(Pn,null,b<100?wp.element.createElement("div",{className:n?"active completeProgress":"completeProgress tip bottom",onClick:function(e){r(!0),e.stopPropagation()},title:window.vibebp.translations.complete_profile+" "+b+"%"},wp.element.createElement(p,{progress:b,size:e.size?e.size:"us"})):"",n?wp.element.createElement("div",{className:"profile_completeness_wrapper"},wp.element.createElement("span",{onClick:function(){return r(!1)}}),wp.element.createElement("div",{className:"profile_completeness"},wp.element.createElement("div",{className:"profile_completeness_heading"},wp.element.createElement("h2",null,window.vibebp.translations.complete_your_profile," ",wp.element.createElement("span",null,m.complete+"/"+m.total)),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){return r(!1)}})),wp.element.createElement("div",{className:"profile_completeness_content"},c.map((function(e,t){if(e.id==i)return wp.element.createElement("div",{className:"profile_field"},wp.element.createElement(hn,{field:e,update:function(e){return function(e,t){var n=_n(c);n[t]=e,s(n);var r=b+Math.round(100/m.total_field_count,2);r>100&&(r=100),v(r),d({complete:parseInt(m.complete)+1,total:m.total})}(e,t)}}))}))),wp.element.createElement("div",{className:"xprofile_pagination"},i&&c.findIndex((function(e){return e.id==i}))>0?wp.element.createElement("span",{className:"prev_next",onClick:function(e){o(c[c.findIndex((function(e){return e.id==i}))-1].id),e.stopPropagation()}},wp.element.createElement("span",{className:"vicon vicon-arrow-left"})):wp.element.createElement("span",null),i&&c.findIndex((function(e){return e.id==i}))<c.length-1?wp.element.createElement("span",{className:"prev_next",onClick:function(e){o(c[c.findIndex((function(e){return e.id==i}))+1].id),e.stopPropagation()}},wp.element.createElement("span",{className:"vicon vicon-arrow-right"})):wp.element.createElement("span",null)))):"")},Cn=(0,wp.element.createContext)({});function Tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(n),!0).forEach((function(t){Mn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Un=wp.element,Rn=(Un.createElement,Un.useState),Fn=Un.useEffect,Hn=Un.Fragment,qn=(Un.render,wp.data),$n=qn.dispatch,zn=qn.select,Bn=function(e){var t=Ln(Rn({}),2),n=t[0],r=t[1];return Fn((function(){var t="",n="";switch(e.type){case"friends":n="user",t=e.id.item_id;break;case"forum":n="forum",t=e.id.item_id;break;case"group":n="group",t=e.id.item_id;break;case"activity":n="user",t=e.id.secondary_item_id;break;case"member":case"name":case"user_tip":case"user":n="user",t=e.id.user_id;break;default:n=e.type,t=e.id.item_id}n||(n="user");var a=zn("vibebp").getData(n+"_"+t);a?r(a):localforage.getItem(n+"_"+t).then((function(a){null!==a?(r(JSON.parse(a)),$n("vibebp").setData(n+"_"+t,JSON.parse(a))):fetch("".concat(window.vibebp.api.url,"/avatar?id=").concat(n+"_"+t,"&client_id=").concat(window.vibebp.settings.client_id),{method:"post",body:JSON.stringify({type:e.type,ids:e.id,token:zn("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("avatar")&&($n("vibebp").setData(n+"_"+t,e),localforage.setItem(n+"_"+t,JSON.stringify(e)),r(e))}))}))}),[e.id.item_id,e.id.user_id]),n.hasOwnProperty("avatar")||n.hasOwnProperty("name")?"member"==e.type?wp.element.createElement("span",{className:"vibebp_member"},wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name}),wp.element.createElement("span",null,n.name)):"group"==e.type?wp.element.createElement("span",{className:"vibebp_group"},wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name}),wp.element.createElement("span",null,n.name)):"user_tip"==e.type?wp.element.createElement("span",{className:"vibebp_member tip",title:n.name},wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name})):"name"==e.type||"forum"==e.type?wp.element.createElement("span",null,n.name):wp.element.createElement("img",{src:n.avatar,className:"vibebp_avatar",onClick:e.click,alt:n.name,title:n.name}):""},Wn=function(e){var t=Ln(Rn(!0),2),n=t[0],r=t[1],a=Ln(Rn(null),2),i=a[0],o=a[1];return Fn((function(){r(!0);var t=[];i&&i.abort();var n={},a=new AbortController;i&&(n={signal:a.signal}),o(a),e.hasOwnProperty("avatars")&&(t=e.avatars);var l="user";if(e.hasOwnProperty("type")&&(l=e.type),e.hasOwnProperty("user_ids")){var c=e.user_ids;Array.isArray(e.user_ids)||(c=Object.values(e.user_ids)),c.map((function(e){Array.isArray(e)?e.map((function(e){-1==t.findIndex((function(t){return t.id.user_id==e}))&&t.push({type:l,id:{user_id:e}})})):-1==t.findIndex((function(t){return t.id.user_id==e}))&&t.push({type:l,id:{user_id:e}})}))}var s=[],u=[];t.map((function(e,t){var n="",r="";switch(e.type){case"friends":r="user",n=e.id.item_id;break;case"forum":r="forum",n=e.id.item_id;break;case"group":r="group",n=e.id.item_id;break;case"activity":r="user",n=e.id.secondary_item_id;break;case"member":case"name":case"user_tip":case"user":r="user",n=e.id.user_id;break;default:r=e.type,n=e.id.item_id}var a=zn("vibebp").getData(r+"_"+n);a&&void 0!==a||u.push(localforage.getItem(r+"_"+n).then((function(e){e?$n("vibebp").setData(r+"_"+n,JSON.parse(e)):s.push({type:r,key:n})})))})),u.length?Promise.all(u).then((function(){s.length?fetch("".concat(window.vibebp.api.url,"/avatars?ids=").concat(JSON.stringify(s),"&client_id=").concat(window.vibebp.settings.client_id),Dn(Dn({},n),{},{method:"post",body:JSON.stringify({ids:s,type:l,token:zn("vibebp").getToken()})})).then((function(e){return e.json()})).then((function(e){var t=[];e.status&&e.values.map((function(e){$n("vibebp").setData(e.type+"_"+e.key,e.value),t.push(localforage.setItem(e.type+"_"+e.key,JSON.stringify(e.value)))})),t.length?Promise.all(t).then((function(){r(!1)})):r(!1)})):r(!1)})):r(!1)}),[e.user_ids,e.type]),wp.element.createElement(Hn,null,n?"":e.children)};function Vn(e){return function(e){if(Array.isArray(e))return Kn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Zn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Zn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zn(e,t){if(e){if("string"==typeof e)return Kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kn(e,t):void 0}}function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xn=wp.element,Yn=(Xn.createElement,Xn.useState),Qn=Xn.useEffect,er=Xn.Fragment,tr=(Xn.render,Xn.useContext),nr=wp.data,rr=nr.dispatch,ar=nr.select,ir=function(e){var t=tr(Cn),n=Gn(Yn([]),2),r=n[0],a=n[1],i=Gn(Yn(""),2),o=i[0],l=i[1],c=Gn(Yn(""),2),s=(c[0],c[1],Gn(Yn(ar("vibebp").getToken()),2)),u=s[0],m=s[1],p=Gn(Yn(!0),2),d=p[0],f=p[1],b=Gn(Yn(!1),2),v=b[0],w=b[1],y=Gn(Yn(!1),2),g=y[0],h=y[1],_=Gn(Yn([]),2),E=_[0],O=_[1],j=Gn(Yn({}),2),S=j[0];j[1];Qn((function(){d||-1!=document.querySelector("body").classList.contains("dark_vibebp")?(localStorage.setItem("is_dark",0),document.querySelector("body").classList.remove("dark_vibebp")):(localStorage.setItem("is_dark",1),document.querySelector("body").classList.add("dark_vibebp"))}),[d]),Qn((function(){var e=localStorage.getItem("is_dark");f(e)}),[]),Qn((function(){window.vibebp.expanded_menu&&window.innerWidth>768&&w(!0),window.addEventListener("resize",(function(){window.innerWidth>768&&w(!0)})),window.vibebp.dark_mode&&(f(!1),t.update("dark",!0));var e=setTimeout((function(){O(ar("vibebp").getData("loggedinMenu"))}),500);return function(){clearTimeout(e)}}),[]),Qn((function(){window.vibebp.expanded_menu&&window.innerWidth>768&&w(!0)}),[v]),Qn((function(){document.addEventListener("userLoaded",(function(){u||m(ar("vibebp").getToken())})),u&&(fetch("".concat(window.vibebp.api.url,"/profilemenu"),{method:"post",body:JSON.stringify({token:u})}).then((function(e){return e.json()})).then((function(e){var t;e.status&&(-1==window.location.href.indexOf("component=")&&(e.menu[0].classes.push("is_active"),l(e.menu[0].css_id)),a(e.menu),rr("vibebp").setMenu(e.bpmenu)),e.hasOwnProperty("code")&&401==(null===(t=e.data)||void 0===t?void 0:t.status)&&document.dispatchEvent(new Event("vibebp_logout"))})),document.addEventListener("component_loaded",(function(e){l(e.detail.component)})))}),[u]);var N=function(){fetch("".concat(window.vibebp.api.url,"/profilemenu?force"),{method:"post",body:JSON.stringify({token:u})}).then((function(e){return e.json()})).then((function(e){e.status&&(window.vibebp.components.default_component&&e.menu.map((function(t,n){t.css_id===window.vibebp.components.default_component&&e.menu[n].classes.push("is_active")})),a(e.menu),rr("vibebp").setMenu(e.bpmenu))}))};Qn((function(){var e=window.location.href.split("#");if(e.length>1){var t=e[1].split("&"),n=[];t.map((function(e,t){"component"===(n=e.split("="))[0]&&"settings"==n[1]&&document.addEventListener("vibebp_component_reload",N)}))}return function(){document.removeEventListener("vibebp_component_reload",N)}}),[]),Qn((function(){if(r.length){if(!o){var e=r[0].css_id;"xprofile"===e&&(e="profile"),l(e)}if(-1!==window.location.href.indexOf("#")){var t=window.location.href.split("#");if(t.length>1){var n=t[1].split("&"),a=[];n.map((function(e,t){"component"===(a=e.split("="))[0]&&(ar("vibebp").getComponent()||(r.map((function(e,t){e.css_id==a[1]&&P(t)})),rr("vibebp").setComponent(a[1])))}))}}}}),[r]);var k=function(e){e.hasOwnProperty("css_id")?(rr("vibebp").setComponent(e.css_id),rr("vibebp").setAction(!1),rr("vibebp").setId(!1)):rr("vibebp").setComponent(e.type+"__"+e.object+"__"+e.object_id)};Qn((function(){o&&(rr("vibebp").setComponent(o),localforage.createInstance({name:"vibebp_last_requests"}).clear())}),[o]);var P=function(e){var t=Vn(r);t.map((function(e){e.classes.indexOf("is_active")>-1&&e.classes.splice(e.classes.indexOf("is_active"),1)})),t[e].classes.push("is_active"),a(t)},x=function(){ar("vibebp").logout(),w(!1),document.querySelector("body").classList.add("vibebp_logout");var e=new CustomEvent("userLoaded",{detail:{userLoaded:!0}});document.dispatchEvent(e)},A="profile_menu";v&&"slick"!==window.vibebp.settings.customizer.theme&&"simple"!==window.vibebp.settings.customizer.theme&&(A+=" active"),g&&(A+=" show_loggedin_menu");var I=function(e){return window.vibebp.settings.customizer.theme==e};return wp.element.createElement("div",{className:A,onMouseEnter:function(){window.vibebp.expanded_menu||"slick"==window.vibebp.settings.customizer.theme||w(!0)},onMouseLeave:function(){window.vibebp.expanded_menu||"slick"==window.vibebp.settings.customizer.theme||w(!1)}},window.vibebp.settings.customizer.profile_menu_promo&&window.vibebp.settings.customizer.profile_menu_promo.length?wp.element.createElement("div",{className:"site_logo"},wp.element.createElement("img",{src:window.vibebp.settings.customizer.profile_menu_promo,style:S})):"",wp.element.createElement("div",{className:"menu_items"},Array.isArray(r)&&r.length?r.map((function(e,t){if(e.menu_item_parent=parseInt(e.menu_item_parent),!e.menu_item_parent){"xprofile"===e.css_id&&(e.css_id="profile");var n=r.filter((function(t){return t.menu_item_parent===e.ID}));n.length&&-1===e.classes.indexOf("hasChildren")&&e.classes.push("hasChildren");return/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e.icon)&&(e.icon=atob(e.icon)),wp.element.createElement("div",{id:e.css_id,className:e.classes.join(" ")},wp.element.createElement("span",{className:"menu_item_"+e.css_id},e.classes.indexOf("external_new_tab_link")>-1?wp.element.createElement("span",{onClick:function(){window.open(e.url,"_blank").focus()}},wp.element.createElement("span",{className:"vicon vicon-new-window"}),wp.element.createElement("span",null,e.title)):e.classes.indexOf("external_link")>-1?wp.element.createElement("span",{onClick:function(){window.location.href=e.url}},wp.element.createElement("span",{className:"vicon vicon-new-window"}),wp.element.createElement("span",null,e.title)):wp.element.createElement(er,null,wp.element.createElement("span",{onClick:function(){k(e),w(!1),P(t)}},/svg/.test(e.icon)?wp.element.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:e.icon}}):wp.element.createElement("span",{className:"icon "+e.icon}),wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.title}})),n.length?wp.element.createElement("span",{class:"vicon vicon-angle-right",onClick:function(){var e=Vn(r);-1==e[t].classes.indexOf("open")?e[t].classes.push("open"):e[t].classes.splice(e[t].classes.indexOf("open"),1),a(e)}}):"")),n.length?wp.element.createElement("div",{className:"sub_nav_items"},n.map((function(e){return wp.element.createElement("div",{onClick:function(){k(e),w(!1),P(t)},className:e.classes.join(" ")},/svg/.test(e.icon)?wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.icon}}):wp.element.createElement("span",{className:e.icon}),wp.element.createElement("span",null,e.title))}))):"")}})):""),I("slick")||I("simple")?"":wp.element.createElement("span",{className:v?"vicon vicon-angle-double-right reversed":"vicon vicon-angle-double-right",onClick:function(){return w(!v)}}),wp.element.createElement("div",{className:"menu_bottom"},I("slick")?"":wp.element.createElement(er,null,d?wp.element.createElement("div",{className:"menu_item",onClick:function(){f(!1),t.update("dark",!0),w(!v)}},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:window.vibebp.icons.dark_mode}}),wp.element.createElement("span",null,window.vibebp.translations.dark_mode)):wp.element.createElement("div",{className:"menu_item",onClick:function(){f(!0),t.update("dark",!1)}},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:window.vibebp.icons.light_mode}}),wp.element.createElement("span",null,window.vibebp.translations.light_mode))),I("slick")?wp.element.createElement("div",{className:"menu_item",onClick:function(){k({css_id:"settings"}),w(!1),P("settings")}},wp.element.createElement("span",null,wp.element.createElement("span",{className:"icon"},wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",enableBackground:"new 0 0 64 64",version:"1.1",viewBox:"0 0 64 64",xmlSpace:"preserve"}," ",wp.element.createElement("path",{d:"M32.1 19.7c-6.8 0-12.3 5.5-12.3 12.3 0 6.8 5.5 12.3 12.3 12.3 6.8 0 12.3-5.5 12.3-12.3-.1-6.7-5.6-12.3-12.3-12.3zm0 21.1c-4.8 0-8.8-3.9-8.8-8.8s3.9-8.8 8.8-8.8 8.8 3.9 8.8 8.8c-.1 4.9-4 8.8-8.8 8.8z"})," ",wp.element.createElement("path",{d:"M61.5 38.9l-6.2-3.4c.2-1.3.3-2.5.3-3.7 0-1.4-.1-2.6-.3-3.8l6.3-3.5c1.1-.6 1.5-1.9 1-3.1l-6-10.1c-.6-1-1.9-1.4-3.1-1L47 13.9c-.4-.3-.8-.7-1.2-1-1.1-1-2.2-1.9-3.7-2.6-.3-.1-.5-.5-.5-.8V5.6c0-2.4-2-4.4-4.4-4.4H26.8c-2.4 0-4.4 2-4.4 4.4v4c0 .3-.2.6-.5.8-1.5.7-2.6 1.6-3.8 2.7-.3.3-.7.6-1.1.9l-5.8-3.3c-1.9-1-3.2-.3-3.8.7l-5.7 9.8c-.3.6-.4 1.3-.2 1.9.2.6.6 1.2 1.2 1.5l6.2 3.5c-.2 1.1-.3 2.3-.3 3.7 0 1.3.1 2.5.2 3.7L2.4 39c-1.1.6-1.5 1.9-1 3.1l5.9 10.1c.6 1 1.9 1.4 3.1 1l6.5-3.6c.4.3.8.6 1.1.9 1.2 1 2.2 1.9 3.8 2.6.3.1.5.5.5.8v4.4c0 2.4 2 4.4 4.4 4.4h10.5c2.4 0 4.4-2 4.4-4.4v-4.6c0-.3.2-.6.5-.8 1.5-.7 2.5-1.6 3.7-2.6.4-.3.7-.6 1.1-1l5.8 3.3c1.9 1 3.2.3 3.7-.6l5.8-9.8c.3-.6.4-1.2.3-1.9 0-.6-.5-1.1-1-1.4zm-7.4 10.5l-5.5-3.1c-1.2-.7-2.7-.5-3.7.3-.5.4-.9.8-1.3 1.1-1.1.9-1.8 1.6-2.9 2.1-1.5.7-2.5 2.3-2.5 3.9v4.6c0 .5-.4.9-.9.9H26.8c-.5 0-.9-.4-.9-.9v-4.4c0-1.7-1-3.2-2.5-3.9-1.1-.5-2-1.2-3-2.1-.4-.3-.8-.7-1.3-1.1-.6-.5-1.4-.8-2.1-.8-.6 0-1.1.1-1.6.4l-5.5 3.1-4.7-8 5.3-3c1.3-.7 1.9-2.1 1.8-3.5-.1-1-.2-2.1-.2-3.2 0-1.2.1-2.2.2-3.1.3-1.5-.4-3-1.7-3.7l-5.3-2.9 4.7-8 5.5 3.1c1.2.7 2.7.5 3.7-.3.4-.4.8-.7 1.2-1 1.1-.9 1.9-1.6 3-2.2 1.5-.7 2.5-2.3 2.5-3.9v-4c0-.5.4-.9.9-.9h10.5c.5 0 .9.4.9.9v3.9c0 1.7 1 3.2 2.5 3.9 1.1.5 1.9 1.2 2.9 2.1.4.4.9.7 1.4 1.1 1 .8 2.5 1 3.7.3l5.5-3.1 4.7 8-5.3 2.9c-1.3.7-2 2.2-1.7 3.7.2.9.2 2 .2 3.1 0 1-.1 2.1-.3 3.2-.3 1.5.5 3 1.8 3.7l5.2 2.8-4.7 8z"})," "))),wp.element.createElement("span",null,window.vibebp.translations.settings)):"",I("slick")?wp.element.createElement("div",{className:"menu_item"},wp.element.createElement("span",{className:"vibebp_current_user",onClick:function(){return h(!g)}},v?wp.element.createElement(Wn,{user_ids:[ar("vibebp").getUser().id],type:"member"},wp.element.createElement(Bn,{type:"member",id:{user_id:ar("vibebp").getUser().id}})):wp.element.createElement(Bn,{type:"user",id:{user_id:ar("vibebp").getUser().id}})),g?wp.element.createElement("div",{className:"vibebp_member_menu"},wp.element.createElement("div",{className:"vibebp_member_card_wrapper"},wp.element.createElement(Bn,{type:"user",id:{user_id:ar("vibebp").getUser().id}}),wp.element.createElement("div",{className:"member_menu_buttons"},wp.element.createElement(Wn,{user_ids:[ar("vibebp").getUser().id],type:"name"},wp.element.createElement(Bn,{type:"name",id:{user_id:ar("vibebp").getUser().id}})),wp.element.createElement(In,{size:"md"}))),wp.element.createElement("div",{className:"vibebp_loggedin_menu_wrapper"},wp.element.createElement("div",{className:"vibebp_loggedin_usermenu_content"},E.length?E.map((function(e){return wp.element.createElement("span",{className:e.classes.join(" "),onClick:function(){return function(e){h(!1),e.classes.indexOf("bp-menu")>-1?(l(e.css_id),rr("vibebp").setComponent(e.css_id)):window.location.href=e.url}(e)},dangerouslySetInnerHTML:{__html:e.title}})})):"")),wp.element.createElement("button",{className:"button is-primary",onClick:x},wp.element.createElement("i",{className:"icon",dangerouslySetInnerHTML:{__html:window.vibebp.icons.logout}}),wp.element.createElement("span",null,window.vibebp.translations.logout))):""):wp.element.createElement("div",{className:"menu_item",onClick:x},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:window.vibebp.icons.logout}}),wp.element.createElement("span",null,window.vibebp.translations.logout))))};function or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?or(Object(n),!0).forEach((function(t){cr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sr(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function ur(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pr=wp.element,dr=(pr.createElement,pr.useState),fr=pr.useEffect,br=pr.Fragment,vr=(pr.render,pr.useContext,wp.data),wr=(vr.dispatch,vr.select),yr=function(e){var t=ur(dr(!1),2),n=t[0],r=t[1],a=ur(dr(""),2),i=a[0],o=a[1],l=ur(dr([]),2),c=l[0],s=l[1],u=ur(dr({}),2),m=u[0],p=u[1],d=ur(dr(""),2),f=d[0],b=d[1];fr((function(){o(e.move)}),[e.move]);var v=function(e){return new Promise((function(t){return setTimeout((function(){t()}),e)}))};return fr((function(){var t;e.widget.hasOwnProperty("id_base")&&(e.widget.id_base||e.widget.hasOwnProperty("style"))?(t=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.widget.hasOwnProperty("style")&&void 0!==e.widget.style&&e.widget.style&&e.widget.style.hasOwnProperty("width_class")&&void 0!==e.widget.style.width_class&&e.widget.style.width_class||e.update("defaultWidth",lr(lr({},e.widget),{},{link:e.widget.link}),e.all_widgets),t.next=3,v(200);case 3:b(e.widget.id_base),s(lr({},e.widget)),n=new CustomEvent(e.widget.id_base,{detail:{widget:e.widget}}),document.dispatchEvent(n),e.setloading(!1);case 8:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(e){sr(i,r,a,o,l,"next",e)}function l(e){sr(i,r,a,o,l,"throw",e)}o(void 0)}))})():e.widget.link&&(r(!0),e.setloading(!0),fetch("".concat(e.widget.link),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:wr("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){if(r(!1),t.status)if(window.vibebp.components.dashboard.widgets.indexOf(t.widget.id_base)>-1){b(t.widget.id_base),s(lr(lr({},t.widget),{},{link:e.widget.link})),e.widget.hasOwnProperty("style")&&void 0!==e.widget.style&&e.widget.style&&e.widget.style.hasOwnProperty("width_class")&&void 0!==e.widget.style.width_class&&e.widget.style.width_class||e.update("defaultWidth",lr(lr({},t.widget),{},{link:e.widget.link}),e.all_widgets);var n=new CustomEvent(t.widget.id_base,{detail:{widget:t.widget}});document.dispatchEvent(n),e.setloading(!1)}else t.widget.hasOwnProperty("html")&&s(t.widget)})))}),[e.widget.link]),fr((function(){p(e.widget)}),[e.widget]),wp.element.createElement("div",{className:"dashboard_widget dash_"+f},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(br,null,wp.element.createElement("div",{className:"dashboard_widget_header"},wp.element.createElement("span",{className:i?"vicon vicon-pin-alt":"vicon vicon-pin2",onClick:function(){return e.update("move",c,e.all_widgets)}}),wp.element.createElement("span",null,i?wp.element.createElement(br,null,m.hasOwnProperty("style")&&m.style.column>1?wp.element.createElement("span",{className:"vicon vicon-arrow-left",onClick:function(){return e.update("column_minus",c,e.all_widgets)}}):"",wp.element.createElement("span",{className:"vicon vicon-arrow-right",onClick:function(){return e.update("column",c,e.all_widgets)}}),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){return e.update("remove",c,e.all_widgets)}})):"")),c.hasOwnProperty("html")?wp.element.createElement("div",{className:c.id_base+" "+c.id,dangerouslySetInnerHTML:{__html:c.html}}):f?wp.element.createElement("div",{className:f+" "+c.id}):""))};function gr(e){return function(e){if(Array.isArray(e))return Sr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||jr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hr(Object(n),!0).forEach((function(t){Er(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Er(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||jr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(e,t){if(e){if("string"==typeof e)return Sr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sr(e,t):void 0}}function Sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Nr=wp.element,kr=(Nr.createElement,Nr.useState),Pr=Nr.useEffect,xr=(Nr.useContext,Nr.Fragment),Ar=(Nr.render,wp.data),Ir=Ar.dispatch,Cr=Ar.select,Tr=function(e){var t=Or(kr([]),2),n=t[0],r=t[1],a=Or(kr(!1),2),i=a[0],o=a[1],l=Or(kr(!1),2),c=l[0],s=l[1],u=Or(kr(!0),2),m=(u[0],u[1]),p=Or(kr([]),2),d=p[0],f=p[1],b=Or(kr(null),2),v=b[0],w=(b[1],Or(kr([]),2)),y=(w[0],w[1],Or(kr(e.isCustomized),2)),g=y[0],h=y[1],_=Or(kr([]),2),E=_[0];_[1];Pr((function(){r(e.widgets)}),[e.widgets]),Pr((function(){var t=[];E&&E.length&&(E.map((function(e){var r=n.findIndex((function(t){return t.key==e.item.getAttribute("data-widget-key")||t==e.item.getAttribute("data-widget-key")}));r>-1&&t.push(n[r])})),e.update(t),r(t))}),[E]);return wp.element.createElement(xr,null,n&&n.length?wp.element.createElement(xr,null,g&&i?wp.element.createElement("div",{className:"",style:{width:"100%",display:"flex","justify-content":"center","align-items":"center"}},wp.element.createElement("a",{className:c?"button is-primary is-loading":"button is-primary",onClick:function(){s(!0),fetch("".concat(window.vibebp.api.url,"/save_sidebar?post"),{method:"post",body:JSON.stringify({widgets:null,sidebar_id:window.vibebp.components.dashboard.sidebar,token:Cr("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){if(t.status){Ir("vibebp").addNotification({text:t.message}),h(!1),e.reset(),v&&v.shiftLayout();var n="".concat(window.vibebp.api.url,"/sidebar/").concat(window.vibebp.components.dashboard.sidebar);localforage.removeItem(n)}s(!1)}))}},window.vibebp.translations.reset_to_default)):"",wp.element.createElement("div",{className:i?"dashboard dragactive":"dashboard"},n.map((function(t,a){var l={link:""};return"string"==typeof t?l.link=t:t&&(t.hasOwnProperty("style")||t.hasOwnProperty("id_base"))&&(l=t),wp.element.createElement("div",{className:t.hasOwnProperty("style")&&t.style.hasOwnProperty("width_class")&&void 0!==t.style.width_class&&t.style.width_class&&t.style.width_class.length?"dashboard_widget_wrapper "+t.style.width_class:"dashboard_widget_wrapper col-md-4",ref:function(e){if(e&&!d[a]){var t=gr(d);t[a]=e,f(t)}},"data-widget-id":void 0===t.id?t:t.id,"data-widget-key":void 0===t.key?t:t.key,key:a,style:{}},wp.element.createElement(yr,{widget:l,move:i,update:function(t,n,l){!function(t,n,a,l){if("move"==t&&o(!i),"remove"==t&&(l.splice(n,1),e.add({link:a.link,name:a.name,style:{row:1,column:1}})),"column"==t){if(!a.hasOwnProperty("options"))return;if("string"==typeof l[n]){var c=window.vibebp.settings.widget_classes.findIndex((function(e){return e===(a.options.hasOwnProperty("width")?a.options.width:"col-md-6")}));-1==c&&(c=1),l[n]=_r(_r({},a),{},{link:l[n]}),l[n].style={row:1,column:1},l[n].style.column++,c>=0&&void 0!==window.vibebp.settings.widget_classes[c+1]&&(l[n].style.width_class=window.vibebp.settings.widget_classes[c+1])}else{var s=window.vibebp.settings.widget_classes.findIndex((function(e){return e===l[n].style.width_class}));l[n].style.column++,s>=0&&void 0!==window.vibebp.settings.widget_classes[s+1]&&(l[n].style.width_class=window.vibebp.settings.widget_classes[s+1])}}if("column_minus"==t){var u=window.vibebp.settings.widget_classes.findIndex((function(e){return e===l[n].style.width_class}));u>=0&&(l[n].style.width_class=window.vibebp.settings.widget_classes[u-1]),l[n].style.column--}if("row"==t&&("string"==typeof l[n]?(l[n]=_r(_r({},a),{},{link:l[n]}),l[n].style={row:1,column:1},l[n].style.row++):l[n].style.row++,v.shiftLayout()),"row_minus"==t&&l[n].style.row--,"defaultWidth"==t){if(!a.hasOwnProperty("options"))return;var m=_r(_r({},a),{},{id:a.id_base,name:a.name,description:a.description,link:a.link,style:{row:5,column:1,width_class:a.options.hasOwnProperty("width")?a.options.width:"col-md-6"}});a.options.hasOwnProperty("width")&&a.options.width&&(a.options.width.indexOf("col-md-6")>-1&&(m.style={row:10,column:2}),a.options.width.indexOf("col-md-8")>-1&&(m.style.column=3,m.style.row=10),a.options.width.indexOf("col-md-12")>-1&&(m.style.column=4,m.style.row=10),m.style.width_class=a.options.width),l.splice(n,1,m),r(gr(l)),e.update(gr(l),!0)}"defaultWidth"!==t&&"move"!==t&&(h(!0),l.length&&(r(gr(l)),e.update(gr(l))))}(t,a,n,l)},all_widgets:n,setloading:function(e){m(e)}}))})))):"")};function Dr(e){return function(e){if(Array.isArray(e))return Jr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Lr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Lr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lr(e,t){if(e){if("string"==typeof e)return Jr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jr(e,t):void 0}}function Jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}"undefined"!=typeof Packery&&(Packery.prototype.unbindDraggabillyEvents=function(e){e.off("dragStart",this.handleDraggabilly.dragStart),e.off("dragMove",this.handleDraggabilly.dragMove),e.off("dragEnd",this.handleDraggabilly.dragEnd)});var Ur=wp.element,Rr=(Ur.createElement,Ur.useState),Fr=Ur.useEffect,Hr=(Ur.useContext,Ur.Fragment),qr=(Ur.render,wp.data),$r=qr.dispatch,zr=qr.select,Br=function(e){var t=Mr(Rr(!1),2),n=t[0],r=t[1],a=Mr(Rr([]),2),i=a[0],o=a[1],l=Mr(Rr(""),2),c=l[0],s=l[1],u=Mr(Rr(!1),2),m=u[0],p=u[1],d=Mr(Rr([]),2),f=d[0],b=d[1],v=Mr(Rr(!1),2),w=v[0],y=v[1];Fr((function(){document.querySelector("body").classList.value.indexOf("withsidebar")>-1&&document.querySelector("body").classList.remove("withsidebar");var e=!0,t=window.location.href.split("#");if(t.length>1){var n=t[1].split("&"),r=[];n.map((function(t,n){"component"===(r=t.split("="))[0]&&"dashboard"!=r[1]&&(e=!1)}))}return e&&g(),document.addEventListener("vibebp_component_reload",g),function(){document.removeEventListener("vibebp_component_reload",g)}}),[]);var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(!0);var t="".concat(window.vibebp.api.url,"/sidebar/").concat(window.vibebp.components.dashboard.sidebar);!0===e&&(t+="?force"),fetch(t,{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:zr("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&(o(e.widgets),e.unusedwidgets&&b(e.unusedwidgets),e.hasOwnProperty("customized")&&y(!0)),r(!1)}))};return wp.element.createElement(Hr,null,wp.element.createElement("div",{className:"dashboard-wrapper"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):i&&i.length?wp.element.createElement(Hr,null,wp.element.createElement(Tr,{widgets:i,add:function(e){var t=Dr(f);t.push(e),b(t)},update:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t?o(e):fetch("".concat(window.vibebp.api.url,"/save_sidebar?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({widgets:e,sidebar_id:window.vibebp.components.dashboard.sidebar,token:zr("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){if(e.status){$r("vibebp").addNotification({text:e.message});var t="".concat(window.vibebp.api.url,"/sidebar/").concat(window.vibebp.components.dashboard.sidebar);localforage.removeItem(t)}}))},reset:function(){g(!0)},isCustomized:w}),f.length?wp.element.createElement("span",{className:"widget_move_spot"},m?wp.element.createElement("span",null,wp.element.createElement("select",{onChange:function(e){var t=Dr(i),n=Dr(f);t.push(e.target.value),o(t),n.splice(n.findIndex((function(t){return t.link==e.target.value})),1),b(n),s(""),p(!1)},value:c},wp.element.createElement("option",null,window.vibebp.translations.select_widget),f.map((function(e){return wp.element.createElement("option",{value:e.link},e.name)}))),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){p(!1)}})):wp.element.createElement("span",{className:"vicon vicon-plus",onClick:function(){p(!0)}})):""):wp.element.createElement("div",{className:"vibebp_message"},window.vibebp.translations.empty_dashboard)))};function Wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(n),!0).forEach((function(t){Gr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xr=wp.element,Yr=(Xr.createElement,Xr.useState),Qr=Xr.useEffect,ea=Xr.useRef,ta=Xr.Fragment,na=(Xr.render,wp.data),ra=(na.dispatch,na.select,Math.round(100*Math.random())),aa=function(e){var t=ea(null),n=React.createRef(),r=Zr(Yr(!0),2),a=r[0],i=r[1],o=Zr(Yr(!1),2),l=o[0],c=o[1],s=Zr(Yr(!1),2),u=s[0],m=s[1],p=Zr(Yr(""),2),d=p[0],f=p[1],b=Zr(Yr(""),2),v=b[0],w=b[1],y=Zr(Yr(""),2),g=(y[0],y[1]),h=Zr(Yr(""),2),_=h[0],E=h[1],O=Zr(Yr({x:0,y:0,width:0,height:0,type:"image"}),2),j=O[0],S=O[1],N=Zr(Yr(window.vibebp.translations.select_image),2),k=N[0],P=N[1];Qr((function(){e.hasOwnProperty("crop")&&e.crop&&c(!0)}),[]),Qr((function(){e.file&&(f(window.URL.createObjectURL(e.file)),i(!1),E([e.file]))}),[e.file]),Qr((function(){if(u&&l){var t=n.current;new Croppr(t,{aspectRatio:1,returnMode:"raw",maxSize:[460,460,"px"],minSize:[150,150,"px"],onCropEnd:function(t){var n=Vr({},j);n.x=t.x,n.y=t.y,n.height=t.height,n.width=t.width,S(n);var r={x:t.x,y:t.y,width:t.width,height:t.height};e.update(_,r)}})}}),[u]);return wp.element.createElement("div",{className:"uploader"},a?wp.element.createElement("label",{for:"fileupload_"+ra,className:"upload_file"},k,"image"==e.type?wp.element.createElement("input",{id:"fileupload_"+ra,"data-type":e.type,ref:t,type:"file",accept:"image/*",onChange:function(n){t.current.files[0].size<window.vibebp.settings.upload_limit?(f(window.URL.createObjectURL(t.current.files[0])),i(!1),E(t.current.files),e.update(t.current.files,Vr(Vr({},j),{},{key:"image"}))):(P(window.vibebp.translations.image_size_error),setTimeout((function(){P(window.vibebp.translations.select_image)}),3500))}}):"video"==e.type?wp.element.createElement("input",{id:"fileupload_"+ra,"data-type":e.type,ref:t,type:"file",accept:"video/*",onChange:function(n){t.current.files[0].size<window.vibebp.settings.upload_limit?(w(window.URL.createObjectURL(t.current.files[0])),i(!1),E(t.current.files),e.update(t.current.files,Vr(Vr({},j),{},{key:"video"}))):(P(window.vibebp.translations.image_size_error),setTimeout((function(){P(window.vibebp.translations.select_image)}),3500))}}):wp.element.createElement("input",{id:"fileupload_"+ra,"data-type":e.type,ref:t,type:"file",onChange:function(n){t.current.files[0].size<window.vibebp.settings.upload_limit?(g(window.URL.createObjectURL(t.current.files[0])),i(!1),E(t.current.files),e.update(t.current.files,Vr(Vr({},j),{},{key:"attachment"}))):(P(window.vibebp.translations.image_size_error),setTimeout((function(){P(window.vibebp.translations.select_image)}),3500))}})):wp.element.createElement("div",{className:"uploaded_src"},"image"==e.type?wp.element.createElement(ta,null,l?wp.element.createElement(ta,null,wp.element.createElement("div",{className:"uploaded_image"},wp.element.createElement("img",{src:d})),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-pencil",onClick:function(){m(!u)}}),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){c(!1),i(!0),setImgRef(""),f(""),S({x:0,y:0,width:0,height:0})}})),u?wp.element.createElement("div",{className:"cropimage",id:"cropper"},wp.element.createElement("img",{src:d,ref:n})):""):wp.element.createElement("img",{src:d})):"video"==e.type?wp.element.createElement(ta,null,wp.element.createElement("video",{className:"content_to_html_video",ref:function(e){e&&new Plyr(e)}},wp.element.createElement("source",{src:v,type:"video/mp4"}))):wp.element.createElement(ta,null,wp.element.createElement("i",{className:"vicon vicon-clip"}))))},ia=function(e){var t=e.children,n=e.onClose;return e.open?ReactDOM.createPortal(wp.element.createElement("div",{className:"vibe_editor_modal react_portal_modal"},wp.element.createElement("span",{onClick:n}),wp.element.createElement("div",{className:"ve_modal-content"},wp.element.createElement("div",{className:"ve_modal-header"},wp.element.createElement("div",null),wp.element.createElement("span",{className:"vicon vicon-close",onClick:n})),wp.element.createElement("div",{className:"ve_modal-body"},t))),document.body):null};function oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function la(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oa(Object(n),!0).forEach((function(t){ca(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ca(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sa(e){return function(e){if(Array.isArray(e))return pa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ma(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ua(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||ma(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ma(e,t){if(e){if("string"==typeof e)return pa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pa(e,t):void 0}}function pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var da=wp.element,fa=(da.createElement,da.useState),ba=(da.useEffect,da.Fragment,da.render,wp.data),va=(ba.dispatch,ba.select,function(e){var t=ua(fa(!1),2),n=t[0],r=t[1],a=ua(fa(!1),2),i=a[0],o=a[1],l=ua(fa({s:"",page:1}),2),c=l[0],s=l[1],m=ua(fa([]),2),p=m[0],d=m[1],f=ua(fa(0),2),b=f[0],v=f[1];return u((function(){console.log(c),r(!0);var e="".concat(window.vibebp.settings.giphy.endpoints.trending,"?api_key=").concat(window.vibebp.settings.giphy.api_key,"&limit=10&offset=").concat(p.length);c.s.length>2&&(e="".concat(window.vibebp.settings.giphy.endpoints.search,"?api_key=").concat(window.vibebp.settings.giphy.api_key,"&q=").concat(c.s,"&limit=10&offset=").concat(10*(c.page-1))),fetch(e,{method:"get"}).then((function(e){return e.json()})).then((function(e){if(e.data&&e.data.length){r(!1);var t=[];i?t=[].concat(sa(p),sa(e.data)):(d([]),t=e.data),d(t),v(e.pagination.total_count),o(!1)}}))}),500,[c]),wp.element.createElement("div",{className:"gif_wrap"},wp.element.createElement("div",{className:"input_field_wrapper"},wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_gif,onChange:function(e){s(la(la({},c),{},{s:e.target.value,page:1}))}}),wp.element.createElement("span",{className:"vicon vicon-search"})),wp.element.createElement("div",{className:"gif_wrapper"},p.length?p.map((function(t,n){return wp.element.createElement("img",{src:t.images.preview_gif.url,alt:t.title,title:t.title,onClick:function(){e.update("add",t)}})})):""),!n&&b>p.length?wp.element.createElement("a",{className:"link",onClick:function(){o(!0),s(la(la({},c),{},{page:c.page+1}))}},window.vibebp.translations.load_more):wp.element.createElement("div",{class:"lds-ellipsis"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)))});function wa(e){return function(e){if(Array.isArray(e))return Oa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ea(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ya(Object(n),!0).forEach((function(t){ha(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ya(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Ea(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ea(e,t){if(e){if("string"==typeof e)return Oa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oa(e,t):void 0}}function Oa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ja=wp.element,Sa=(ja.createElement,ja.useState),Na=ja.useEffect,ka=ja.Fragment,Pa=(ja.render,wp.data),xa=Pa.dispatch,Aa=Pa.select,Ia=function(e){var t=_a(Sa(!1),2),n=t[0],r=t[1],a=_a(Sa([]),2),i=a[0],o=a[1],l=_a(Sa([]),2),c=l[0],s=l[1],u=_a(Sa(""),2),m=u[0],p=u[1],d=_a(Sa([]),2),f=d[0],b=d[1],v=_a(Sa({content:"",component:"activity",component_id:"",parent_id:"",meta:[]}),2),w=v[0],y=v[1],g=_a(Sa(!1),2),h=g[0],_=g[1];Na((function(){if(e.hasOwnProperty("activity_id")&&y({content:"",component:"activity_comment",component_id:e.comment_id,parent_id:e.activity_id,meta:[]}),e.hasOwnProperty("component")&&"personal"!=e.component){var t=ga(ga({},w),{},{component:e.component,component_id:e.id});e.hasOwnProperty("secondary_item_id")&&(t.secondary_item_id=e.secondary_item_id),y(t)}e.hasOwnProperty("component")&&"personal"==e.component&&y(ga(ga({},w),{},{type:null})),e.hasOwnProperty("component")&&"public"==e.component&&y(ga(ga({},w),{},{type:e.component}))}),[e.component]),Na((function(){w.component.length&&"activity"!==w.component&&"activity_comment"!==w.component&&fetch("".concat(window.vibebp.api.url,"/").concat(w.component,"/user/").concat(Aa("vibebp").getUser().id,"/get_items"),{method:"post",body:JSON.stringify({token:Aa("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&Array.isArray(e[w.component])&&o(e[w.component])}))}),[w.component]);var E=function(e){var t=wa(c);t.push(e),s(t)};return wp.element.createElement("div",{className:"portal activity_post"},wp.element.createElement("div",{className:"portal_body"},wp.element.createElement("textarea",{placeholder:e.hasOwnProperty("is_child")?window.vibebp.translations.add_comment:window.vibebp.translations.whats_new,onChange:function(e){var t=ga({},w);t.content=e.target.value,y(t)},value:w.content})),wp.element.createElement("div",{className:"portal_footer"},e.hasOwnProperty("activity_id")||"personal"!==e.component||e.hasOwnProperty("component")&&"public"==e.component?"":wp.element.createElement("div",{className:"footer_main"},wp.element.createElement("select",{value:w.component,onChange:function(e){var t=ga({},w);t.component=e.target.value,y(t)}},Object.keys(window.vibebp.components.activity.post.components).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.activity.post.components[e])}))),i.length?wp.element.createElement("select",{value:w.component_id,onChange:function(e){var t=ga({},w);t.component_id=e.target.value,y(t)}},wp.element.createElement("option",null,window.vibebp.translations.select_component),i.map((function(e){return wp.element.createElement("option",{value:e.id},e.label)}))):""),wp.element.createElement("div",{className:"footer_links"},f.length?wp.element.createElement("div",{className:"media_wrap"},f.map((function(e,t){return wp.element.createElement("div",{className:"media_file"},wp.element.createElement("span",{className:"viocn vicon-close",onClick:function(){var e=wa(f);e.splice(t,1),b(e)}}),function(e){switch(e.type){case"image":return wp.element.createElement("img",{src:e.url});case"video":return wp.element.createElement("video",{src:e.url})}}(e))}))):"",c.length?c.map((function(e,t){return wp.element.createElement(ka,null,"image"==e?wp.element.createElement("a",{className:"vicon vicon-image upload_type"}):"video"==e?wp.element.createElement("a",{className:"vicon vicon-video-camera upload_type"}):wp.element.createElement("a",{className:"vicon vicon-clip upload_type"}),wp.element.createElement(aa,{file:m[t],type:e,update:function(n,r){var a=wa(m);a[t]=new File([n[0]],n[0].name),p(a),y(ga(ga({},w),{},{meta:[].concat(wa(w.meta),[{key:e,value:t}])}))}}),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){var e=wa(m);e.splice(t,1),p(e);var n=ga({},w),r=n.meta.findIndex((function(e){return e.value===t}));console.log(r),n.meta.splice(r,1),y(n);var a=wa(c);a.splice(t,1),s(a)}}))})):"",wp.element.createElement(ka,null,wp.element.createElement("a",{className:"vicon vicon-clip",onClick:function(){E("attachment")}}),wp.element.createElement("a",{className:"vicon vicon-video-camera",onClick:function(){E("video")}}),wp.element.createElement("a",{className:"vicon vicon-image",onClick:function(){E("image")}}),window.vibebp.settings.giphy.api_key&&window.vibebp.settings.giphy.api_key.length?wp.element.createElement("a",{className:"",onClick:function(){_(!h)}},wp.element.createElement("svg",{width:"15px",height:"15px",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("path",{d:"M2.5 10.5H2V11H2.5V10.5ZM4.5 10.5V11H5V10.5H4.5ZM13.5 3.5H14V3.29289L13.8536 3.14645L13.5 3.5ZM10.5 0.5L10.8536 0.146447L10.7071 0H10.5V0.5ZM2 6V10.5H3V6H2ZM2.5 11H4.5V10H2.5V11ZM5 10.5V8.5H4V10.5H5ZM3 7H5V6H3V7ZM2 5V1.5H1V5H2ZM13 3.5V5H14V3.5H13ZM2.5 1H10.5V0H2.5V1ZM10.1464 0.853553L13.1464 3.85355L13.8536 3.14645L10.8536 0.146447L10.1464 0.853553ZM2 1.5C2 1.22386 2.22386 1 2.5 1V0C1.67157 0 1 0.671573 1 1.5H2ZM1 12V13.5H2V12H1ZM2.5 15H12.5V14H2.5V15ZM14 13.5V12H13V13.5H14ZM12.5 15C13.3284 15 14 14.3284 14 13.5H13C13 13.7761 12.7761 14 12.5 14V15ZM1 13.5C1 14.3284 1.67157 15 2.5 15V14C2.22386 14 2 13.7761 2 13.5H1ZM6 7H9V6H6V7ZM6 11H9V10H6V11ZM7 6.5V10.5H8V6.5H7ZM10.5 7H13V6H10.5V7ZM10 6V11H11V6H10ZM10.5 9H12V8H10.5V9Z",fill:"var(--text)"}))):""),wp.element.createElement("a",{className:n?"button is-primary is-loading":"button is-primary",onClick:function(){if(w.content.length){var t=new FormData,n=ga({},w);e.hasOwnProperty("media")&&void 0!==e.media&&e.media.hasOwnProperty("url")?(n.meta_key=e.media.url,n.component="activity_comment",n.parent_id=e.media.activity.id):Aa("vibebp").getData("wallUserId")&&(n.wallUserId=Aa("vibebp").getData("wallUserId")),w.hasOwnProperty("type")&&"public"===w.type&&!n.wallUserId&&(n.wallUserId=Aa("vibebp").getUser().id),t.append("body",JSON.stringify({args:n,medias:f,token:Aa("vibebp").getToken()})),m.length&&m.map((function(e,n){t.append("files_"+n,e)})),r(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"/add?upload"),{method:"post",body:t}).then((function(e){return e.json()})).then((function(t){t.status&&(console.log(w),e.update(t.activity,"add"),y(ha({component:"activity",component_id:"",parent_id:"",meta:[],content:""},"meta",[])),p([]),r(!1),xa("vibebp").addNotification({text:t.activity.action}))}))}}},e.hasOwnProperty("is_child")?window.vibebp.translations.post:window.vibebp.translations.post_update),e.hasOwnProperty("activity_id")?wp.element.createElement("a",{className:"link",onClick:function(){e.update("","cancel")}},window.vibebp.translations.cancel):"")),wp.element.createElement(ia,{open:h,onClose:function(){return _(!1)}},wp.element.createElement(va,{update:function(e,t){if("add"==e){var n=t.images.original.url,r=wa(f);r.push({type:"image",url:n}),b(r),_(!1)}}})))};function Ca(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ta(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ta(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Da=wp.element,Ma=(Da.createElement,Da.useState),La=Da.useEffect;Da.Fragment,Da.render;function Ja(e){var t=Date.parse(e);return isNaN(t)?"string"==typeof e?Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," ")):e:t}var Ua=function(e){var t=Ca(Ma(""),2),n=(t[0],t[1],Ca(Ma({s:0,m:0,h:0,d:0,w:0,mn:0,y:0}),2)),r=n[0],a=n[1];La((function(){i()}),[e.time]);var i=function(){var t={s:0,m:0,h:0,d:0,mn:0,y:0},n=Math.floor(((new Date).getTime()-Ja(e.time)+6e4*(new Date).getTimezoneOffset())/1e3);n>31536e3&&(t.y=Math.floor(n/31536e3),n-=86400*t.y*365),n>2592e3&&(t.mn=Math.floor(n/2592e3),n-=86400*t.mn*30),n>604800&&(t.w=Math.floor(n/604800),n-=86400*t.w*7),n>86400&&(t.d=Math.floor(n/86400),n-=86400*t.d),n>3600&&(t.h=Math.floor(n/3600),n-=3600*t.h),n>60&&(t.m=Math.floor(n/60),n-=60*t.m),t.s=n,a(t)};return wp.element.createElement("div",{className:"datetime","data-time":r},r.y||r.mn||r.w||r.d||r.h||r.m?"":window.vibebp.translations.justnow,r.y?wp.element.createElement("span",{className:"years"},r.y," ",r.y>1?window.vibebp.translations.years:window.vibebp.translations.year):"",r.mn?wp.element.createElement("span",{className:"months"},r.mn," ",r.mn>1?window.vibebp.translations.months:window.vibebp.translations.month):"",r.w?wp.element.createElement("span",{className:"weeks"},r.w," ",r.w>1?window.vibebp.translations.weeks:window.vibebp.translations.week):"",r.d?wp.element.createElement("span",{className:"days"},r.d," ",r.d>1?window.vibebp.translations.days:window.vibebp.translations.day):"",r.h?wp.element.createElement("span",{className:"hours"},r.h," ",r.h>1?window.vibebp.translations.hours:window.vibebp.translations.hour):"",r.m?wp.element.createElement("span",{className:"minutes"},r.m," ",r.m>1?window.vibebp.translations.minutes:window.vibebp.translations.minute):"")},Ra=function(e){var t=Ca(Ma(e.timestamp),2),n=(t[0],t[1]),r=Ca(Ma(0),2),a=r[0],i=r[1];La((function(){n(e.timestamp),i(Math.floor(Date.now()/1e3)-parseInt(e.timestamp))}),[e.timestamp]);return wp.element.createElement("span",{className:"friendly_time","data-time":Ja(e.time)},function(){var e,t,n,r=0,i=0,o=0,l=[{label:"year",multi:"years",value:94608e4},{label:"month",multi:"months",value:2592e3},{label:"week",multi:"weeks",value:604800},{label:"day",multi:"days",value:86400},{label:"hour",multi:"hours",value:3600},{multi:"minutes",value:60},{label:"second",multi:"seconds",value:1}];if(a<=0)return"expired";for(var c=0;c<l.length;c++)if(i=c,(t=l[c]).value<a){r=Math.floor(a/t.value);break}return e=r+" "+(r>=1?t.multi:t.label),t.value>1&&(n=l[i+1],(o=Math.floor(a%t.value/n.value))&&(e+=", "+o+" "+(o>1?n.multi:n.label))),e}())};function Fa(e){return function(e){if(Array.isArray(e))return $a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||qa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ha(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||qa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qa(e,t){if(e){if("string"==typeof e)return $a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$a(e,t):void 0}}function $a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var za=wp.element,Ba=(za.createElement,za.useState),Wa=za.useEffect,Va=(za.Fragment,za.render,wp.data),Ga=(Va.dispatch,Va.select,function(e){var t=Ha(Ba({}),2),n=t[0],r=t[1],a=Ha(Ba([]),2),i=a[0],o=a[1],l=Ha(Ba([]),2),c=l[0],s=l[1];Wa((function(){r(e.reactions),s("all")}),[e.reactions]),Wa((function(){"all"==c?u():o(n[c])}),[c]);var u=function(){var t=[];Object.keys(e.reactions).map((function(n){t=[].concat(Fa(t),Fa(e.reactions[n]))})),o(t)};return n&&Object.keys(n).length?wp.element.createElement("div",{className:"rec-overviews"},wp.element.createElement("div",{className:"tabs"},wp.element.createElement("div",{className:"tab "+("all"===c?"active":""),onClick:function(){s("all")}},window.vibebp.translations.all),Object.keys(n).map((function(e){return wp.element.createElement("div",{className:"tab "+(c===e?"active":""),onClick:function(){s(e)}},wp.element.createElement("img",{src:window.vibebp.settings.reactions[e].icon}),wp.element.createElement("span",null,n[e].length))}))),i&&i.length?wp.element.createElement("div",{className:"users"},wp.element.createElement(Wn,{user_ids:i},i.map((function(e){return wp.element.createElement(Bn,{type:"member",id:{user_id:e}})})))):""):""});function Za(e){return function(e){if(Array.isArray(e))return ti(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ei(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ka(Object(n),!0).forEach((function(t){Ya(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ka(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ya(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||ei(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ei(e,t){if(e){if("string"==typeof e)return ti(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ti(e,t):void 0}}function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ni=wp.element,ri=(ni.createElement,ni.useState),ai=ni.useEffect,ii=(ni.Fragment,ni.render,wp.data),oi=ii.dispatch,li=ii.select,ci=function(e){var t=Qa(ri([]),2),n=t[0],r=t[1],a=Qa(ri({search:"",page:1}),2),i=a[0],o=a[1],l=Qa(ri(!1),2),c=l[0],s=l[1],m=Qa(ri(!0),2),p=m[0],d=m[1],f=Qa(ri(null),2),b=f[0],v=f[1],w=Qa(ri(!1),2),y=w[0],g=w[1];ai((function(){e.hasOwnProperty("media")&&o(Xa(Xa({},i),{},{meta_key:e.media.url}))}),[e.type]);var h=function(){o(Xa(Xa({},i),{},{page:1}))};ai((function(){return document.addEventListener("vibebp_component_reload",h),function(){document.removeEventListener("vibebp_component_reload",h)}})),u((function(){if(Object.keys(i).length){var e=Xa({},i);e.token=li("vibebp").getToken(),b&&b.abort();var t={},a=new AbortController;b&&(t={signal:a.signal}),v(a),d(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(i.search.length?"nocache":encodeURIComponent(JSON.stringify(Xa(Xa({},i),{},{search:""}))),"&force"),Xa(Xa({method:"post"},t),{},{headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(e)})).then((function(e){return e.json()})).then((function(e){if(d(!1),e.status){var t=[];y?(t=Za(n),e.data.activities.map((function(e){t.push(e)})),g(!1)):t=e.data.activities,r(t),s(e.data.has_more_items)}else e.hasOwnProperty("message")&&oi("vibebp").addNotification({text:e.message})}))}}),500,[i]);var _,E,O=function(e,t){var a=Za(n),o="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(encodeURIComponent(JSON.stringify(Xa(Xa({},i),{},{search:""}))));if("remove"===t||"remove-favorite"==t&&"activity-favs"==i.filter){var l=Za(n),c=l.findIndex((function(t){return t.id===e.id}));if(-1!==c&&(console.log(c),l.splice(c,1),r(l),!i.search.length)){"".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(encodeURIComponent(JSON.stringify(Xa(Xa({},i),{},{search:""}))));localforage.getItem(o).then((function(e){var t=JSON.parse(e);t.data.activities=l,localforage.setItem(o,JSON.stringify(t))}))}}"update"==t&&(a[a.findIndex((function(t){return t.id==e.id}))]=e,i.search.length||localforage.getItem(o).then((function(e){var t=JSON.parse(e);t.data.activities=a,localforage.setItem(o,JSON.stringify(t))})))},j=Za(n);return i.hasOwnProperty("search")&&i.search.length&&(j=n.filter((function(e){return e.action.indexOf(i.search)>-1||e.content.indexOf(i.search)>-1}))),i.hasOwnProperty("sorter")&&i.sorter.length&&(j=n.filter((function(e){return e.type==i.sorter>-1}))),wp.element.createElement("div",{className:"media_popup"},wp.element.createElement("div",{className:"left_side"},(_=e.media.type,E=e.media.url,"image"==_?wp.element.createElement("img",{src:E,className:"activity_meta image"}):"video"==_?wp.element.createElement("div",{className:"video_wrapper"},wp.element.createElement("video",{className:"activity_meta video",ref:function(e){e&&new Plyr(e)}},wp.element.createElement("source",{src:E,type:"video/mp4"}))):"audio"==_?wp.element.createElement("audio",{className:"activity_meta audio",ref:function(e){e&&new Plyr(e)}},wp.element.createElement("source",{src:E,type:"audio/mp3"})):"attachment"==_?wp.element.createElement("a",{href:E,target:"_blank",className:"vicon vicon-clip activity_meta"}):void 0)),wp.element.createElement("div",{className:"right_side"},wp.element.createElement("div",{className:"vibebp_main"},e.canpost?wp.element.createElement(Ia,{component:e.type,id:e.id,update:function(e,t){var a=Za(n),o="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(encodeURIComponent(JSON.stringify(Xa(Xa({},i),{},{search:""}))));"add"===t&&(a.unshift(e),r(a),i.search.length||localforage.getItem(o).then((function(e){var t=JSON.parse(e);t.data.activities=a,localforage.setItem(o,JSON.stringify(t))}))),"update"==t&&(a[a.findIndex((function(t){return t.id==e.id}))]=e,i.search.length||localforage.getItem(o).then((function(e){var t=JSON.parse(e);t.data.activities=a,localforage.setItem(o,JSON.stringify(t))})))},is_child:!0,media:e.media}):"",wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_body"},p&&!j.length?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",j.length?wp.element.createElement("div",{className:"activity_list"},j.map((function(t){return wp.element.createElement(Di,{activity:t,rootActivityId:t.id,update:O,media:e.media})}))):p?"":wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_activity_found),p&&j.length?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",c?wp.element.createElement("a",{className:"link",onClick:function(){var e=Xa({},i);e.page=i.page+1,g(!0),o(e)}},window.vibebp.translations.more):"")))))};function si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ui(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ui(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ui(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mi=wp.element,pi=(mi.createElement,mi.useState),di=mi.useEffect,fi=mi.Fragment,bi=(mi.render,wp.data),vi=bi.dispatch,wi=bi.select,yi=function(e){var t=si(pi(!1),2),n=t[0],r=t[1];di((function(){}),[e.activity]);var a=function(t){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"/report?post"),{method:"post",body:JSON.stringify({activity:e.activity,token:wi("vibebp").getToken(),type:t})}).then((function(e){return e.json()})).then((function(t){t.status&&(e.update(e.activity),vi("vibebp").addNotification({text:t.message}))}))};return n?wp.element.createElement(fi,null,wp.element.createElement("span",{className:"vicon vicon-arrow-left",onClick:function(){r(!1)}}),wp.element.createElement("div",{className:"reporting_wrap"},wp.element.createElement("h3",null,window.vibebp.translations.report_post),wp.element.createElement("div",{className:"spam",onClick:function(){a("spam")}},wp.element.createElement("span",{className:"vicon vicon-alert"}),window.vibebp.translations.its_spam),wp.element.createElement("div",{className:"inapproporiate",onClick:function(){a("inappropriate")}},wp.element.createElement("span",{className:"vicon vicon-alert"}),window.vibebp.translations.its_inappropriate))):wp.element.createElement("div",{className:"reporting_wrap"},wp.element.createElement("h3",null,window.vibebp.translations.post_actions),wp.element.createElement("div",{className:"hide_post",onClick:function(){a("hide")}},wp.element.createElement("span",{className:"vicon vicon-close"}),window.vibebp.translations.hide_post),wp.element.createElement("div",{className:"report_post",onClick:function(){r(!0)}},wp.element.createElement("span",{className:"vicon vicon-alert"}),window.vibebp.translations.report_post))};function gi(e){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hi(Object(n),!0).forEach((function(t){Ei(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ei(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oi(e){return function(e){if(Array.isArray(e))return Ni(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Si(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ji(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Si(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Si(e,t){if(e){if("string"==typeof e)return Ni(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ni(e,t):void 0}}function Ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ki=wp.element,Pi=(ki.createElement,ki.useState),xi=ki.useEffect,Ai=ki.Fragment,Ii=(ki.render,wp.data),Ci=Ii.dispatch,Ti=Ii.select,Di=function e(t){var n=ji(Pi({}),2),r=n[0],a=n[1],i=ji(Pi(!1),2),o=i[0],l=i[1],c=ji(Pi(!1),2),s=c[0],u=c[1],m=ji(Pi([]),2),p=m[0],d=m[1],f=ji(Pi(!1),2),b=f[0],v=f[1],w=ji(Pi(!1),2),y=w[0],g=w[1],h=ji(Pi(!1),2),_=h[0],E=h[1];xi((function(){a(t.activity),localforage.getItem("favorite_activities_"+Ti("vibebp").getUser().id).then((function(e){e&&(e=JSON.parse(e),u(e))})),localforage.getItem("liked_activities_"+Ti("vibebp").getUser().id).then((function(e){e&&(e=JSON.parse(e),d(e))}))}),[t.activity]);var O=function(e,n){var i=_i({},r);if("add"===n&&(i.children?i.children[Object.keys(i.children).length]=e:("object"===gi(i.children)&&null!==i.children||(i.children={}),i.children[0]=e),l(!1),a(i)),"remove"===n){var o=Object.keys(i.children).findIndex((function(t){return i.children[t].id===e.id}));-1!==o&&(delete i.children[o],a(i))}if("update"===n){var c=Object.keys(i.children).findIndex((function(t){return i.children[t].id===e.id}));-1!==c&&(i.children[c]=e,a(i),t.update(i,"update"))}"cancel"===n&&l(!1)},j="activity_item "+r.type+" "+r.component;return r.hasOwnProperty("content")&&r.content.length&&(j+=" with_activity_content"),wp.element.createElement("div",{className:j,"data-activity-id":r.id},wp.element.createElement("div",{className:"activity_avatar"},wp.element.createElement("img",{src:r.avatar})),wp.element.createElement("div",{className:"activity_body"},wp.element.createElement("div",{className:"activity_header"},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:r.action}}),wp.element.createElement("span",{className:"vicon vicon-more",onClick:function(){E(!0)}})),r.hasOwnProperty("content")&&r.content.length?wp.element.createElement("div",{className:"activity_content"},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:r.content}}),wp.element.createElement("div",{className:"activity_attachments"},r.hasOwnProperty("meta")&&Object.keys(r.meta).length?Object.keys(r.meta).map((function(e){return wp.element.createElement(Ai,null,r.meta[e].map((function(t){if(t&&t.length>3)return wp.element.createElement("div",{className:"media_file",onClick:function(){v({type:e,url:t,activity:r})}},function(e,t){return"image"==e?wp.element.createElement("img",{src:t,className:"activity_meta image"}):"video"==e?wp.element.createElement("div",{className:"video_wrapper"},wp.element.createElement("video",{className:"activity_meta video",ref:function(e){e&&new Plyr(e)}},wp.element.createElement("source",{src:t,type:"video/mp4"}))):"audio"==e?wp.element.createElement("audio",{className:"activity_meta audio",ref:function(e){e&&new Plyr(e)}},wp.element.createElement("source",{src:t,type:"audio/mp3"})):"attachment"==e?wp.element.createElement("a",{href:t,target:"_blank",className:"vicon vicon-clip activity_meta"}):void 0}(e,t))})))})):"")):"",wp.element.createElement(Ua,{time:r.date_recorded}),t.hasOwnProperty("noedit")?"":wp.element.createElement(Ai,null,window.vibebp.settings.enable_reactions&&r.hasOwnProperty("reactions")&&r.reactions&&Object.keys(r.reactions).length?wp.element.createElement("div",{className:"reactions-overview",onClick:function(){g(r.reactions)}},function(e){var t=0,n=[];return Object.keys(e.reactions).map((function(r){t+=e.reactions[r].length,n.push(wp.element.createElement("img",{src:window.vibebp.settings.reactions[r].icon}))})),n.push(wp.element.createElement("span",{className:"count"},t)),n}(r)):"",Ti("vibebp").getData("activityPostPermissions")?wp.element.createElement("div",{className:"activity_actions"},window.vibebp.settings.enable_reactions?wp.element.createElement("div",{className:"reactions-container"},wp.element.createElement("div",{className:"my-reaction"},r.my_reaction&&r.my_reaction.length?wp.element.createElement("img",{src:window.vibebp.settings.reactions[r.my_reaction].icon}):wp.element.createElement("strong",{className:"vicon vicon-thumb-up"})),wp.element.createElement("div",{className:"reactions"},window.vibebp.settings.reactions&&Object.keys(window.vibebp.settings.reactions).length?Object.keys(window.vibebp.settings.reactions).map((function(e,t){return wp.element.createElement("div",{className:"reaction",onClick:function(){!function(e,t){var n=_i({},r);if(!Ti("vibebp").getToken()||!Ti("vibebp").getToken().length)return document.dispatchEvent(new Event("vibebp_show_login_popup")),!1;var i=0;n.hasOwnProperty("reactions")||(n.reactions={}),n.reactions.hasOwnProperty(e)||(n.reactions[e]=[]),n.hasOwnProperty("my_reaction")&&n.my_reaction?(i=n.my_reaction,n.my_reaction===e?(delete n.my_reaction,n.reactions[e].splice(n.reactions[e].findIndex((function(e){return e===Ti("vibebp").getUser().id})),1)):(n.my_reaction=e,n.reactions[e].push(Ti("vibebp").getUser().id)),n.reactions[i].splice(n.reactions[i].findIndex((function(e){return e===Ti("vibebp").getUser().id})),1),n.reactions[i].length<1&&delete n.reactions[i]):(n.my_reaction=e,n.reactions[e].push(Ti("vibebp").getUser().id)),a(n),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"/reaction?post"),{method:"post",body:JSON.stringify({activity:n,old:i,token:Ti("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("message")&&Ci("vibebp").addNotification({text:e.message})}))}(e)}},wp.element.createElement("img",{src:window.vibebp.settings.reactions[e].icon}),wp.element.createElement("span",{className:"label"},window.vibebp.settings.reactions[e].label))})):"")):window.vibebp.settings.likes?wp.element.createElement("a",{className:-1===p.indexOf(r.id)?"vicon vicon-thumb-up":"vicon vicon-thumb-up filled",onClick:function(){var e=[],n=-1;p&&(e=Oi(p),n=p.indexOf(r.id));var a="add-like";-1===n?e.push(r.id):(a="remove-like",t.update(r,"remove-like"),e.splice(n,1)),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"/").concat(a,"?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({activity_id:r.id,token:Ti("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){t.hasOwnProperty("message")&&Ci("vibebp").addNotification({text:t.message}),localforage.setItem("liked_activities_"+Ti("vibebp").getUser().id,JSON.stringify(e))})),d(e)}}):"",wp.element.createElement("a",{className:r.hasOwnProperty("children")&&r.children?"vicon vicon-comment-alt":"vicon vicon-comment",onClick:function(){l(!o)}}),wp.element.createElement("a",{className:s&&-1!==s.indexOf(r.id)?"vicon vicon-star filled":"vicon vicon-star",onClick:function(){if(!Ti("vibebp").getToken()||!Ti("vibebp").getToken().length)return document.dispatchEvent(new Event("vibebp_show_login_popup")),!1;var e=[],n=-1;s&&(e=Oi(s),n=s.indexOf(r.id));var a="add-favorite";-1===n?e.push(r.id):(a="remove-favorite",t.update(r,"remove-favorite"),e.splice(n,1)),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"/").concat(a),{method:"post",body:JSON.stringify({activity_id:r.id,token:Ti("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){t.hasOwnProperty("message")&&Ci("vibebp").addNotification({text:t.message}),localforage.setItem("favorite_activities_"+Ti("vibebp").getUser().id,JSON.stringify(e)),u(e)}))}}),r.hasOwnProperty("user_id")&&parseInt(r.user_id)===parseInt(Ti("vibebp").getUser().id)?wp.element.createElement("a",{className:"vicon vicon-trash",onClick:function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"/remove?post"),{method:"post",body:JSON.stringify({activity_id:r.id,parent_id:t.rootActivityId,token:Ti("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("message")&&Ci("vibebp").addNotification({text:e.message}),t.update(r,"remove")}))}}):""):"",o?wp.element.createElement(Ia,{activity_id:t.rootActivityId,update:O,comment_id:r.id,media:t.media,is_child:!0}):""),r.hasOwnProperty("children")&&r.children?wp.element.createElement("div",{class:"activity_list"},Object.keys(r.children).map((function(n){return wp.element.createElement(e,{activity:r.children[n],rootActivityId:t.rootActivityId,update:O,media:t.media})}))):""),wp.element.createElement(ia,{open:b,onClose:function(){return v(!1)}},wp.element.createElement(ci,{media:b,type:r.type,canpost:Ti("vibebp").getData("activityPostPermissions")})),wp.element.createElement(ia,{open:y,onClose:function(){return g(!1)}},wp.element.createElement(Ga,{reactions:y})),wp.element.createElement(ia,{open:_,onClose:function(){return E(!1)}},wp.element.createElement(yi,{activity:r,update:function(e){console.log(e),t.update(e,"remove"),E(!1)}})))};function Mi(e){return function(e){if(Array.isArray(e))return Hi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Fi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Li(Object(n),!0).forEach((function(t){Ui(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Li(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ui(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ri(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Fi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fi(e,t){if(e){if("string"==typeof e)return Hi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hi(e,t):void 0}}function Hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qi=wp.element,$i=(qi.createElement,qi.useState),zi=qi.useEffect,Bi=(qi.Fragment,qi.render,wp.data),Wi=Bi.dispatch,Vi=Bi.select,Gi=function(e){var t=Ri($i([]),2),n=t[0],r=t[1],a=Ri($i({}),2),i=a[0],o=a[1],l=Ri($i(!1),2),c=l[0],s=l[1],m=Ri($i(!0),2),p=m[0],d=m[1],f=Ri($i(null),2),b=f[0],v=f[1],w=Ri($i(!1),2),y=w[0],g=w[1],h=Ri($i([]),2),_=h[0],E=h[1],O=Ri($i(!1),2),j=O[0],S=O[1];zi((function(){var t={search:"",sorter:"",page:1};"personal"===e.type&&(t.filter="just-me"),"public"===e.type&&(t.filter="public"),e.hasOwnProperty("user_id")&&(t.user_id=e.user_id),e.hasOwnProperty("id")&&(t.id=e.id),"groups"===e.type&&(t.filter="groups"),"course"===e.type&&(t.filter="course"),e.hasOwnProperty("filter")&&(t.filter=e.filter),e.hasOwnProperty("secondary_item_id")&&(t.secondary_item_id=e.secondary_item_id),o(t);var n=[];"public"===e.type?n.push({class:["menu-child"],css_id:"activity-likes",name:window.vibebp.translations.liked,parent:"activity"}):(n=Vi("vibebp").getMenu().filter((function(e){return"activity"===e.parent_slug})),window.vibebp.settings.followers&&n.push({class:["menu-child"],css_id:"activity-following",name:window.vibebp.translations.following,parent:"activity"}),window.vibebp.settings.likes&&n.push({class:["menu-child"],css_id:"activity-likes",name:window.vibebp.translations.liked,parent:"activity"}),window.vibebp.settings.enable_reactions&&(n.push({class:["menu-child"],css_id:"public",name:window.vibebp.translations.wall,parent:"activity"}),n.push({class:["menu-child"],css_id:"reported",name:window.vibebp.translations.reported,parent:"activity"})),n.map((function(e,t){if(-1===n.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))){n[t].class.push("current-menu-item");var r=new CustomEvent("action_loaded",{detail:{component:window.vibebp.api.endpoints.activity,action:n[t].class}});document.dispatchEvent(r)}})));var r=Vi("vibebp").getUser();r&&r.hasOwnProperty("caps")&&r.caps.hasOwnProperty("manage_options")&&n.push({class:["menu-child"],css_id:"all_activity",name:window.vibebp.translations.site_activity,parent:"activity"}),n.map((function(e,t){e.hasOwnProperty("caps")&&(r.caps.hasOwnProperty(e.caps)||n.splice(t,1))})),E(n),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar"),P()}),[e.type]);var N=function(){o(Ji(Ji({},i),{},{page:1}))};zi((function(){return document.addEventListener("vibebp_component_reload",N),function(){document.removeEventListener("vibebp_component_reload",N)}})),u((function(){if(Object.keys(i).length){var t=Ji({},i);t.token=Vi("vibebp").getToken(),e.hasOwnProperty("token")&&e.token.length&&(t.token=e.token),b&&b.abort();var a={},o=new AbortController;b&&(a={signal:o.signal}),v(o),d(!0);var l="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify(Ji(Ji({},i),{},{search:""}))),"&force");"public"===e.type&&e.hasOwnProperty("user_id")&&(l="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.public_activity,"?args=").concat(i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify(Ji(Ji({},i),{},{search:""}))),"&force&client_id=").concat(window.vibebp.settings.client_id)),fetch(l,Ji(Ji({method:"post"},a),{},{headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(t)})).then((function(e){return e.json()})).then((function(e){if(d(!1),e.status){var t=[];if(y)t=Mi(n),e.data.activities.map((function(e){t.push(e)})),g(!1);else{if("activity-favs"===i.filter){var a=[];localforage.getItem("favorite_activities_"+Vi("vibebp").getUser().id).then((function(t){t&&((t=JSON.parse(t))&&t.length&&(a=Mi(t)),e.data.activities.map((function(e){-1===a.indexOf(e.id)&&a.push(e.id)})),localforage.setItem("favorite_activities_"+Vi("vibebp").getUser().id,JSON.stringify(a)))}))}if("activity-likes"===i.filter){var o=[];localforage.getItem("liked_activities_"+Vi("vibebp").getUser().id).then((function(t){t&&((t=JSON.parse(t))&&t.length&&(o=Mi(t)),e.data.activities.map((function(e){-1===o.indexOf(e.id)&&o.push(e.id)})),localforage.setItem("liked_activities_"+Vi("vibebp").getUser().id,JSON.stringify(o)))}))}t=e.data.activities}r(t),s(e.data.has_more_items)}else e.hasOwnProperty("message")&&Wi("vibebp").addNotification({text:e.message})}))}}),500,[i]);var k=function(t,a){var o=Mi(n),l="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify(Ji(Ji({},i),{},{search:""}))),"&force");if("public"===e.type&&e.hasOwnProperty("user_id")&&(l="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.public_activity,"?args=").concat(i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify(Ji(Ji({},i),{},{search:""}))),"&force&client_id=").concat(window.vibebp.settings.client_id)),"remove"===a||"remove-favorite"==a&&"activity-favs"==i.filter){var c=Mi(n),s=c.findIndex((function(e){return e.id===t.id}));if(-1!==s&&(console.log(s),c.splice(s,1),r(c),!i.search.length)){"".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(encodeURIComponent(JSON.stringify(Ji(Ji({},i),{},{search:""}))));localforage.getItem(l).then((function(e){var t=JSON.parse(e);t.data.activities=c,localforage.setItem(l,JSON.stringify(t))}))}}"update"==a&&(o[o.findIndex((function(e){return e.id==t.id}))]=t,i.search.length||localforage.getItem(l).then((function(e){var t=JSON.parse(e);t.data.activities=o,localforage.setItem(l,JSON.stringify(t))})))},P=function(){var t=!1;Wi("vibebp").setData("wallUserId",0),Wi("vibebp").setData("activityPostPermissions",!1),Vi("vibebp").getToken()&&Vi("vibebp").getToken().length?e.hasOwnProperty("user_id")&&e.user_id?(S(!1),fetch("".concat(window.vibebp.api.url,"/wall/whocanpost/check?force"),{method:"post",body:JSON.stringify({token:Vi("vibebp").getToken(),user_id:e.user_id})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("value")&&Wi("vibebp").setData("activityPostPermissions",e.value),S(!0)})),Wi("vibebp").setData("wallUserId",e.user_id)):(t=!0,Wi("vibebp").setData("activityPostPermissions",t),S(!0)):(t=!1,Wi("vibebp").setData("activityPostPermissions",t),S(!0))},x=Mi(n);return i.hasOwnProperty("search")&&i.search.length&&(x=n.filter((function(e){return e.action.indexOf(i.search)>-1||e.content.indexOf(i.search)>-1}))),i.hasOwnProperty("sorter")&&i.sorter.length&&(x=n.filter((function(e){return e.type==i.sorter>-1}))),wp.element.createElement("div",{className:"vibebp_sidebars"},"personal"===e.type?wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,"public"===e.type?window.vibebp.components.wall:window.vibebp.components.activity.label),_.map((function(e,t){return wp.element.createElement("a",{className:e.class.join(" "),onClick:function(n){var r=Ji({},i);r.filter=e.css_id,r.page=1,o(r);var a=Mi(_),l=a.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));a[l].class.splice(a[l].class.indexOf("current-menu-item"),1),a[t].class.push("current-menu-item"),E(a)}},e.name)})))):"","public"!==e.type||e.hasOwnProperty("user_id")?"":wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,"public"===e.type?window.vibebp.components.wall.label:window.vibebp.components.activity.label),_.map((function(e,t){return wp.element.createElement("a",{className:e.class.join(" "),onClick:function(n){var r=Ji({},i);r.filter=e.css_id,r.page=1,o(r);var a=Mi(_),l=a.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));l>-1&&a[l].class.splice(a[l].class.indexOf("current-menu-item"),1),a[t].class.push("current-menu-item"),E(a)}},e.name)})))),j?wp.element.createElement("div",{className:"vibebp_main"},Vi("vibebp").getData("activityPostPermissions")?wp.element.createElement(Ia,{component:e.type,id:e.id,secondary_item_id:e.secondary_item_id,update:function(t,a){var o=Mi(n),l="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify(Ji(Ji({},i),{},{search:""}))),"&force");"public"===e.type&&e.hasOwnProperty("user_id")&&(l="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.public_activity,"?args=").concat(i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify(Ji(Ji({},i),{},{search:""}))),"&force&client_id=").concat(window.vibebp.settings.client_id)),"add"===a&&(o.unshift(t),r(o),i.search.length||localforage.getItem(l).then((function(e){var t=JSON.parse(e);t&&(t.data.activities=o,localforage.setItem(l,JSON.stringify(t)))}))),"update"==a&&(o[o.findIndex((function(e){return e.id==t.id}))]=t,i.search.length||localforage.getItem(l).then((function(e){var t=JSON.parse(e);t.data.activities=o,localforage.setItem(l,JSON.stringify(t))})))}}):"",wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_links"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_text,value:i.search,onChange:function(e){var t=Ji({},i);t.search=e.target.value,t.page=1,o(t)}}))),wp.element.createElement("div",{className:"header_extras"},wp.element.createElement("select",{onChange:function(e){return t=e.target.value,void o(Ji(Ji({},i),{},{sorter:t}));var t}},Object.keys(window.vibebp.components.activity.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.activity.sorters[e])}))))),wp.element.createElement("div",{className:"portal_body"},p&&!x.length?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",x.length?wp.element.createElement("div",{className:"activity_list"},x.map((function(e){return wp.element.createElement(Di,{activity:e,rootActivityId:e.id,update:k})}))):p?"":wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_activity_found),p&&x.length?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",c?wp.element.createElement("a",{className:"link",onClick:function(){var e=Ji({},i);e.page=i.page+1,g(!0),o(e)}},window.vibebp.translations.more):""))):"")};function Zi(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function Ki(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Zi(i,r,a,o,l,"next",e)}function l(e){Zi(i,r,a,o,l,"throw",e)}o(void 0)}))}}function Xi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qi=wp.element,eo=(Qi.createElement,Qi.useState),to=Qi.useEffect,no=(Qi.Fragment,Qi.render,wp.data),ro=no.dispatch,ao=no.select,io=window.vibebp.settings.google_play_payment_method,oo=function(e){var t=Xi(eo(""),2),n=(t[0],t[1],Xi(eo([]),2)),r=n[0],a=n[1],i=Xi(eo(0),2),o=i[0],l=i[1],c=Xi(eo(!1),2),s=c[0],u=c[1];function m(){return(m=Ki(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),e.prev=1,!window.getDigitalGoodsService){e.next=14;break}return e.next=5,window.getDigitalGoodsService(io);case 5:return service=e.sent,e.next=8,service.getDetails(t);case 8:details=e.sent,console.log("ko ran",details),a(details),u(!1),e.next=16;break;case 14:console.log("window doesn't have getDigitalGoodsService."),u(!1);case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),console.log(e.t0),u(!1);case 22:case"end":return e.stop()}}),e,null,[[1,18]])})))).apply(this,arguments)}function p(){return(p=Ki(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.getDigitalGoodsService){e.next=10;break}return e.next=4,window.getDigitalGoodsService(io);case 4:return n=e.sent,e.next=7,n.consume(t);case 7:console.log("Purchase acknowledged."),e.next=11;break;case 10:console.log("window doesn't have getDigitalGoodsService.");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}to((function(){window.vibebp.settings.google_play_products&&Object.keys(window.vibebp.settings.google_play_products).length&&function(e){m.apply(this,arguments)}(Object.keys(window.vibebp.settings.google_play_products)),fetch("".concat(window.vibebp.api.url,"/wallet/?force"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:ao("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("amount")&&l(e.amount)}))}),[]);var d=function(e,t){e&&e.details.hasOwnProperty("purchaseToken")&&fetch("".concat(window.vibebp.api.url,"/wallet/update?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:ao("vibebp").getToken(),response:e,sku:t,status:"credit",store:"google"})}).then((function(e){return e.json()})).then((function(t){t.status&&(t.hasOwnProperty("points")&&l(t.points),function(e){p.apply(this,arguments)}(e.details.purchaseToken)),t.hasOwnProperty("message")&&ro("vibebp").addNotification({text:t.message,icon:"vicon vicon-save"})}))};return wp.element.createElement("div",{className:"balance_wrap"},wp.element.createElement("div",{className:"balance"},wp.element.createElement("span",null,o),wp.element.createElement("span",null,window.vibebp.translations.credits)),wp.element.createElement("div",{className:"products"},s?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):r.length?r.map((function(e){return wp.element.createElement("div",{className:"product",onClick:function(){!function(e){if(window.PaymentRequest){var t=new PaymentRequest([{supportedMethods:io,data:{sku:e}}],{total:{label:"Total",amount:{currency:"GBP",value:"0"}}});t.canMakePayment&&t.canMakePayment().then((function(e){console.log(e?"Can make payment":"Cannot make payment")})).catch((function(e){console.log(e.message)})),t.hasEnrolledInstrument&&t.hasEnrolledInstrument().then((function(r){r?console.log("Has enrolled instrument"):console.log("No enrolled instrument"),t.show().then((function(t){n(t,e)})).catch((function(e){console.log(e),console.log("Maybe you've already purchased the item.")}))})).catch((function(r){console.log(r.message),t.show().then((function(t){n(t,e)})).catch((function(e){console.log(JSON.stringify(e,void 0,2)),console.log(e)}))}))}else console.log("No PaymentRequest object.");function n(e,t){window.setTimeout((function(){e.complete("success").then((function(){console.log("Payment done: ".concat(JSON.stringify(e,void 0,2))),d(e,t)})).catch((function(t){console.log(t.message),console.log(JSON.stringify(e,void 0,2))}))}),500)}}(e.itemId)}},wp.element.createElement("img",{src:window.vibebp.settings.coin_image}),wp.element.createElement("h3",null,e.title),wp.element.createElement("p",null,e.description),wp.element.createElement("span",null,Number.parseFloat(e.price.value).toFixed(2)," ",e.price.currency))})):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_products)))};function lo(e){return function(e){if(Array.isArray(e))return fo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||po(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?co(Object(n),!0).forEach((function(t){uo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||po(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function po(e,t){if(e){if("string"==typeof e)return fo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fo(e,t):void 0}}function fo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bo=wp.element,vo=(bo.createElement,bo.useState),wo=bo.useEffect,yo=(bo.Fragment,bo.render,wp.data),go=(yo.dispatch,yo.select),ho=function(e){var t=mo(vo([]),2),n=t[0],r=t[1],a=mo(vo({per_page:20,paged:1}),2),i=a[0],o=a[1],l=mo(vo(0),2),c=l[0],s=l[1],u=mo(vo(0),2),m=u[0],p=u[1];return wo((function(){p(!0),fetch("".concat(window.vibebp.api.url,"/wallet/transactions?force"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(so({token:go("vibebp").getToken()},i))}).then((function(e){return e.json()})).then((function(e){if(e.status){e.total&&s(e.total);var t=[];e.data.length&&(t=[].concat(lo(n),lo(e.data))),r(t),p(!1)}}))}),[i]),wp.element.createElement("div",{className:"transactions_wrap"},m&&!n.length?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",n.length?n.map((function(e){return wp.element.createElement("div",{className:"transaction "+e.action},wp.element.createElement("div",{className:"amount"},e.amount),wp.element.createElement("div",{className:"details"},e.content,wp.element.createElement("div",{className:"time"},wp.element.createElement(Ua,{time:e.date_recorded}))))})):m?"":wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_transactions_found),m?n.length?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"":c>n.length?wp.element.createElement("a",{className:"link",onClick:function(){o(so(so({},i),{},{paged:i.paged+1}))}},window.vibebp.translations.load_more):"")};function _o(e){return function(e){if(Array.isArray(e))return jo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Oo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Oo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oo(e,t){if(e){if("string"==typeof e)return jo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jo(e,t):void 0}}function jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var So=wp.element,No=(So.createElement,So.useState),ko=So.useEffect,Po=(So.Fragment,So.render,wp.data),xo=(Po.dispatch,Po.select),Ao=function(e){var t=Eo(No([]),2),n=t[0],r=t[1],a=Eo(No(""),2),i=a[0],o=a[1];return ko((function(){var e=xo("vibebp").getMenu().filter((function(e){return"wallet"===e.parent}));e.map((function(t,n){-1===e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&(e[n].class.push("current-menu-item"),o(e[n].css_id))})),r(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.wallet.label),n.map((function(e,t){var a=e.class.join(" ")+" "+e.css_id;return wp.element.createElement("a",{className:a,onClick:function(a){o(e.css_id);var i=_o(n),l=i.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));i[l].class.splice(i[l].class.indexOf("current-menu-item"),1),i[t].class.push("current-menu-item"),r(i)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},"balance"===i?wp.element.createElement(oo,null):wp.element.createElement(ho,null)))};function Io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Co(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Io(Object(n),!0).forEach((function(t){To(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function To(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Do(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lo=wp.element,Jo=(Lo.createElement,Lo.useState),Uo=Lo.useEffect,Ro=(Lo.Fragment,Lo.render,wp.data),Fo=(Ro.dispatch,Ro.select),Ho=function(e){var t=Do(Jo(!1),2),n=t[0],r=t[1],a=Do(Jo(""),2),i=a[0],o=a[1];Uo((function(){l()}),[]);var l=function(){r(!0);var t={token:Fo("vibebp").getToken()};e.hasOwnProperty("id")&&(t.id=e.id),r(!0),fetch("".concat(window.vibebp.api.url,"/profile/").concat(e.hasOwnProperty("user_id")?"?"+e.hasOwnProperty("user_id"):""),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(Co({token:Fo("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(e){r(!1),o(e)})).catch((function(e){return 401===e.status&&console.log(e),Promise.reject(e.json())}))};return Uo((function(){return document.addEventListener("vibebp_component_reload",l),function(){document.removeEventListener("vibebp_component_reload",l)}})),wp.element.createElement("div",{className:"user_profile"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:i}}))};function qo(){return(qo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$o(Object(n),!0).forEach((function(t){Bo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Go=wp.element,Zo=(Go.createElement,Go.useState),Ko=Go.useEffect,Xo=Go.Fragment,Yo=(Go.render,wp.data),Qo=(Yo.dispatch,Yo.select),el=function(e){var t=Wo(Zo(!1),2),n=t[0],r=t[1],a=Wo(Zo({avatar:{},groups:[],fields:[],cover:{}}),2),i=a[0],o=a[1];Ko((function(){-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),Ko((function(){console.log(e.user_id,"USER ID"),l()}),[e.user_id]);var l=function(){r(!0),console.log("reseding api"),fetch("".concat(window.vibebp.api.url,"/xprofile/allfields").concat(e.hasOwnProperty("user_id")?"?"+e.user_id+"&force":""),{method:"post",body:JSON.stringify(zo({token:Qo("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(e){if(r(!1),e.status){var t=zo({},i);t.groups=e.groups,t.fields=e.fields,o(t)}}))};Ko((function(){return document.addEventListener("vibebp_component_reload",l),function(){document.removeEventListener("vibebp_component_reload",l)}}),[]);return wp.element.createElement("div",{className:"edit_profile"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(Xo,null,i.groups.length?i.groups.map((function(t){if(i.fields.filter((function(e){return e.group_id==t.id})).length)return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,t.name)),wp.element.createElement("div",{className:"portal_body"},i.fields.filter((function(e){return e.group_id==t.id})).length?wp.element.createElement("ul",{className:"vibebp_form"},i.fields.filter((function(e){return e.group_id==t.id})).map((function(t,n){return wp.element.createElement(hn,qo({field:t},e,{update:function(t){return function(t){var n=zo({},i),r=n.fields.findIndex((function(e){return e.id===t.id}));r>-1&&(n.fields[r]=zo({},t),e.update&&e.update(n))}(t)}}))}))):""))})):""))};function tl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tl(Object(n),!0).forEach((function(t){rl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function al(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return il(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return il(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function il(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ol=wp.element,ll=(ol.createElement,ol.useState),cl=ol.useEffect,sl=ol.useRef,ul=ol.Fragment,ml=(ol.render,wp.data),pl=(ml.dispatch,ml.select),dl=Math.round(100*Math.random()),fl=function(e){var t=sl(null),n=sl(null),r=sl(null),a=al(ll(!0),2),i=a[0],o=a[1],l=al(ll(!1),2),c=l[0],s=l[1],u=al(ll(""),2),m=u[0],p=u[1],d=al(ll(""),2),f=(d[0],d[1],al(ll(""),2)),b=(f[0],f[1],al(ll(!1),2)),v=b[0],w=b[1],y=al(ll(""),2),g=(y[0],y[1],al(ll({x:0,y:0,width:0,height:0,type:"image"}),2)),h=g[0],_=g[1],E=al(ll(window.vibebp.translations.select_image),2),O=E[0],j=E[1];cl((function(){if(c){var e=n.current;new Croppr(e,{aspectRatio:1,returnMode:"raw",maxSize:[460,460,"px"],minSize:[150,150,"px"],onCropEnd:function(e){var t=nl({},h);t.x=e.x,t.y=e.y,t.height=e.height,t.width=e.width,_(t);e.x,e.y,e.width,e.height}})}}),[c]);return wp.element.createElement("div",{className:"uploader",ref:r},i?wp.element.createElement("label",{for:"fileupload_"+dl,className:"upload_file"},O,wp.element.createElement("input",{id:"fileupload_"+dl,"data-type":e.type,ref:t,type:"file",accept:"image/*",onChange:function(a){if(t.current.files[0].size<window.vibebp.settings.upload_limit){var i={token:pl("vibebp").getToken()};e.hasOwnProperty("user_id")&&(i=nl(nl({},i),{},{user_id:e.user_id})),r.current&&(i.ui_available_width=r.current.offsetWidth),j(window.vibebp.translations.uploading);var l=new FormData;l.append("body",JSON.stringify(i)),l.append("file",t.current.files[0]),fetch("".concat(window.vibebp.api.url,"/profile/avatar/upload?force"),{method:"post",body:l}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("original_file")?(o(!1),p(e.original_file),s(!0),setTimeout((function(){n.current.scrollIntoView()}),200)):pl("vibebp").addNotification({text:e.message}),j(window.vibebp.translations.select_image)}))}else j(window.vibebp.translations.image_size_error),setTimeout((function(){j(window.vibebp.translations.select_image)}),3500)}})):wp.element.createElement("div",{className:"uploaded_src"},wp.element.createElement(ul,null,wp.element.createElement(ul,null,wp.element.createElement("div",{className:"uploaded_image"},wp.element.createElement("img",{src:m})),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-pencil",onClick:function(){s(!c)}}),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){setisCrop(!1),o(!0),p(""),_({x:0,y:0,width:0,height:0})}})),c?wp.element.createElement("div",{className:"cropimage",id:"cropper"},wp.element.createElement("img",{src:m,ref:n})):"",wp.element.createElement("a",{className:"crop"==v?"button is-primary is-loading":"button is-primary",onClick:function(){var t={cropdata:h,token:pl("vibebp").getToken(),original_file:m};e.hasOwnProperty("user_id")&&(t=nl(nl({},t),{},{user_id:e.user_id}));var n=new FormData;n.append("body",JSON.stringify(t)),w("crop"),fetch("".concat(window.vibebp.api.url,"/profile/avatar/crop?force"),{method:"post",body:n}).then((function(e){return e.json()})).then((function(t){t.hasOwnProperty("avatar")?e.update(t):pl("vibebp").addNotification({text:t.message}),w(!1)}))}},window.vibebp.translations.upload)))))};function bl(){return(bl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vl(Object(n),!0).forEach((function(t){yl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return hl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _l=wp.element,El=(_l.createElement,_l.useState),Ol=_l.useEffect,jl=(_l.Fragment,_l.render,wp.data),Sl=jl.dispatch,Nl=jl.select,kl=function(e){var t=gl(El(!1),2),n=t[0],r=t[1],a=gl(El(""),2),i=a[0],o=a[1],l=gl(El(""),2),c=l[0],s=(l[1],gl(El({}),2)),u=s[0],m=(s[1],gl(El(!1),2)),p=m[0],d=m[1],f=gl(El(!1),2),b=f[0],v=f[1],w=Nl("vibebp").getUser().id;e.user_id&&(w=e.user_id),Ol((function(){localforage.getItem("user_"+w).then((function(e){null!==e?(e=JSON.parse(e),o(e.avatar)):fetch("".concat(window.vibebp.api.url,"/avatar?ids=").concat(w),{method:"post",body:JSON.stringify({type:"user",ids:w,token:Nl("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e&&(localforage.setItem("user_"+w,JSON.stringify(e)),o(e.avatar))}))}))}),[]);var y=function(){fetch("".concat(window.vibebp.api.url,"/avatar").concat(e.hasOwnProperty("user_id")?"?"+e.hasOwnProperty("user_id"):""),{method:"post",body:JSON.stringify({type:"user",ids:w,token:Nl("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e&&(localforage.setItem("user_"+w,JSON.stringify(e)),o(e.avatar))}))};Ol((function(){return document.addEventListener("vibebp_component_reload",y),function(){document.removeEventListener("vibebp_component_reload",y)}}));return wp.element.createElement("div",{className:"profile_avatar_wrapper"},wp.element.createElement("div",{className:"profile_avatar"},n?wp.element.createElement(fl,bl({type:"image",crop:"1"},e,{update:function(t){o(t.avatar);var n=Nl("vibebp").getUser(),a=!1;if(e.hasOwnProperty("user_id")?n.id==e.user_id&&(a=!0):a=!0,a){n.avatar=t.avatar,localforage.setItem("bp_user",JSON.stringify(n));var i=n.username;n.hasOwnProperty("displayname")&&n.displayname.length&&(i=n.displayname),localforage.setItem("user_"+n.id,JSON.stringify({avatar:t.avatar,name:i})),Nl("vibebp").setUser(n)}r(!1)}})):wp.element.createElement("img",{src:i})),wp.element.createElement("div",{className:"profile_avatar_actions buttons"},wp.element.createElement("a",{className:n?"button is-danger":"button is-info",onClick:function(){r(!n)}},n?window.vibebp.translations.cancel:window.vibebp.translations.change_image),b?wp.element.createElement("a",{className:p?"button is-loading is-primary":"button is-primary",onClick:function(){d(!0);var t={cropdata:u,token:Nl("vibebp").getToken()};e.hasOwnProperty("user_id")&&(t=wl(wl({},t),{},{user_id:e.user_id}));var n=new FormData;n.append("body",JSON.stringify(t)),n.append("file",c),fetch("".concat(window.vibebp.api.url,"/profile/avatar?upload"),{method:"post",body:n}).then((function(e){return e.json()})).then((function(e){if(d(!1),e.status&&(v(!1),e.hasOwnProperty("message")&&Sl("vibebp").addNotification({text:e.message}),e.hasOwnProperty("avatar"))){o(e.avatar);var t=Nl("vibebp").getUser();t.avatar=e.avatar,localforage.setItem("bp_user",JSON.stringify(t));var n=t.username;t.hasOwnProperty("displayname")&&t.displayname.length&&(n=t.displayname),localforage.setItem("user_"+t.id,JSON.stringify({avatar:e.avatar,name:n})),Nl("vibebp").setUser(t)}}))}},window.vibebp.translations.update_image):""))};function Pl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Al=wp.element,Il=(Al.createElement,Al.useState),Cl=Al.useEffect,Tl=(Al.Fragment,Al.render,wp.data),Dl=Tl.dispatch,Ml=Tl.select,Ll=function(e){var t=Pl(Il(!1),2),n=t[0],r=t[1],a=Pl(Il(""),2),i=a[0],o=a[1],l=Pl(Il(""),2),c=l[0],s=l[1],u=Pl(Il({}),2),m=(u[0],u[1],Pl(Il(!1),2)),p=m[0],d=m[1],f=Pl(Il(!1),2),b=f[0],v=f[1],w=Ml("vibebp").getUser();Cl((function(){localforage.getItem("user_cover"+w.id).then((function(e){null!==e?o(e):fetch("".concat(window.vibebp.api.url,"/cover?ids=").concat(w.id,"&force"),{method:"post",body:JSON.stringify({type:"user",ids:w.id,token:Ml("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&e.value.hasOwnProperty("cover")&&e.value.cover&&(o(e.value.cover),localforage.setItem("user_cover"+w.id,JSON.stringify(e.value)))}))}))}),[]);var y=function(){fetch("".concat(window.vibebp.api.url,"/cover"),{method:"post",body:JSON.stringify({type:"user",ids:w.id,token:Ml("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&e.value.hasOwnProperty("cover")&&e.value.cover&&(o(e.value.cover),localforage.setItem("user_cover"+w.id,JSON.stringify(e.value)))}))};Cl((function(){return document.addEventListener("vibebp_component_reload",y),function(){document.removeEventListener("vibebp_component_reload",y)}}));return wp.element.createElement("div",{className:"profile_avatar_wrapper"},wp.element.createElement("div",{className:"profile_cover"},n?wp.element.createElement(aa,{type:"image",update:function(e){v(!0),s(e[0])}}):wp.element.createElement("img",{src:i})),wp.element.createElement("div",{className:"profile_avatar_actions buttons"},wp.element.createElement("a",{className:n?"button is-danger":"button is-info",onClick:function(){r(!n)}},n?window.vibebp.translations.cancel:window.vibebp.translations.change_image),b?wp.element.createElement("a",{className:p?"button is-loading is-primary":"button is-primary",onClick:function(){d(!0);var e={token:Ml("vibebp").getToken()},t=new FormData;t.append("body",JSON.stringify(e)),t.append("file",c),fetch("".concat(window.vibebp.api.url,"/component/cover?upload"),{method:"post",body:t}).then((function(e){return e.json()})).then((function(e){if(d(!1),e.success&&(v(!1),r(!1),e.hasOwnProperty("error")&&Dl("vibebp").addNotification({text:e.error}),e.hasOwnProperty("data"))){var t=Ml("vibebp").getUser();t.cover=e.data.url,localforage.setItem("bp_user",JSON.stringify(t)),Ml("vibebp").setUser(t),localforage.setItem("user_cover"+t.id,e.data.url),o(e.data.url)}}))}},window.vibebp.translations.update_image):""))};function Jl(e){return function(e){if(Array.isArray(e))return $l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ql(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ul(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ul(Object(n),!0).forEach((function(t){Fl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ul(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||ql(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ql(e,t){if(e){if("string"==typeof e)return $l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$l(e,t):void 0}}function $l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zl=wp.element,Bl=(zl.createElement,zl.useState),Wl=zl.useEffect,Vl=(zl.Fragment,zl.render,wp.data),Gl=Vl.dispatch,Zl=Vl.select,Kl=function(e){var t=Hl(Bl(!1),2),n=t[0],r=(t[1],Hl(Bl(window.vibebp.components.profile.default_component),2)),a=r[0],i=r[1],o=Hl(Bl([]),2),l=o[0],c=o[1],s=Hl(Bl(""),2),u=s[0],m=s[1];return Wl((function(){var e=Zl("vibebp").getAction(),t=Zl("vibebp").getMenu().filter((function(e){return"profile"===e.parent}));t.map((function(n,r){e?t.findIndex((function(t){return t.css_id==e}))>-1&&(i(t[t.findIndex((function(t){return t.css_id==e}))].css_id),t[t.findIndex((function(t){return t.css_id==e}))].class.push("current-menu-item")):-1==t[0].class.indexOf("current-menu-item")&&t[0].class.push("current-menu-item")})),c(t),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[Zl("vibebp").getMenu()]),Wl((function(){"edit"!=a&&"change-avatar"!=a&&"change-cover-image"!=a&&"public"!=a&&"view"!=a&&fetch("".concat(window.vibebp.api.url,"/profile/subNav"),{method:"post",body:JSON.stringify(Rl({activeTab:a,token:Zl("vibebp").getToken()},e))}).then((function(e){return e.json()})).then((function(e){e.status&&m(e.html),e.hasOwnProperty("message")&&Gl("vibebp").addNotification({text:e.message})}))}),[a]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.profile.label),l.map((function(e,t){return wp.element.createElement("a",{className:e.class.join(" "),onClick:function(e){var n=Jl(l),r=n.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));n[r].class.splice(n[r].class.indexOf("current-menu-item"),1),n[t].class.push("current-menu-item"),c(n),i(n[t].css_id),Gl("vibebp").setAction(n[t].css_id)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"edit"===a?wp.element.createElement(el,null):"change-avatar"===a?wp.element.createElement(kl,null):"change-cover-image"===a?wp.element.createElement(Ll,null):"public"===a||"view"===a?wp.element.createElement(Ho,null):wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:u}})))};function Xl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ql=wp.element,ec=(Ql.createElement,Ql.useState),tc=Ql.useEffect,nc=(Ql.Fragment,Ql.render,function(e){var t=Xl(ec(""),2),n=t[0],r=t[1];return tc((function(){e.notification&&void 0!==e.notification.content&&e.notification.content&&e.notification.content.hasOwnProperty("text")?r(e.notification.content.text):r(e.notification.content)}),[e.notification.content]),wp.element.createElement("div",{className:"notification",dangerouslySetInnerHTML:{__html:n}})});function rc(e){return function(e){if(Array.isArray(e))return sc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||cc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ac(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ic(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ac(Object(n),!0).forEach((function(t){oc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ac(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||cc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cc(e,t){if(e){if("string"==typeof e)return sc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sc(e,t):void 0}}function sc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var uc=wp.element,mc=(uc.createElement,uc.useState),pc=uc.useEffect,dc=(uc.Fragment,uc.render,wp.data),fc=(dc.dispatch,dc.select),bc=function(e){var t=lc(mc([]),2),n=t[0],r=t[1],a=lc(mc([]),2),i=a[0],o=a[1],l=lc(mc(!1),2),c=l[0],s=l[1],m=lc(mc({filter:"unread",sorter:"",page:1,search:""}),2),p=m[0],d=m[1],f=lc(mc(!1),2),b=f[0],v=f[1],w=lc(mc([]),2),y=w[0],g=w[1],h=lc(mc(!0),2),_=h[0],E=h[1],O=lc(mc(""),2),j=O[0],S=O[1],N=lc(mc(!1),2),k=N[0],P=N[1],x=lc(mc(!1),2),A=x[0],I=x[1],C=lc(mc(null),2),T=C[0],D=C[1];pc((function(){console.log(fc("vibebp").getMenu());var e=fc("vibebp").getMenu().filter((function(e){return"notifications"===e.parent}));e.map((function(t,n){-1===e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&e[n].class.push("current-menu-item")})),o(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),u((function(){var e=ic({},p);e.token=fc("vibebp").getToken(),T&&T.abort();var t={},a=new AbortController;T&&(t={signal:a.signal}),D(a),E(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"?").concat(p.search.length?"nocache":encodeURIComponent(JSON.stringify(ic(ic({},p),{},{search:""})))),ic(ic({method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{}},t),{},{body:JSON.stringify(e)})).then((function(e){return e.json()})).then((function(e){if(E(!1),e.status)if(A){var t=rc(n);e.data.notifications.map((function(e){t.push(e)})),r(t),I(!1),t.length<e.data.total?P(!0):P(!1)}else r(e.data.notifications),e.data.notifications.length<e.data.total?P(!0):P(!1);else r([])}))}),500,[p]);var M=function(){d(ic(ic({},p),{},{page:1}))};pc((function(){return document.addEventListener("vibebp_component_reload",M),function(){document.removeEventListener("vibebp_component_reload",M)}}));var L=function(e,t){s(!1);var a=rc(n);"read"===t&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/mark-read-unread?post"),{method:"post",body:JSON.stringify({is_new:0,id:e,token:fc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})),"unread"===t&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/mark-read-unread?post"),{method:"post",body:JSON.stringify({is_new:1,id:e,token:fc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})),"delete"===t&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/delete-notification?post"),{method:"post",body:JSON.stringify({id:e,token:fc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})),a.splice(a.findIndex((function(t){return t.id===e})),1),r(a)};return wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.notifications.label),i.map((function(e,t){var n=e.class.join(" ")+" "+e.css_id;return wp.element.createElement("a",{className:n,onClick:function(n){var r=ic({},p);r.filter=e.css_id,"notifications-my-notifications"===e.css_id&&(r.filter="unread"),r.page=1,d(r);var a=rc(i),l=a.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));a[l].class.splice(a[l].class.indexOf("current-menu-item"),1),a[t].class.push("current-menu-item"),v(!1),g([]),S(""),o(a)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},wp.element.createElement("div",{className:"vibebp_main_head"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:p.search,onChange:function(e){return d(ic(ic({},p),{},{search:e.target.value}))},placeholder:window.vibebp.translations.search_text})),wp.element.createElement("select",{onChange:function(e){var t=ic({},p);t.sorter=e.target.value,t.page=1,d(t)}},Object.keys(window.vibebp.components.notifications.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.notifications.sorters[e])})))),n.length||_?wp.element.createElement("div",{className:"table_block"},wp.element.createElement("table",{className:"table"},wp.element.createElement("thead",null,wp.element.createElement("th",null,wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{id:"selectall",type:"checkbox",checked:b?"checked":"",onClick:function(){b?v(!1):(v(!0),g([]))}}),wp.element.createElement("label",{for:"selectall"}))),wp.element.createElement("th",null,window.vibebp.translations.owner),wp.element.createElement("th",null,window.vibebp.components.notifications.label),wp.element.createElement("th",null,window.vibebp.translations.date),wp.element.createElement("th",null,wp.element.createElement("a",{className:"vicon vicon-more rotate90"}))),wp.element.createElement("tbody",null,_?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):n.length?wp.element.createElement(Wn,{type:"user",user_ids:n.map((function(e){return e.user_id}))},n.map((function(e){return wp.element.createElement("tr",null,wp.element.createElement("td",{valign:"center"},wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{type:"checkbox",onClick:function(){var t=rc(y);b&&(v(!1),n.map((function(e){t.push(e.id)}))),-1===y.indexOf(e.id)?(t.push(e.id),g(t)):(t.splice(y.indexOf(e.id),1),g(t))},checked:b||-1!==y.indexOf(e.id)?"checked":"",id:e.id}),wp.element.createElement("label",{for:e.id}))),wp.element.createElement("td",{valign:"center"},wp.element.createElement(Bn,{type:"user",id:{user_id:e.user_id}})),wp.element.createElement("td",{valign:"center"},wp.element.createElement(nc,{notification:e,update:L})),wp.element.createElement("td",{valign:"center"},wp.element.createElement(Ua,{time:e.date_notified})),wp.element.createElement("td",{valign:"center"},wp.element.createElement("a",{className:"vicon vicon-more rotate90",onClick:function(){s(!c&&e.id)}}),c===e.id?wp.element.createElement("ul",{className:"target_menu"},Object.keys(window.vibebp.components.notifications.actions).map((function(t){if(t!==p.filter)return wp.element.createElement("li",{value:t,onClick:function(){L(e.id,t)}},window.vibebp.components.notifications.actions[t])}))):""))}))):"")),b||y.length?wp.element.createElement("div",{className:"bulk_actions"},wp.element.createElement("select",{onChange:function(e){S(e.target.value)}},wp.element.createElement("option",null,window.vibebp.translations.selectaction),Object.keys(window.vibebp.components.notifications.actions).map((function(e){if(e!==p.filter)return wp.element.createElement("option",{value:e},window.vibebp.components.notifications.actions[e])}))),wp.element.createElement("a",{className:"button is-primary",onClick:function(){var e=rc(n);if(console.log(j),j)if(b){if(r([]),"read"===j&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/markall-read-unread?post"),{method:"post",body:JSON.stringify({is_new:0,token:fc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})),"unread"===j&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/markall-read-unread?post"),{method:"post",body:JSON.stringify({is_new:1,token:fc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})),"delete"===j){var t=[];n.map((function(e){t.push(e.id)})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/deleteall?post"),{method:"post",body:JSON.stringify({ids:t,token:fc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){}))}}else y.length&&(y.map((function(t){e.splice(e.findIndex((function(e){return t===e.id})),1)})),r(e),"read"===j&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/mark-read-unread?post"),{method:"post",body:JSON.stringify({is_new:0,id:y,token:fc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})),"unread"===j&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/mark-read-unread?post"),{method:"post",body:JSON.stringify({is_new:1,id:y,token:fc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})),"delete"===j&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.notifications,"/delete-notification?post"),{method:"post",body:JSON.stringify({id:y,token:fc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})))}},window.vibebp.translations.apply)):"",k&&!_?wp.element.createElement("a",{className:"link",onClick:function(){var e=ic({},p);e.page+=1,d(e),I(!0)}},window.vibebp.translations.more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_notifications_found)))};function vc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var yc=wp.element,gc=(yc.createElement,yc.useState),hc=(yc.useEffect,yc.Fragment),_c=(yc.render,wp.data),Ec=(_c.dispatch,_c.select,function(e){var t=vc(gc(JSON.parse(e.object)),2),n=t[0];t[1];return wp.element.createElement(hc,null,n&&n.hasOwnProperty("blocks")&&void 0!==n.blocks&&n.blocks.length&&void 0!==n.blocks[0]&&"unstyled"===n.blocks[0].type?wp.element.createElement("div",{className:"blocktext"},n.blocks[0].text):"")});function Oc(e){return function(e){if(Array.isArray(e))return Nc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Sc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Sc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sc(e,t){if(e){if("string"==typeof e)return Nc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nc(e,t):void 0}}function Nc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kc=wp.element,Pc=(kc.createElement,kc.useState),xc=kc.useEffect,Ac=kc.Fragment,Ic=(kc.render,kc.useContext),Cc=wp.data,Tc=Cc.dispatch,Dc=Cc.select,Mc=function(e){var t=Ic(Cn),n=jc(Pc(0),2),r=n[0],a=n[1],i=jc(Pc(!1),2),o=i[0],l=i[1],c=jc(Pc([]),2),s=c[0],u=c[1];xc((function(){e.message.hasOwnProperty("labels")&&e.message.labels&&e.message.labels.length&&u(e.message.labels)}),[e.message]),xc((function(){e.message.hasOwnProperty("recipients")&&Object.keys(e.message.recipients).map((function(t){e.message.recipients[t].user_id===Dc("vibebp").getUser()&&e.message.recipients[t].unread_count&&a(1)}))}),[]);var p="message_add_label vicon vicon-plus";return o&&(p="message_add_label vicon vicon-close"),wp.element.createElement(Ac,null,t.messageLabels&&t.messageLabels.length?wp.element.createElement("div",{className:"message_labels"},s.length?s.map((function(n){var r=t.messageLabels[t.messageLabels.findIndex((function(e){return e.slug===n}))];return wp.element.createElement("span",{style:{background:r.color},onClick:function(){return function(t){var n=Oc(s);n.splice(n.indexOf(t),1),u(n),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({id:e.message.thread_id,action:"remove_label",label:t,token:Dc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(n){e.updateLabels(t,0),n.hasOwnProperty("message")&&Tc("vibebp").addNotification({text:n.message,icon:"vicon vicon-save"})}))}(n)}},r.name)})):"",wp.element.createElement("a",{className:p,onClick:function(){l(!o)}}),o?wp.element.createElement("ul",{className:"allmessage_labels"},t.messageLabels.map((function(t){if(-1===s.indexOf(t.slug))return wp.element.createElement("li",{onClick:function(){return function(t){l(!1);var n=Oc(s);n.push(t.slug),u(n),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({id:e.message.thread_id,action:"add_label",label:t.slug,token:Dc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(n){e.updateLabels(t.slug,1),n.hasOwnProperty("message")&&Tc("vibebp").addNotification({text:n.message,icon:"vicon vicon-save"})}))}(t)},style:{background:t.color}},t.name)}))):""):"",wp.element.createElement("div",{className:"message",onClick:function(){e.show()}},r?wp.element.createElement("strong",{dangerouslySetInnerHTML:{__html:e.message.last_message_subject}}):wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:e.message.last_message_subject}}),m(e.message.last_message_content)?wp.element.createElement(Ec,{object:e.message.last_message_content,type:"text"}):wp.element.createElement("div",{className:"message_content",dangerouslySetInnerHTML:{__html:e.message.last_message_content}})))};function Lc(e){return function(e){if(Array.isArray(e))return qc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Hc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jc(Object(n),!0).forEach((function(t){Rc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Hc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hc(e,t){if(e){if("string"==typeof e)return qc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qc(e,t):void 0}}function qc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $c=wp.element,zc=($c.createElement,$c.useState),Bc=$c.useEffect,Wc=$c.Fragment,Vc=($c.render,wp.data),Gc=Vc.dispatch,Zc=Vc.select,Kc=function(e){var t=Fc(zc(""),2),n=t[0],r=t[1],a=Fc(zc(!1),2),i=a[0],o=a[1],l=Fc(zc(!1),2),c=l[0],s=l[1],m=Fc(zc([]),2),p=m[0],d=m[1],f=Fc(zc({content:"",recipients:[],subject:"",thread_id:0,meta:[]}),2),b=f[0],v=f[1],w=Fc(zc([]),2),y=w[0],g=w[1],h=Fc(zc(""),2),_=h[0],E=h[1],O=Fc(zc(!0),2),j=O[0],S=O[1],N=Fc(zc({}),2),k=N[0],P=N[1],x=Fc(zc(!1),2),A=x[0],I=x[1];Bc((function(){localforage.setItem("fixedToolbar",1)}),[]),Bc((function(){if(e.hasOwnProperty("thread_id")){var t=Uc({},b);t.thread_id=e.thread_id,t.recipients=e.recipients,v(t)}}),[e.thread_id]),Bc((function(){if(e.hasOwnProperty("messaging_users")){var t=Uc({},b);t.recipients=e.messaging_users,v(t)}}),[e.messaging_users]),u((function(){n.length>3&&(s(!0),fetch("".concat(window.vibebp.api.url,"/search?nocache"),{method:"post",body:JSON.stringify({search:n,type:"user",token:Zc("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){s(!1),e.status&&Array.isArray(e.results)&&(e.results.map((function(e){localforage.setItem("user_"+e.id,JSON.stringify(e))})),d(e.results),I(!0))})))}),500,[n]),Bc((function(){if(j){var t=new CustomEvent("load_vibe_editor",{detail:{selector:".vibe_message_editor",content:e.hasOwnProperty("message")&&e.message.post_content?e.message.post_content:"",raw:e.hasOwnProperty("message")&&e.message.raw?e.message.raw:"",components:["editor"],updater:"vibe_message",reinit:!0}});document.dispatchEvent(t)}}),[j]),Bc((function(){document.addEventListener("vibe_editor_content_update_vibe_message",(function(e){P({post_content:e.detail.raw_html,raw:e.detail.editor_content})}))}),[]);var C=function(){var t=1;if(k.post_content||(t=0,Gc("vibebp").addNotification({text:window.vibebp.translations.missing_content})),b.recipients.length||2==e.type||(t=0,Gc("vibebp").addNotification({text:window.vibebp.translations.missing_recipients})),b.subject.length||b.thread_id||(t=0,Gc("vibebp").addNotification({text:window.vibebp.translations.missing_subject})),t){var n=Uc(Uc({},b),{},{content:k.post_content,raw:k.raw});2==e.type&&(n.notice=1),o(!0);var r=new FormData;r.append("body",JSON.stringify({args:n,token:Zc("vibebp").getToken()})),_.length&&_.map((function(e,t){r.append("files_"+t,e)})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/send?upload"),{method:"post",body:r}).then((function(e){return e.json()})).then((function(t){o(!1),e.update(t,b),g([]),E(""),v(Uc(Uc({},b),{},{content:"",subject:""})),S(!1),t.hasOwnProperty("message")&&Gc("vibebp").addNotification({text:t.message})}))}};return wp.element.createElement("div",{className:"newmessage_form"},e.recipients||2==e.type?"":wp.element.createElement("div",{className:"recipients"},wp.element.createElement("label",null,window.vibebp.translations.recipients),wp.element.createElement("div",{className:"recipients_list"},wp.element.createElement("div",{className:"recipient_items"},wp.element.createElement(Wn,{user_ids:b.recipients},b.recipients.map((function(e){return wp.element.createElement("span",{onClick:function(){var t=Uc({},b);t.recipients.splice(t.recipients.indexOf(e),1),v(t)}},wp.element.createElement(Bn,{type:"member",id:{user_id:e}}))})))),wp.element.createElement("div",{className:c?"control is-loading":"control"},wp.element.createElement("input",{type:"text",value:n,placeholder:window.vibebp.translations.search_member,onChange:function(e){r(e.target.value)},onFocus:function(){I(!0)}}))),A&&p.length?wp.element.createElement("div",{className:"search_results"},p.map((function(e,t){if(!(b.recipients.indexOf(e.id)>-1))return wp.element.createElement("div",{className:"search_result user",onClick:function(){r("");var t=Uc({},b);-1===t.recipients.indexOf(e.id)&&(t.recipients.push(e.id),v(t),I(!1))}},wp.element.createElement("img",{src:e.avatar}),wp.element.createElement("span",null,e.name))}))):""),e.hasOwnProperty("thread_id")?"":wp.element.createElement("div",{className:"subject"},wp.element.createElement("label",null,window.vibebp.translations.subject),wp.element.createElement("input",{type:"text",value:b.subject,onChange:function(e){var t=Uc({},b);t.subject=e.target.value,v(t)}})),wp.element.createElement("div",{className:"message_body",id:"message_body"},j?wp.element.createElement("div",{className:"vibe_message_editor"},wp.element.createElement("textarea",{onChange:function(e){v(Uc(Uc({},b),{},{content:e.target.value})),P(Uc(Uc({},k),{},{post_content:e.target.value}))},value:b.content})):wp.element.createElement("a",{className:"button is-primary is-fullwidth",onClick:function(){return S(!j)}},window.vibebp.translations.add_message)),j&&(!e.hasOwnProperty("type")||e.hasOwnProperty("type")&&"notices"!==e.type)?wp.element.createElement("div",{className:"message_actions"},wp.element.createElement("div",{className:"message_Attachments"},wp.element.createElement(Wc,null,wp.element.createElement("a",{className:"vicon vicon-clip",onClick:function(){var e=Lc(y);e.push("attachment"),g(e)}}),wp.element.createElement("a",{className:"vicon vicon-video-camera",onClick:function(){var e=Lc(y);e.push("video"),g(e)}}),wp.element.createElement("a",{className:"vicon vicon-image",onClick:function(){var e=Lc(y);e.push("image"),g(e)}})),y.length?y.map((function(e,t){return wp.element.createElement("div",{className:"message_attachment"},"image"==e?wp.element.createElement("a",{className:"vicon vicon-image upload_type"}):"video"==e?wp.element.createElement("a",{className:"vicon vicon-video-camera upload_type"}):wp.element.createElement("a",{className:"vicon vicon-clip upload_type"}),wp.element.createElement(aa,{type:e,update:function(n,r){var a=Lc(_);a[t]=new File([n[0]],n[0].name),E(a),v(Uc(Uc({},b),{},{meta:[].concat(Lc(b.meta),[{key:e,value:t}])}))}}),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){var e=Lc(y);e.splice(t,1);var n=Lc(_);n.splice(t,1),E(n),g(e)}}))})):""),wp.element.createElement("div",{className:"message_buttons"},b.thread_id?"":wp.element.createElement("a",{className:"link",onClick:e.cancel},window.vibebp.translations.cancel),wp.element.createElement("a",{className:i?"button is-primary is-loading":"button is-primary",onClick:C},window.vibebp.translations.send_message))):"")};function Xc(e){return(Xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function es(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ts(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ts(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ts(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ns=wp.element,rs=(ns.createElement,ns.useState),as=ns.useEffect,is=ns.Fragment,os=(ns.render,wp.data),ls=(os.dispatch,os.select),cs=function(e){var t=es(rs(e.message),2),n=t[0],r=t[1],a=es(rs(0),2),i=a[0],o=a[1],l=es(rs([]),2),c=l[0],s=l[1];as((function(){console.log(e.message),void 0!==e.recipients&&e.recipients&&s(e.recipients)}),[e.recipients]),as((function(){if(void 0!==e.message&&e.message&&Object.keys(e.message).length){var t=[];if(e.message.hasOwnProperty("recipients")){var n=ls("vibebp").getUser(),a=Object.keys(e.message.recipients);void 0!==e.message&&a.length&&a.map((function(r){e.message.recipients[r].user_id===n.id?e.message.recipients[r].unread_count&&o(1):t.push(e.message.recipients[r].user_id)}))}s(t),r(e.message)}}),[e.message]),as((function(){document.dispatchEvent(new Event("VibeBP_Editor_Content"))}),[n.messages]);var u=ls("vibebp").getUser();return wp.element.createElement("div",{className:"fullmessage"},wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_left"},c.length?wp.element.createElement(Wn,{user_ids:c},c.map((function(e){if(e!=ls("vibebp").getUser().id)return wp.element.createElement(Bn,{type:"member",id:{user_id:e}})}))):""),e.hasOwnProperty("embeded")&&e.embeded?"":wp.element.createElement("div",{className:"header_right"},wp.element.createElement("i",{className:"vicon vicon-arrow-left",onClick:function(){e.show()}}),wp.element.createElement("a",{href:"#message_body",className:"vicon vicon-back-left"}),wp.element.createElement("i",{className:"vicon vicon-trash",onClick:function(){return e.action("delete")}}))),wp.element.createElement("div",{className:"portal_body"},n.messages.length?n.messages.map((function(e,t){return wp.element.createElement("div",{className:e.sender_id!=u.id?"notmine":"mine"},wp.element.createElement("div",{className:"portal_message_wrapper"},wp.element.createElement(Bn,{type:"user",id:{user_id:e.sender_id}}),wp.element.createElement("div",{className:"portal_message"},wp.element.createElement("div",{className:"portal_title"},0==t?wp.element.createElement(is,null,wp.element.createElement("div",{className:"message_subject"},i?wp.element.createElement("strong",null,e.subject):wp.element.createElement("span",null,e.subject)),wp.element.createElement(Ua,{time:e.date_sent})):wp.element.createElement("div",{className:"message_subject"},i?wp.element.createElement("strong",null,wp.element.createElement(Ua,{time:e.date_sent})):wp.element.createElement("span",null,wp.element.createElement(Ua,{time:e.date_sent})))),wp.element.createElement("div",{className:"portal_content"},m(e.message)?wp.element.createElement(Ec,{object:e.message}):wp.element.createElement("div",{className:"portal_content",dangerouslySetInnerHTML:{__html:e.message}})),wp.element.createElement("div",{className:"message_attachments"},"object"===Xc(e.meta)&&null!==e.meta?Object.keys(e.meta).map((function(t){return wp.element.createElement(is,null,e.meta[t].map((function(e){if(e.length>3){if("image"==t)return wp.element.createElement("img",{src:e,className:"activity_meta image"});if("video"==t)return wp.element.createElement("video",{src:e,className:"activity_meta video"});if("attachment"==t)return wp.element.createElement("a",{href:e,target:"_blank",className:"vicon vicon-clip activity_meta"})}})))})):""))),wp.element.createElement("div",null))})):"")),c.length?wp.element.createElement(Kc,{thread_id:n.thread_id,update:function(t,a){if(t.status){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yc(Object(n),!0).forEach((function(t){Qc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);i.messages=t.data,r(i),e.action("add",i.messages)}},recipients:c}):"")};function ss(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function us(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ss(Object(n),!0).forEach((function(t){ms(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ss(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ms(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ps=wp.element,ds=(ps.createElement,ps.useState,ps.useEffect,ps.Fragment),fs=(ps.render,ps.useContext),bs=wp.data,vs=bs.dispatch,ws=bs.select,ys=function(e){fs(Cn);var t=function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",body:JSON.stringify({id:e.message.id,action:"active_notice",token:ws("vibebp").getToken(),active:!e.message.is_active})}).then((function(e){return e.json()})).then((function(t){e.update(us(us({},e.message),{},{is_active:!e.message.is_active}),"active"),t.hasOwnProperty("message")&&vs("vibebp").addNotification({text:t.message,icon:"vicon vicon-check"})}))};return wp.element.createElement(ds,null,wp.element.createElement("div",{className:e.message.is_active?"notice active":"notice"},wp.element.createElement("div",{className:"notice_content"},wp.element.createElement("h3",null,e.message.is_active?wp.element.createElement("strong",{dangerouslySetInnerHTML:{__html:e.message.subject}}):wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:e.message.subject}})),m(e.message.message)?wp.element.createElement(Ec,{object:e.message.message,type:"text"}):wp.element.createElement("div",{className:"message_content",dangerouslySetInnerHTML:{__html:e.message.message}})),wp.element.createElement("div",{className:"notice_actions"},e.message.is_active?wp.element.createElement("a",{className:"vicon vicon-na",onClick:t,title:window.vibebp.translations.make_inactive}):wp.element.createElement("a",{className:"vicon vicon-star",onClick:t,title:window.vibebp.translations.make_active}),wp.element.createElement("a",{className:"vicon vicon-trash",onClick:function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",body:JSON.stringify({id:e.message.id,action:"delete_notice",token:ws("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){e.update(e.message,"deleted"),t.hasOwnProperty("message")&&vs("vibebp").addNotification({text:t.message,icon:"vicon vicon-trash"})}))}}))))};function gs(e){return function(e){if(Array.isArray(e))return Ss(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||js(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hs(Object(n),!0).forEach((function(t){Es(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Es(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Os(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||js(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function js(e,t){if(e){if("string"==typeof e)return Ss(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ss(e,t):void 0}}function Ss(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ns=wp.element,ks=(Ns.createElement,Ns.useState),Ps=Ns.useEffect,xs=Ns.Fragment,As=(Ns.rende,Ns.useContext),Is=wp.data,Cs=Is.dispatch,Ts=Is.select,Ds=function(e){var t=As(Cn),n=Os(ks([]),2),r=n[0],a=n[1],i=Os(ks([]),2),o=i[0],l=i[1],c=Os(ks(!1),2),s=c[0],m=c[1],p=Os(ks({filter:"inbox",sorter:"",page:1,search:"",label:""}),2),d=p[0],f=p[1],b=Os(ks(!1),2),v=b[0],w=b[1],y=Os(ks([]),2),g=y[0],h=y[1],_=Os(ks(!0),2),E=_[0],O=_[1],j=Os(ks(""),2),S=j[0],N=j[1],k=Os(ks(!1),2),P=k[0],x=k[1],A=Os(ks(!1),2),I=A[0],C=A[1],T=Os(ks(!1),2),D=T[0],M=T[1],L=Os(ks(!1),2),J=L[0],U=L[1],R=Os(ks(!1),2),F=R[0],H=R[1],q=Os(ks({text:"",color:"#000"}),2),$=q[0],z=q[1],B=Os(ks([]),2),W=B[0],V=B[1],G=Os(ks(window.vibebp.components.messages.actions),2),Z=G[0],K=(G[1],Os(ks(!1),2)),X=K[0],Y=K[1],Q=Os(ks(null),2),ee=Q[0],te=Q[1],ne=Os(ks(!1),2),re=ne[0],ae=ne[1];Ps((function(){return J>-1?document.querySelector(".vibebp_myprofile")&&document.querySelector(".vibebp_myprofile").classList.add("popup_active"):document.querySelector(".vibebp_myprofile")&&document.querySelector(".vibebp_myprofile").classList.remove("popup_active"),function(){document.querySelector(".vibebp_myprofile.popup_active")&&document.querySelector(".vibebp_myprofile").classList.remove("popup_active")}}),[J]),Ps((function(){var e=Ts("vibebp").getMenu().filter((function(e){return"messages"===e.parent}));e.map((function(t,n){-1===e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&e[n].class.push("current-menu-item")})),l(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),u((function(){var e=_s({},d);e.token=Ts("vibebp").getToken(),O(!0),ee&&ee.abort();var t={},n=new AbortController;ee&&(t={signal:n.signal}),te(n);var i="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"?").concat(encodeURIComponent(JSON.stringify(_s(_s({},d),{},{search:""}))));re&&(i+="&force"),fetch(i,_s(_s({method:"post"},t),{},{headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(e)})).then((function(e){return e.json()})).then((function(e){if(ae(!1),O(!1),e.status)if(I){var t=gs(r);e.data.threads.map((function(e){t.push(e)})),a(t),J||window.innerWidth>480&&U(0),C(!1),t.length<e.data.total?x(!0):x(!1)}else a(e.data.threads),J||window.innerWidth>480&&U(0),e.data.threads.length<e.data.total?x(!0):x(!1);else a([])}))}),500,[d]);var ie=function(){f(_s(_s({},d),{},{page:1}))};Ps((function(){return document.addEventListener("vibebp_component_reload",ie),function(){document.removeEventListener("vibebp_component_reload",ie)}})),Ps((function(){a([]),"notices"==d.filter&&M(2)}),[d.filter]),Ps((function(){if(1===D){f(_s(_s({},d),{},{filter:"sentbox"}));var e=gs(o),t=e.findIndex((function(e){return"sentbox"===e.css_id}));if(t>-1){var n=e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));e[n].class.splice(e[n].class.indexOf("current-menu-item"),1),e[t].class.push("current-menu-item"),l(e)}}else if(2===D){f(_s(_s({},d),{},{filter:"notices"}));var r=gs(o),a=r.findIndex((function(e){return"notices"===e.css_id}));if(a>-1){var i=r.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));r[i].class.splice(r[i].class.indexOf("current-menu-item"),1),r[a].class.push("current-menu-item"),l(r)}}}),[D]),Ps((function(){J&&document.querySelector(".fullmessage")&&document.querySelector("#vibebp_member").scrollTo({top:document.querySelector(".fullmessage").getBoundingClientRect().top,left:0,behavior:"smooth"})}),[J]),Ps((function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/labels"),{method:"post",body:JSON.stringify({token:Ts("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&Array.isArray(e.labels)&&e.labels.length&&(V(e.labels),t.update("messageLabels",e.labels))}))}),[d]);var oe=function(e,t){m(!1);var n=gs(r);if(!Array.isArray(e)){var i=[];i.push(e),e=i}if("star"===t||"unstar"===t){var o=[];e.map((function(e,t){Y(e),n[n.findIndex((function(t){return t.thread_id===e}))].messages.map((function(e,t){o.push(e.id)}))})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",body:JSON.stringify({id:o,action:t,token:Ts("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(r){Y(!1),r.status&&("unstar"===t&&e.map((function(e,t){n[n.findIndex((function(t){return t.thread_id===e}))].star=0})),"star"===t&&e.map((function(e,t){n[n.findIndex((function(t){return t.thread_id===e}))].star=1})))}))}"read"===t&&(e.map((function(e,t){n[n.findIndex((function(t){return t.thread_id===e}))].unread_count=0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",body:JSON.stringify({id:e,action:t,token:Ts("vibebp").getToken()})})),"unread"===t&&(e.map((function(e,t){n[n.findIndex((function(t){return t.thread_id===e}))].unread_count++})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",body:JSON.stringify({id:e,action:t,token:Ts("vibebp").getToken()})})),"delete"===t&&(e.map((function(e,t){n.splice(n.findIndex((function(t){return t.thread_id===e})),1)})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",body:JSON.stringify({id:e,action:t,token:Ts("vibebp").getToken()})})),a(n)},le=function(e){var t=_s({},d);t.label===e.slug?t.label="":t.label=e.slug,f(t)},ce=function(e){return!1!==J&&J===e?"message_block active":"message_block"},se=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("delete"==t&&fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/actions?post"),{method:"post",body:JSON.stringify({id:r[e].thread_id,action:"delete",token:Ts("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){var n=gs(r);n.splice(e,1),a(n),U(!1),t.hasOwnProperty("message")&&Cs("vibebp").addNotification({text:t.message,icon:"vicon vicon-save"})})),"add"==t){var i=gs(r);i[e].messages=n,a(i)}},ue=function(e,t){if("active"==t){var n=gs(r);n[n.findIndex((function(t){return t.id===e.id}))]=e,a(n)}else if("deleted"==t){var i=gs(r);i.splice(i.findIndex((function(t){return t.id===e.id})),1),a(i)}};return wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.messages.label),wp.element.createElement("a",{className:"button is-primary new_mail",onClick:function(){M(1)}},window.vibebp.translations.new_message),Ts("vibebp").getUser().caps.hasOwnProperty("manage_options")?wp.element.createElement("a",{className:"button is-danger new_mail",onClick:function(){M(2)}},window.vibebp.translations.send_notice):"",o.map((function(e,t){var n=e.class.join(" ")+" "+e.css_id;if("compose"!==e.css_id)return wp.element.createElement("a",{className:n,onClick:function(n){var r=_s({},d);r.filter=e.css_id,r.page=1,U(!1),M(!1),d.css_id!==r.filter&&f(r);var a=gs(o),i=a.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));a[i].class.splice(a[i].class.indexOf("current-menu-item"),1),a[t].class.push("current-menu-item"),w(!1),h([]),N(""),l(a)}},e.name)})),wp.element.createElement("div",{className:"labels"},wp.element.createElement("div",{class:"labels_title"},wp.element.createElement("span",null,window.vibebp.translations.labels),wp.element.createElement("a",{className:"link",onClick:function(){H(!F)}},window.vibebp.translations.add_new)),F?wp.element.createElement("div",{className:"newlabel_form"},wp.element.createElement("input",{type:"text",value:$.text,onChange:function(e){var t=_s({},$);t.text=e.target.value,z(t)}}),wp.element.createElement("label",{style:{background:$.color}},wp.element.createElement("input",{type:"color",onChange:function(e){var t=_s({},$);t.color=e.target.value,z(t)}})),wp.element.createElement("a",{className:"button is-primary vicon vicon-plus",onClick:function(){H(!1),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/label/add?post"),{method:"post",body:JSON.stringify(_s(_s({},$),{},{token:Ts("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){if(e.status){if(e.labels.length){var n=gs(W);e.labels.map((function(e){-1==n.findIndex((function(t){return t.slug==e.slug}))&&n.push(e)})),V(e.labels)}t.update("messageLabels",e.labels)}e.hasOwnProperty("message")&&Cs("vibebp").addNotification({text:e.message})}))}})):"",W&&W.length?wp.element.createElement("ul",{className:"message_labels"},W.map((function(e,n){var r="";return d.label==e.slug&&(r="active"),wp.element.createElement("li",{className:r},wp.element.createElement("label",null,wp.element.createElement("strong",{onClick:function(){return le(e)}},wp.element.createElement("span",{style:{borderColor:e.color}}),e.name),wp.element.createElement("span",{className:"vicon vicon-trash",onClick:function(){return function(e){var n=gs(W);n.splice(e,1),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.messages,"/label/remove?post"),{method:"post",body:JSON.stringify({slug:W[e].slug,token:Ts("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){})),V(n),t.update("messageLabels",n)}(n)}})),wp.element.createElement("span",{onClick:function(){return le(e)}},e.count))}))):""))),wp.element.createElement("div",{className:"vibebp_main"},wp.element.createElement("div",{className:"message_left_right"},wp.element.createElement("div",{className:"message_list_left"},wp.element.createElement("div",{className:"message_list_head"},v||g.length?"":wp.element.createElement(xs,null,wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:d.search,placeholder:window.vibebp.translations.search_text,onChange:function(e){var t=_s({},d);t.search=e.target.value,f(t)}})),wp.element.createElement("select",{onChange:function(e){var t=_s({},d);t.sorter=e.target.value,f(t)}},Object.keys(window.vibebp.components.messages.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.messages.sorters[e])})))),wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{id:"selectall",type:"checkbox",checked:v?"checked":"",onClick:function(){v?w(!1):(w(!0),h([]))}}),wp.element.createElement("label",{for:"selectall"})),v||g.length?wp.element.createElement("div",{className:"bulk_actions"},wp.element.createElement("select",{onChange:function(e){N(e.target.value)}},wp.element.createElement("option",null,window.vibebp.translations.selectaction),Object.keys(Z).map((function(e){if(e!==d.filter)return wp.element.createElement("option",{value:e},Z[e])}))),wp.element.createElement("a",{className:"button is-primary",onClick:function(){var e=gs(r),t=[];S&&(v?e.map((function(e,n){t.push(e.thread_id)})):g.length&&e.map((function(e,n){g.indexOf(e.thread_id)>-1&&t.push(e.thread_id)})),oe(t,S))}},window.vibebp.translations.apply)):""),wp.element.createElement("div",{className:"messages"},r.length||E?wp.element.createElement(xs,null,E?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):r.length?wp.element.createElement(Wn,{user_ids:"notices"!==d.filter?r.map((function(e){return e.hasOwnProperty("sender_ids")&&Object.keys(e.sender_ids)})):[Ts("vibebp").getUser().id]},r.map((function(e,n){if("notices"!==d.filter){var a="vicon vicon-star";return a=X==e.thread_id?"vicon vicon-more":"vicon vicon-star",e.star&&(a+=" filled"),wp.element.createElement("div",{className:ce(n),onClick:function(){U(n)}},wp.element.createElement("div",{className:"message_avatars"},e.hasOwnProperty("sender_ids")&&Object.keys(e.sender_ids).length?Object.keys(e.sender_ids).map((function(t,n){if(Object.keys(e.sender_ids)>3){if(n<3&&parseInt(t)>0)return wp.element.createElement(Bn,{type:"user",id:{user_id:t}})}else if(parseInt(t)>0)return wp.element.createElement(Bn,{type:"user",id:{user_id:t}})})):e.hasOwnProperty("sender_id")&&parseInt(e.sender_id)?wp.element.createElement(Bn,{type:"user",id:{user_id:e.sender_id}}):"",e.hasOwnProperty("userlinks")?wp.element.createElement("div",{className:"userlinks"},e.userlinks.map((function(e,t){return wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e}})}))):"",e.hasOwnProperty("sender_ids")&&Object.keys(e.sender_ids).length>3?wp.element.createElement("span",null,"+"+(Object.keys(e.sender_ids).length-3)+" "+window.vibebp.translations.more):""),wp.element.createElement("div",{className:"message_block_main"},wp.element.createElement("div",{className:"message_block_head"},wp.element.createElement(Ua,{time:e.last_message_date}),wp.element.createElement("div",null,wp.element.createElement("div",{className:"checkbox"},wp.element.createElement("input",{type:"checkbox",onClick:function(){var t=gs(g);v&&(w(!1),r.map((function(e){t.push(e.thread_id)}))),-1===g.indexOf(e.thread_id)?(t.push(e.thread_id),h(t)):(t.splice(g.indexOf(e.thread_id),1),h(t))},checked:v||-1!==g.indexOf(e.thread_id)?"checked":"",id:e.thread_id}),wp.element.createElement("label",{for:e.thread_id})),wp.element.createElement("a",{onClick:function(){e.star?oe(e.thread_id,"unstar"):oe(e.thread_id,"star")},className:a}),wp.element.createElement("a",{className:"vicon vicon-more rotate90",onClick:function(){m(!s&&e.thread_id)}}),wp.element.createElement(xs,null,s===e.thread_id?wp.element.createElement("ul",{className:"target_menu"},Object.keys(Z).map((function(t){if("unread"!==t&&"read"!==t&&"star"!==t&&"unstar"!==t&&"remove_label"!==t||"unread"===t&&!e.unread_count||"read"===t&&e.unread_count||"unstar"===t&&e.star||"star"===t&&!e.star)return wp.element.createElement("li",{value:t,onClick:function(){oe(e.thread_id,t)}},Z[t])}))):""))),wp.element.createElement(Mc,{message:e,labels:W,updateLabels:function(e,n){!function(e,n){var r=gs(W);n?r[r.findIndex((function(t){return t.slug===e}))].count++:r[r.findIndex((function(t){return t.slug===e}))].count--,V(r),t.update("messageLabels",r)}(e,n)},show:function(){U(n)}})))}return wp.element.createElement(ys,{message:e,update:ue})}))):"",P?wp.element.createElement("a",{className:"link",onClick:function(){var e=_s({},d);e.page+=1,f(e),C(!0)}},window.vibebp.translations.more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_messages_found))),wp.element.createElement("div",{className:"message_main"},D?wp.element.createElement(Kc,{type:D,cancel:function(){M(!1)},update:function(e,t){if("notices"===d.filter)return ae(!0),void f(_s(_s({},d),{},{filter:"notices"}));var n=gs(r);if(e.status){var i={};t.recipients.map((function(t){i[1]={user_id:t,unread_count:1},i[2]={user_id:e.data[0].sender_id,unread_count:0}}));var o={};o[e.data[0].sender_id]=e.data[0].sender_id;var l={thread_id:e.data[0].thread_id,last_message_date:e.data[0].date_sent,last_message_subject:e.data[0].subject,last_message_content:e.data[0].message,star:0,recipients:i,sender_ids:o,messages:e.data,unread_count:0};n.unshift(l),a(n),U(0),M(!1)}}}):"notices"!==d.filter&&!E&&r.length&&!1!==J?wp.element.createElement(cs,{message:r[J],show:function(){U(!1)},action:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return se(J,e,t)}}):""))))};function Ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ls(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(n),!0).forEach((function(t){Js(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Js(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Us(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rs(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fs=wp.element,Hs=(Fs.createElement,Fs.useState),qs=Fs.useEffect,$s=Fs.Fragment,zs=(Fs.render,wp.data),Bs=zs.dispatch,Ws=zs.select,Vs=function(e){var t=Us(Hs({unfriend:!1,accept:!1,reject:!1,cancel:!1,follow:!1,unfollow:!1}),2),n=t[0],r=t[1],a=Us(Hs(!1),2),i=(a[0],a[1]),o=Us(Hs(e.member),2),l=o[0],c=o[1],s=Us(Hs(!1),2);s[0],s[1];qs((function(){c(e.member)}),[e.member]);var u=function(t){e.action&&e.action(t);var a=Ls({},n);a[t]=!0,r(a),fetch("".concat(window.vibebp.api.url,"/followers/action?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({action:t,user:l,token:Ws("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(a){var i=Ls({},n);i[t]=!1,r(i),a.status&&("follow"===t&&(c(Ls(Ls({},l),{},{is_following:!0})),Bs("vibebp").addNotification({text:a.message}),Bs("vibebp").sendRealTimeNotification(a.rtm.user_id,a.rtm.message)),"unfollow"===t&&(c(Ls(Ls({},l),{},{is_following:!1})),Bs("vibebp").addNotification({text:a.message}),Bs("vibebp").sendRealTimeNotification(a.rtm.user_id,a.rtm.message)),e.hasOwnProperty("update")&&e.update(t,l))}))};return wp.element.createElement("div",{className:"membercard",onClick:function(){i(!0)}},wp.element.createElement("img",{src:l.avatar}),wp.element.createElement("div",{className:"member_details"},wp.element.createElement("strong",null,l.display_name?l.display_name:l.name?l.name:""),wp.element.createElement($s,null,l.hasOwnProperty("is_admin")?l.is_admin?wp.element.createElement("span",{className:"is-highlight is-admin"},window.vibebp.translations.admin):l.is_mod?wp.element.createElement("span",{className:"is-highlight is-mod"},window.vibebp.translations.mod):"":""),wp.element.createElement($s,null,l.hasOwnProperty("latest_update")&&l.latest_update?wp.element.createElement("span",null,l.latest_update.content):""),wp.element.createElement("div",{className:"request_actions"},l.hasOwnProperty("is_friend")?wp.element.createElement("a",{className:n.unfriend?"button is-warning is-small vicon vicon-na is-loading":"button is-warning is-small vicon vicon-na",onClick:e.unfriend}):l.hasOwnProperty("is_friend_request")?wp.element.createElement($s,null,wp.element.createElement("a",{className:n.accept?"button is-success is-small vicon vicon-face-smile is-loading":"button is-success is-small vicon vicon-face-smile",onClick:function(){return e.action("accept")}}),wp.element.createElement("a",{className:n.reject?"button is-warning is-small vicon vicon-face-sad is-loading":"button is-warning is-small vicon vicon-face-sad",onClick:function(){return e.action("reject")}})):l.hasOwnProperty("is_my_friend_request")?wp.element.createElement($s,null,wp.element.createElement("a",{className:n.cancel?"button is-warning is-small vicon vicon-na is-loading":"button is-warning is-small vicon vicon-na",onClick:function(){return e.action("cancel")}})):"",window.vibebp.settings.followers&&!e.hasOwnProperty("no_follow")?l.hasOwnProperty("is_following")&&l.is_following?wp.element.createElement("a",{className:n.unfollow?"button is-info is-small vicon vicon-thumb-down is-loading":"button is-info is-small vicon vicon-thumb-down",onClick:function(){return u("unfollow")}}):wp.element.createElement("a",{className:n.follow?"button is-info is-small vicon vicon-thumb-up is-loading":"button is-info is-small vicon vicon-thumb-up",onClick:function(){return u("follow")}}):"")))};function Gs(e){return function(e){if(Array.isArray(e))return eu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Qs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ks(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zs(Object(n),!0).forEach((function(t){Xs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ys(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Qs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qs(e,t){if(e){if("string"==typeof e)return eu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eu(e,t):void 0}}function eu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tu=wp.element,nu=(tu.createElement,tu.useState),ru=tu.useEffect,au=(tu.Fragment,tu.render,wp.data),iu=au.dispatch,ou=au.select,lu=function(e){var t=Ys(nu(!1),2),n=t[0],r=t[1],a=Ys(nu({page:1,search:"",sort:"active"}),2),i=a[0],o=a[1],l=Ys(nu([]),2),c=l[0],s=l[1],u=Ys(nu(!1),2),m=u[0],p=u[1],d=Ys(nu(!1),2),f=d[0],b=d[1],v=Ys(nu(null),2),w=v[0],y=v[1];ru((function(){w&&w.abort();var e={},t=new AbortController;w&&(e={signal:t.signal}),y(t),r(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.friends,"?").concat(i.search.length?"nocache&":"args="+encodeURIComponent(JSON.stringify(Ks(Ks({},i),{},{search:""})))),Ks(Ks({method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{}},e),{},{body:JSON.stringify(Ks(Ks({},i),{},{token:ou("vibebp").getToken()}))})).then((function(e){return e.json()})).then((function(e){if(r(!1),e.status)if(m){p(!1);var t=Gs(c);e.data.users.map((function(e){t.push(e)})),s(t),t.length<e.data.total?b(!0):b(!1)}else s(e.data.users),e.data.users.length<e.data.total?b(!0):b(!1)}))}),[i]);var g=function(){o(Ks(Ks({},i),{},{page:1}))};ru((function(){return document.addEventListener("vibebp_component_reload",g),function(){document.removeEventListener("vibebp_component_reload",g)}}));return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_links"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_text,value:i.search,onChange:function(e){var t=Ks({},i);t.search=e.target.value,t.page=1,o(t)}}))),wp.element.createElement("div",{className:"header_extras"},wp.element.createElement("select",{onChange:function(e){o(Ks(Ks({},i),{},{sort:e.target.value}))},value:i.sort},Object.keys(window.vibebp.components.friends.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.friends.sorters[e])}))))),wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):c.length?wp.element.createElement("div",{className:"friend_list member_list"},c.map((function(e){return wp.element.createElement(Vs,{member:Ks(Ks({},e),{},{is_friend:1}),unfriend:function(){!function(e){var t=Gs(c);t.splice(c.findIndex((function(t){return t.id===e.id})),1),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.friends,"/removefriendship?post"),{method:"post",body:JSON.stringify({friend_userid:e.id,token:ou("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("message")&&iu("vibebp").addNotification({text:e.message,icon:"vicon vicon-alert"})})),s(t)}(e)}})})),f?wp.element.createElement("a",{className:"link",onClick:function(){var e=Ks({},i);e.page=i.page+1,p(!0),o(e)}},window.vibebp.translations.more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_friends_found)))};function cu(e){return function(e){if(Array.isArray(e))return fu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||du(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?su(Object(n),!0).forEach((function(t){mu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||du(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function du(e,t){if(e){if("string"==typeof e)return fu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fu(e,t):void 0}}function fu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bu=wp.element,vu=(bu.createElement,bu.useState),wu=bu.useEffect,yu=(bu.Fragment,bu.render,wp.data),gu=(yu.dispatch,yu.select),hu=function(e){var t=pu(vu(!1),2),n=t[0],r=t[1],a=pu(vu({requester:0,reload:0,sort:"DESC",page:1}),2),i=a[0],o=a[1],l=pu(vu([]),2),c=l[0],s=l[1],u=pu(vu(!1),2),m=u[0],p=u[1],d=pu(vu(!1),2),f=d[0],b=d[1],v=pu(vu(!1),2),w=v[0],y=v[1],g=pu(vu(!1),2),h=g[0],_=g[1],E=pu(vu([]),2),O=E[0],j=E[1],S=pu(vu(""),2),N=S[0],k=S[1],P=pu(vu([]),2),x=P[0],A=P[1],I=pu(vu(null),2),C=I[0],T=I[1];wu((function(){if(N.length>4){_(!0),C&&C.abort();var e={},t=new AbortController;C&&(e={signal:t.signal}),T(t),fetch("".concat(window.vibebp.api.url,"/search?nocache"),uu(uu({method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{}},e),{},{body:JSON.stringify({search:N,type:"user",token:gu("vibebp").getToken()})})).then((function(e){return e.json()})).then((function(e){_(!1),e.status&&Array.isArray(e.results)&&(e.results.map((function(e){localforage.setItem("user_"+e.id,JSON.stringify(e))})),A(e.results))}))}}),[N]),wu((function(){r(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.friends,"/requests?args=").concat(encodeURIComponent(JSON.stringify(uu({},i)))),{method:"post",body:JSON.stringify(uu(uu({},i),{},{token:gu("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){if(r(!1),b(!1),e.status)if(m){if(p(!1),e.data.length){var t=cu(c);e.data.map((function(e){t.push(e)})),s(t),20===e.data.length&&b(!0)}}else s(e.data),20===e.data.length&&b(!0)}))}),[i]);var D=function(){o(uu(uu({},i),{},{page:1}))};wu((function(){return document.addEventListener("vibebp_component_reload",D),function(){document.removeEventListener("vibebp_component_reload",D)}}));var M=function(e,t){var n=c.findIndex((function(t){return t.friendship_id===e}));fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.friends,"/action?post"),{method:"post",body:JSON.stringify({friendship_id:e,action:t,friend_id:c[n].user.ID,token:gu("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){}));var r=cu(c);r.splice(n,1),s(r)};return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_links"},wp.element.createElement("a",{onClick:function(){o(uu(uu({},i),{},{requester:0}))},className:i.requester?"":"active"},window.vibebp.translations.requestee),wp.element.createElement("a",{onClick:function(){o(uu(uu({},i),{},{requester:1}))},className:i.requester?"active":""},window.vibebp.translations.requester),wp.element.createElement("a",{onClick:function(){y(!0)},className:"button is-primary"},window.vibebp.translations.add_friend)),wp.element.createElement("div",{className:"header_extras"},wp.element.createElement("select",{onChange:function(e){o(uu(uu({},i),{},{sort:e.target.value}))},value:i.sort},Object.keys(window.vibebp.components.friends.requests_sorter).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.friends.requests_sorter[e])}))))),w?wp.element.createElement("div",{className:"recipients"},wp.element.createElement("div",{className:"recipients_list"},wp.element.createElement("div",{className:"recipient_items"},wp.element.createElement(Wn,{user_ids:O},O.map((function(e){return wp.element.createElement(Bn,{type:"user",click:function(){var t=cu(O);t.splice(t.indexOf(e),1),j(t)},id:{user_id:e}})}))),O.length?wp.element.createElement("a",{className:"button is-primary",onClick:function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.friends,"/addfriendship?post"),{method:"post",body:JSON.stringify({friends:O,token:gu("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){o(uu(uu({},i),{},{reload:1})),j([])})),y(!1)}},window.vibebp.translations.send_friend_request):""),wp.element.createElement("div",{className:h?"control is-loading":"control"},wp.element.createElement("input",{type:"text",value:N,placeholder:window.vibebp.translations.search_member,onChange:function(e){k(e.target.value)}}))),x.length?wp.element.createElement("div",{className:"search_results"},x.map((function(e,t){return wp.element.createElement("div",{className:"search_result user",onClick:function(){k("");var n=cu(x),r=cu(O);-1===r.indexOf(e.id)&&(r.push(e.id),j(r),n.splice(t,1),A(n))}},wp.element.createElement("img",{src:e.avatar}),wp.element.createElement("span",null,e.name))}))):""):"",wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):c.length?wp.element.createElement("div",{className:"friend_list member_list"},c.map((function(e){return i.requester?wp.element.createElement(Vs,{member:uu(uu({},e.user),{},{is_my_friend_request:1}),action:function(t){return M(e.friendship_id,t)},no_follow:1}):wp.element.createElement(Vs,{member:uu(uu({},e.user),{},{is_friend_request:1}),action:function(t){return M(e.friendship_id,t)},no_follow:1})})),f?wp.element.createElement("a",{className:"link",onClick:function(){var e=uu({},i);e.page=i.page+1,p(!0),o(e)}},window.vibebp.translations.more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_requests_found)))};function _u(e){return function(e){if(Array.isArray(e))return Nu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Su(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ou(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ju(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Su(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Su(e,t){if(e){if("string"==typeof e)return Nu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nu(e,t):void 0}}function Nu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ku=wp.element,Pu=(ku.createElement,ku.useState),xu=ku.useEffect,Au=(ku.Fragment,ku.render,wp.data),Iu=(Au.dispatch,Au.select),Cu=function(e){var t=ju(Pu({}),2),n=t[0],r=t[1],a=ju(Pu([]),2),i=a[0],o=a[1],l=ju(Pu(""),2),c=l[0],s=l[1];return xu((function(){var e=Iu("vibebp").getMenu().filter((function(e){return"friends"===e.parent}));e.map((function(t,n){-1===e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&e[n].class.push("current-menu-item")})),o(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.friends.label),i.map((function(e,t){var a=e.class.join(" ")+" "+e.css_id;if("compose"!==e.css_id)return wp.element.createElement("a",{className:a,onClick:function(a){var l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eu(Object(n),!0).forEach((function(t){Ou(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);l.filter=e.css_id,l.page=1,n.css_id!==l.filter&&r(l),s(e.css_id);var c=_u(i),u=c.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));c[u].class.splice(c[u].class.indexOf("current-menu-item"),1),c[t].class.push("current-menu-item"),o(c)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},"requests"===c?wp.element.createElement(hu,null):wp.element.createElement(lu,null)))};function Tu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Du(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tu(Object(n),!0).forEach((function(t){Mu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ju(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ju(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ju(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Uu=wp.element,Ru=(Uu.createElement,Uu.useState),Fu=Uu.useEffect,Hu=(Uu.Fragment,Uu.render,wp.data),qu=(Hu.dispatch,Hu.select),$u=function(e){var t=Lu(Ru(!1),2),n=t[0],r=t[1],a=Lu(Ru({page:1,search:"",orderby:"active"}),2),i=a[0],o=a[1],l=Lu(Ru([]),2),c=l[0],s=l[1];u((function(){r(!0),fetch("".concat(window.vibebp.api.url,"/followers?").concat(i.search.length?"nocache":encodeURIComponent(JSON.stringify(Du(Du({},i),{},{s:""})))),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(Du(Du({},i),{},{token:qu("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){r(!1),e.status&&s(e.followers)}))}),500,[i]);var m=function(){o(Du(Du({},i),{},{page:1}))};return Fu((function(){return document.addEventListener("vibebp_component_reload",m),function(){document.removeEventListener("vibebp_component_reload",m)}})),wp.element.createElement("div",{className:"vibebp_followers_wrapper"},wp.element.createElement("div",{className:"vibebp_main_head vibebp_form"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_member,value:i.search,onChange:function(e){return o(Du(Du({},i),{},{search:e.target.value}))}})),wp.element.createElement("select",{onChange:function(e){return o(Du(Du({},i),{},{orderby:e.target.value}))}},Object.keys(window.vibebp.components.followers.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.followers.sorters[e])})))),wp.element.createElement("div",{className:"vibebp_followers"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):c.length?c.map((function(e){return wp.element.createElement(Vs,{member:e})})):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_followers)))};function zu(e){return function(e){if(Array.isArray(e))return Ku(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Zu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bu(Object(n),!0).forEach((function(t){Vu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Zu(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zu(e,t){if(e){if("string"==typeof e)return Ku(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ku(e,t):void 0}}function Ku(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xu=wp.element,Yu=(Xu.createElement,Xu.useState),Qu=Xu.useEffect,em=(Xu.Fragment,Xu.render,wp.data),tm=em.dispatch,nm=em.select,rm=function(e){var t=Gu(Yu(!1),2),n=t[0],r=t[1],a=Gu(Yu({page:1,search:"",orderby:"active"}),2),i=a[0],o=a[1],l=Gu(Yu([]),2),c=l[0],s=l[1],m=Gu(Yu(!1),2),p=m[0],d=m[1],f=Gu(Yu([]),2),b=f[0],v=f[1],w=Gu(Yu(""),2),y=w[0],g=w[1],h=Gu(Yu([]),2),_=h[0],E=h[1],O=Gu(Yu(!1),2),j=(O[0],O[1]),S=Gu(Yu(!1),2),N=(S[0],S[1]),k=Gu(Yu(null),2),P=k[0],x=k[1];u((function(){P&&P.abort();var e={},t=new AbortController;P&&(e={signal:t.signal}),x(t),r(!0),fetch("".concat(window.vibebp.api.url,"/following?").concat(i.search.length?"nocache":encodeURIComponent(JSON.stringify(Wu(Wu({},i),{},{s:""})))),Wu(Wu({method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{}},e),{},{body:JSON.stringify(Wu(Wu({},i),{},{token:nm("vibebp").getToken()}))})).then((function(e){return e.json()})).then((function(e){r(!1),e.status&&s(e.following)}))}),500,[i]);var A=function(){o(Wu(Wu({},i),{},{page:1}))};Qu((function(){return document.addEventListener("vibebp_component_reload",A),function(){document.removeEventListener("vibebp_component_reload",A)}})),u((function(){y.length>4&&(j(!0),fetch("".concat(window.vibebp.api.url,"/search"),{method:"post",body:JSON.stringify({search:y,type:"user",token:nm("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){j(!1),e.status&&Array.isArray(e.results)&&(e.results.map((function(e){localforage.setItem("user_"+e.id,JSON.stringify(e))})),E(e.results))})))}),500,[y]);var I=function(e,t){if("unfollow"==e){var n=zu(c),r=n.findIndex((function(e){return e.ID===t.id||e.ID===t.ID}));r>-1&&n.splice(r,1),s(n)}};return wp.element.createElement("div",{className:"vibebp_followers_wrapper"},wp.element.createElement("div",{className:"vibebp_followers_header vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_member,value:i.search,onChange:function(e){return o(Wu(Wu({},i),{},{search:e.target.value}))}})),p?wp.element.createElement("div",{className:"add_member_wrapper recipients"},b.length?wp.element.createElement("div",{className:"add_following_wrapper"},wp.element.createElement(Wn,{user_ids:b.map((function(e){return e.id}))},b.map((function(e,t){return wp.element.createElement(Bn,{type:"user",click:function(){var e=zu(b);e.splice(t,1),v(e)},id:{user_id:e.id}})}))),wp.element.createElement("a",{className:"vicon vicon-plus button is-link",onClick:function(){N(!0),fetch("".concat(window.vibebp.api.url,"/followers/action"),{method:"post",body:JSON.stringify({followers:b,action:"follow",token:nm("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){if(N(!1),e.status){d(!1);var t=zu(b);t.map((function(e,n){t[n].is_following=1}));var n=[].concat(zu(c),zu(t));s(n),e.hasOwnProperty("message")&&e.message.length&&e.message.map((function(e){tm("vibebp").addNotification({icon:"vicon vicon-thumb-up",message:e})})),e.hasOwnProperty("rtm")&&e.rtm.length&&e.rtm.map((function(e){tm("vibebp").sendRealTimeNotification(e.user_id,e.message)}))}else e.hasOwnProperty("message")&&tm("vibebp").addNotification({text:e.message})}))}})):"",wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_member,value:y,onChange:function(e){return g(e.target.value)}}),_.length?wp.element.createElement("div",{className:"search_results"},_.map((function(e,t){return wp.element.createElement("div",{className:"search_result user",onClick:function(){g("");var n=zu(_),r=zu(b);if(-1===r.indexOf(e)){var a=Wu(Wu({},e),{},{ID:e.id,user_nicename:e.name,avatar:e.avatar});r.push(a),v(r),n.splice(t,1),E(n)}}},wp.element.createElement("img",{src:e.avatar}),wp.element.createElement("span",null,e.name))}))):""):wp.element.createElement("a",{className:"button is-primary",onClick:function(){return d(!0)}},window.vibebp.translations.follow_members)),wp.element.createElement("select",{onChange:function(e){return o(Wu(Wu({},i),{},{orderby:e.target.value}))}},Object.keys(window.vibebp.components.followers.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.followers.sorters[e])})))),wp.element.createElement("div",{className:"vibebp_followers"},n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):c.length?c.map((function(e){return wp.element.createElement(Vs,{member:e,update:I})})):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_following)))};function am(e){return function(e){if(Array.isArray(e))return sm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||cm(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function im(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function om(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||cm(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cm(e,t){if(e){if("string"==typeof e)return sm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sm(e,t):void 0}}function sm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var um=wp.element,mm=(um.createElement,um.useState),pm=um.useEffect,dm=(um.Fragment,um.render,wp.data),fm=(dm.dispatch,dm.select),bm=function(e){var t=lm(mm({}),2),n=t[0],r=t[1],a=lm(mm([]),2),i=a[0],o=a[1],l=lm(mm(""),2),c=l[0],s=l[1];return pm((function(){var e=fm("vibebp").getMenu().filter((function(e){return"followers"===e.parent}));e.map((function(t,n){-1===e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&e[n].class.push("current-menu-item")})),o(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.followers.label),i.map((function(e,t){var a=e.class.join(" ")+" "+e.css_id;return wp.element.createElement("a",{className:a,onClick:function(a){var l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?im(Object(n),!0).forEach((function(t){om(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):im(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);l.filter=e.css_id,l.page=1,n.css_id!==l.filter&&r(l),s(e.css_id);var c=am(i),u=c.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));c[u].class.splice(c[u].class.indexOf("current-menu-item"),1),c[t].class.push("current-menu-item"),o(c)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},"following"===c?wp.element.createElement(rm,null):wp.element.createElement($u,null)))};function vm(e){return function(e){if(Array.isArray(e))return Em(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||_m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ym(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wm(Object(n),!0).forEach((function(t){gm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||_m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _m(e,t){if(e){if("string"==typeof e)return Em(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Em(e,t):void 0}}function Em(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Om=wp.element,jm=(Om.createElement,Om.useState),Sm=Om.useEffect,Nm=Om.Fragment,km=(Om.render,Om.useRef),Pm=wp.data,xm=Pm.dispatch,Am=Pm.select,Im=function(e){var t=km(null),n=hm(jm(!0),2),r=n[0],a=n[1],i=hm(jm({component:"",id:"",search_terms:"",type:"",role:"",page:1}),2),o=i[0],l=i[1],c=hm(jm([]),2),s=c[0],m=c[1],p=hm(jm(!1),2),d=p[0],f=p[1],b=hm(jm(!1),2),v=b[0],w=b[1],y=hm(jm([]),2),g=y[0],h=y[1],_=hm(jm(""),2),E=_[0],O=_[1],j=hm(jm([]),2),S=j[0],N=j[1],k=hm(jm([]),2),P=k[0],x=k[1],A=hm(jm({}),2),I=A[0],C=A[1],T=hm(jm(null),2),D=T[0],M=T[1],L=hm(jm(!1),2),J=L[0],U=L[1],R=hm(jm(!1),2),F=R[0],H=R[1],q=hm(jm(!1),2),$=q[0],z=q[1];Sm((function(){if(e.hasOwnProperty("type")){var t=ym({},o);t.component=e.type,t.id=e.id,l(t)}}),[e.type,e.id]),u((function(){if(E.length>4){D&&D.abort();var e={},t=new AbortController;D&&(e={signal:t.signal}),M(t),fetch("".concat(window.vibebp.api.url,"/search?nocache"),ym(ym({method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{}},e),{},{body:JSON.stringify({search:E,type:"user",token:Am("vibebp").getToken()})})).then((function(e){return e.json()})).then((function(e){e.status&&Array.isArray(e.results)&&(e.results.map((function(e){localforage.setItem("user_"+e.id,JSON.stringify(e))})),N(e.results))}))}}),500,[E]),Sm((function(){var t=ym({},o);t.token=Am("vibebp").getToken();var n=Am("vibebp").getUser();t.user_id=n.id,a(!0);var r=window.vibebp.api.endpoints.members;o.component!==window.vibebp.api.endpoints.members&&(r=e.type+"/members/"+e.id),D&&D.abort();var i={},l=new AbortController;D&&(i={signal:l.signal}),M(l),console.log(J),J&&(r+="?force"),fetch("".concat(window.vibebp.api.url,"/").concat(r),ym(ym({method:"post"},i),{},{body:JSON.stringify(t)})).then((function(e){return e.json()})).then((function(e){U(!1),a(!1),e.status&&(C(e.meta),m(e.data.members))}))}),[o]);return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_links"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:o.search_terms,placeholder:window.vibebp.translations.search_member,onChange:function(e){var t=ym({},o);t.search_terms=e.target.value,l(t)}}))),wp.element.createElement("div",{className:"header_extras"},wp.element.createElement("select",{value:o.role,onChange:function(e){l(ym(ym({},o),{},{role:e.target.value}))}},Object.keys(window.vibebp.components[e.type].membertypes).map((function(t){return wp.element.createElement("option",{value:t},window.vibebp.components[e.type].membertypes[t])}))))),wp.element.createElement("div",{className:"portal_body"},wp.element.createElement("div",{className:"members"},r?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):s.length?s.map((function(t){return e.hasOwnProperty("type")?wp.element.createElement("div",{className:P.indexOf(t.ID)>-1?"selected":"",onClick:function(){var e=vm(P);P.indexOf(t.ID)>-1?e.splice(P.indexOf(t.ID),1):e.push(t.ID),x(e)}},wp.element.createElement(Vs,{member:t,type:e.type,id:e.id})):wp.element.createElement("div",{className:P.indexOf(t.ID)>-1?"selected":""},wp.element.createElement(Vs,{member:t}))})):"")),wp.element.createElement("div",{className:"portal_footer"},"groups"===o.component?v||r?v?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"":wp.element.createElement(Nm,null,"upload_members_csv"==d?wp.element.createElement("div",{className:"upload_form"},wp.element.createElement("span",{className:"vicon vicon-arrow-left",onClick:function(){f(!1)}}),wp.element.createElement("div",{class:"vibep_csv_register"},wp.element.createElement("label",null,wp.element.createElement("span",null,$?wp.element.createElement("span",{onClick:function(){}},$.name):wp.element.createElement("span",null,window.vibebp.translations.select_csv),wp.element.createElement("input",{type:"file",accept:".csv",ref:t,onChange:function(e){t.current.files[0].size<window.vibebp.settings.upload_limit?z(t.current.files[0]):xm("vibebp").addNotification({text:window.vibebp.translations.image_size_error})}}))),wp.element.createElement("a",{class:"button",href:window.vibebp.settings.groups_csv_file,target:"_blank"},window.vibebp.translations.download_sample),$?wp.element.createElement("a",{class:F?"button is-loading":"button",onClick:function(){H(!0);var t={token:Am("vibebp").getToken(),group_id:e.id},n=new FormData;n.append("body",JSON.stringify(t)),n.append("file",$),fetch("".concat(window.vibebp.api.url,"/groups/import_users?upload"),{method:"post",body:n}).then((function(e){return e.ok?e.json():{status:0,message:window.vibebp.translations.error_loading_data}})).then((function(e){if(H(!1),e.status){f(!1),U(!0);var t=ym({},o);t.page=1,l(t),z(!1)}e.hasOwnProperty("message")&&xm("vibebp").addNotification({text:e.message})})).catch((function(e){H(!1),console.error("Uh oh, an error!",e),xm("vibebp").addNotification({text:window.vibebp.translations.error_loading_data})}))}},window.vibebp.translations.upload):"")):d?wp.element.createElement("div",{className:"recipients"},wp.element.createElement("div",{className:"recipients_list"},wp.element.createElement("div",{className:"recipient_items"},g.length?wp.element.createElement(Nm,null,wp.element.createElement(Wn,{user_ids:g},g.map((function(e){return wp.element.createElement(Bn,{type:"user",click:function(){var t=vm(g);t.splice(t.indexOf(e),1),h(t)},id:{user_id:e}})}))),wp.element.createElement("a",{className:v?"is-loading button":"button vicon vicon-control-forward",onClick:function(){"invite"==d&&(w(!0),fetch("".concat(window.vibebp.api.url,"/groups/invite_member/").concat(e.id,"/?").concat(encodeURIComponent(JSON.stringify(ym(ym({},o),{},{search_terms:""}))),"&post"),{method:"post",body:JSON.stringify({invitees:g,token:Am("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){w(!1),a(!1),e.status&&(f(!1),N([]),O([])),e.hasOwnProperty("message")&&xm("vibebp").addNotification({text:e.message}),U(!0);var t=ym({},o);t.page=1,l(t)}))),"add"==d&&(w(!0),fetch("".concat(window.vibebp.api.url,"/groups/join_group/").concat(e.id,"/?post"),{method:"post",body:JSON.stringify({invitees:g,token:Am("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){w(!1),a(!1),e.status&&(f(!1),N([]),O([])),e.hasOwnProperty("message")&&xm("vibebp").addNotification({text:e.message}),U(!0);var t=ym({},o);t.page=1,l(t)}))),"requests"==d&&(w(!0),fetch("".concat(window.vibebp.api.url,"/groups/requests/").concat(e.id,"/?").concat(encodeURIComponent(JSON.stringify(ym(ym({},o),{},{search_terms:""}))),"&post"),{method:"post",body:JSON.stringify({invitees:g,token:Am("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){w(!1),a(!1),e.status&&(f(!1),N([]),O([])),e.hasOwnProperty("message")&&xm("vibebp").addNotification({text:e.message}),U(!0);var t=ym({},o);t.page=1,l(t)})))}}),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){f(!1)}})):""),wp.element.createElement("div",{className:"vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("input",{type:"text",value:E,placeholder:window.vibebp.translations.search_member,onChange:function(e){O(e.target.value)}})),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){f(!1)}}),"add"==d?wp.element.createElement("a",{onClick:function(){return f("upload_members_csv")},className:"button is-info"},wp.element.createElement("span",{className:"vicon vicon-upload"})):"")),S.length?wp.element.createElement("div",{className:"search_results"},S.map((function(e,t){return wp.element.createElement("div",{className:"search_result user",onClick:function(){O("");var n=vm(S),r=vm(g);-1===r.indexOf(e.id)&&(r.push(e.id),h(r),n.splice(t,1),N(n))}},wp.element.createElement("img",{src:e.avatar}),wp.element.createElement("span",null,e.name))}))):""):wp.element.createElement("div",{className:"actions"},!P.length&&!d&&I.hasOwnProperty("can_invite")&&I.can_invite?wp.element.createElement("a",{onClick:function(){return f("invite")},className:"button is-primary"},window.vibebp.translations.invite_members):"",!d&&I.hasOwnProperty("can_add_members")&&I.can_add_members?wp.element.createElement(Nm,null,P.length?"":wp.element.createElement(Nm,null,wp.element.createElement("a",{onClick:function(){return f("add")},className:"button is-info"},window.vibebp.translations.add_members)),P.length&&I.member_actions?wp.element.createElement("div",{className:"members_actions_block"},wp.element.createElement("select",{onChange:function(t){P.length&&e.memberActions(t.target.value,P).then((function(){U(!0),x([]),l(ym({},o))}))}},wp.element.createElement("option",null,window.vibebp.translations.select_action),Object.keys(I.member_actions).map((function(e){return wp.element.createElement("option",{value:e},I.member_actions[e])})))):""):"")):""))};function Cm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lm=wp.element,Jm=(Lm.createElement,Lm.render,Lm.useState),Um=Lm.useEffect,Rm=(Lm.useContext,Lm.Fragment,Lm.RawHTML,function(e){var t=Dm(Jm({}),2),n=t[0],r=t[1];Um((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cm(Object(n),!0).forEach((function(t){Tm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t,r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")},i=!1;return n.hasOwnProperty("value")&&n.value&&(n.hasOwnProperty("options")&&n.options.length&&n.options[1]&&n.options[1].hasOwnProperty("value")&&n.value==n.options[1].value||1==n.value)&&(i=!0),wp.element.createElement("div",{className:"switch"},i?wp.element.createElement("input",{type:"checkbox",id:n.id,checked:!0,onClick:function(){n.hasOwnProperty("options")&&n.options.length&&n.options[0]?a(n.options[0].value):a(null)}}):wp.element.createElement("input",{type:"checkbox",id:n.id,onClick:function(){n.hasOwnProperty("options")&&n.options.length&&n.options[1]&&n.options[1].hasOwnProperty("value")?a(n.options[1].value):a(1)}}),wp.element.createElement("label",{for:n.id,className:"slider"}))});function Fm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zm=wp.element,Bm=(zm.createElement,zm.render,zm.useState),Wm=zm.useEffect,Vm=(zm.useContext,zm.Fragment,zm.RawHTML,function(e){var t=qm(Bm(e.field),2),n=t[0],r=t[1];Wm((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fm(Object(n),!0).forEach((function(t){Hm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t.target.value,r(a),r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"textarea_field"},wp.element.createElement("textarea",{id:n.id,value:n.value,onChange:function(e){return a(e)},placeholder:n.default},n.value))});function Gm(e){return function(e){if(Array.isArray(e))return Zm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Zm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zm(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Km=wp.element,Xm=(Km.createElement,Km.useRef),Ym=Km.useEffect;Km.Fragment,Km.render;function Qm(e){if(void 0===e)return!0;if("undefined"===e)return!0;if(null==e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function ep(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Array.isArray(t))if(n){for(var r=0;r<t.length;r++)if(t[r][n]===e[n])return r}else for(var a=0;a<t.length;a++)if(t[a].id===e.id)return a;return-1}var tp=Qm;function np(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?np(Object(n),!0).forEach((function(t){ap(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):np(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ap(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ip(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return op(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return op(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function op(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lp=wp.element,cp=(lp.createElement,lp.render,lp.useState),sp=lp.useEffect,up=(lp.useContext,lp.Fragment,lp.RawHTML,function(e){var t=ip(cp(!1),2),n=t[0],r=t[1],a=ip(cp({}),2),i=a[0],o=a[1];sp((function(){var t=rp({},e.field);Qm(e.field.value)&&!Qm(e.field.default)&&(t.value=e.field.default),o(t)}),[e.field]);return wp.element.createElement("div",{className:"number"},n||9999!==i.value?wp.element.createElement("input",{type:"number",id:i.id,value:i.value,onChange:function(t){return function(t){var n=rp({},i);n.value=t.target.value,o(n),e.update(n,e.fieldIndex,"fieldvaluechanged")}(t)},placeholder:i.default}):wp.element.createElement("span",{onClick:function(){return r(!n)}},window.vibebp.translations.unlimited))});function mp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var bp=wp.element,vp=(bp.createElement,bp.render,bp.useState),yp=bp.useEffect,gp=(bp.useContext,bp.Fragment,bp.RawHTML,function(e){var t=dp(vp({}),2),n=t[0],r=t[1];yp((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mp(Object(n),!0).forEach((function(t){pp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t.target.value,r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"number"},wp.element.createElement("input",{type:"number",id:n.id,value:n.value,onChange:function(e){return a(e)},placeholder:n.default}))});function hp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ep(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Op(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Op(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Op(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jp=wp.element,Sp=(jp.createElement,jp.render,jp.useState),Np=jp.useEffect,kp=(jp.useContext,jp.Fragment,jp.RawHTML,function(e){var t=Ep(Sp({}),2),n=t[0],r=t[1];Np((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hp(Object(n),!0).forEach((function(t){_p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t.target.value,r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"vibe_form_field "+n.id},wp.element.createElement("input",{type:"text",id:n.id,value:n.value,onChange:function(e){return a(e)},placeholder:n.default}))});function Pp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ap(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ip(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ip(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ip(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Cp=wp.element,Tp=(Cp.createElement,Cp.render,Cp.useState),Dp=Cp.useEffect,Mp=(Cp.useContext,Cp.Fragment,Cp.RawHTML,function(e){var t=Ap(Tp({}),2),n=t[0],r=t[1];Dp((function(){r(e.field)}),[e.field]);var a=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pp(Object(n),!0).forEach((function(t){xp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);a.value=t.target.value,r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"select"},wp.element.createElement("select",{id:n.id,onChange:function(e){return a(e)}},n.options&&n.options.length?n.options.map((function(e,t){var r=!1;return e.value==n.value&&(r=!0),wp.element.createElement("option",{value:e.value,selected:r},e.label)})):""))});function Lp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Up(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fp=wp.element,Hp=(Fp.createElement,Fp.render,Fp.useState),qp=Fp.useEffect,$p=(Fp.useContext,Fp.Fragment,Fp.RawHTML,Fp.useRef),zp=function(e){var t=Up(Hp(e.field),2),n=t[0],r=t[1],a=$p(null);qp((function(){r(e.field)}),[e.field]),qp((function(){if(a.current){var t={altInput:!0,dateFormat:"Y-m-d",defaultDate:e.field.hasOwnProperty("value")&&e.field.value.length?e.field.value:[],onChange:i};flatpickr(a.current,t)}}),[]);var i=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lp(Object(n),!0).forEach((function(t){Jp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);if(t&&t.length){var i=t[0].getDate();(i=i.toString()).length<2&&(i="0"+i);var o=t[0].getMonth()+1;(o=o.toString()).length<2&&(o="0"+o);var l=t[0].getFullYear()+"-"+o+"-"+i;a.value=l}else a.value="";r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"date"},wp.element.createElement("input",{type:"text",ref:a}))};function Bp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gp(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zp=wp.element,Kp=(Zp.createElement,Zp.render,Zp.useState),Xp=Zp.useEffect,Yp=(Zp.useContext,Zp.Fragment,Zp.RawHTML,Zp.useRef);function Qp(e){if(void 0===e)return!0;if("undefined"===e)return!0;if(null==e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var ed=function(e){var t=Vp(Kp(e.field),2),n=t[0],r=t[1],a=Yp(null);Xp((function(){r(e.field)}),[e.field]),Xp((function(){if(a.current){var t={enableTime:!0,noCalendar:!0,dateFormat:"H:i",defaultDate:e.field.hasOwnProperty("value")&&!Qp(e.field.value)?e.field.value:"",onChange:i};flatpickr(a.current,t)}}),[]);var i=function(t){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bp(Object(n),!0).forEach((function(t){Wp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);if(t&&t.length){var i=t[0].getHours();(i=i.toString()).length<2&&(i="0"+i);var o=t[0].getMinutes();(o=o.toString()).length<2&&(o="0"+o);var l=i+":"+o;a.value=l}else a.value="";r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"date"},wp.element.createElement("input",{type:"text",ref:a}))};function td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ad(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ad(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ad(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var id=wp.element,od=(id.createElement,id.render,id.useState),ld=id.useEffect,cd=(id.useContext,id.Fragment,id.RawHTML,function(e){var t=rd(od({}),2),n=t[0],r=t[1];ld((function(){r(e.field)}),[e.field]);var a=function(t,a,i){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?td(Object(n),!0).forEach((function(t){nd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):td(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);o.hasOwnProperty("value")||(o.value={}),o.value.hasOwnProperty(t.id)||(o.value[t.id]={}),o.value[t.id][t.course]=t.value,r(o),e.update(o,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"vibe_form_field "+n.id},n.courses&&n.courses.length?n.courses.map((function(e,t){var r=e.id,i=n.hasOwnProperty("value")&&n.value.hasOwnProperty("batch_start_time")&&n.value.batch_start_time[r]?n.value.batch_start_time[r]:null,o=n.hasOwnProperty("value")&&n.value.hasOwnProperty("batch_end_time")&&n.value.batch_end_time[r]?n.value.batch_end_time[r]:null,l=n.hasOwnProperty("value")&&n.value.hasOwnProperty("batch_repeatable")&&n.value.batch_repeatable[r]?n.value.batch_repeatable[r]:null,c=n.hasOwnProperty("value")&&n.value.hasOwnProperty("batch_repeatable_parameter")&&n.value.batch_repeatable_parameter[r]?n.value.batch_repeatable_parameter[r]:null;return wp.element.createElement("div",{className:"course_settings"},wp.element.createElement("div",{className:"label"},wp.element.createElement("label",null,e.title)),wp.element.createElement("div",{className:"settings"},wp.element.createElement("div",{className:"timings"},wp.element.createElement("div",null,wp.element.createElement("label",null,window.vibebp.translations.start_time),wp.element.createElement(ed,{field:{id:"batch_start_time",value:i,course:r,fieldIndex:t},fieldIndex:t,update:a})),wp.element.createElement("div",null,wp.element.createElement("label",null,window.vibebp.translations.end_time),wp.element.createElement(ed,{field:{id:"batch_end_time",value:o,course:r,fieldIndex:t},fieldIndex:t,update:a}))),wp.element.createElement("div",{className:"occurence"},wp.element.createElement("div",null,wp.element.createElement("label",null,window.vibebp.translations.every)),wp.element.createElement("div",null,wp.element.createElement(gp,{field:{id:"batch_repeatable",value:l,course:r,fieldIndex:t},update:a}),wp.element.createElement(Mp,{field:{id:"batch_repeatable_parameter",value:c,options:n.options,course:r,fieldIndex:t},fieldIndex:t,update:a})))))})):"")}),sd=wp.element,ud=(sd.createElement,sd.render,function(e){return wp.element.createElement("div",{class:"lds-ellipsis"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null))});function md(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?md(Object(n),!0).forEach((function(t){dd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):md(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return bd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vd=wp.element,wd=(vd.createElement,vd.render,vd.useState),yd=vd.useEffect,gd=(vd.useContext,vd.Fragment,vd.RawHTML,function(e){var t=fd(wd(e.field),2),n=t[0],r=t[1],a=fd(wd(""),2),i=a[0],o=a[1],l=fd(wd([]),2),c=l[0],s=l[1],u=fd(wd({}),2),m=u[0],p=u[1],d=fd(wd(!1),2),f=d[0],b=d[1],v=wp.data,w=v.dispatch,y=v.select,g=y("vibebp").getUser();return g.token=y("vibebp").getToken(),yd((function(){var t=pd({},n);m.id&&(t.value=m.id,t.show_value=m,r(t),e.update(t,"fieldvaluechanged"))}),[m]),yd((function(){if(i.length>3){b(!0);var t="",n="";e.field.cpt&&(t=e.field.cpt,n="selectcpt"),e.field.taxonomy&&(t=e.field.taxonomy,n="taxonomy"),fetch("".concat(window.vibebp.api.url,"/").concat(n,"/").concat(t,"?nocache"),{method:"post",body:JSON.stringify({search:i,token:g.token})}).then((function(e){return e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}})).then((function(e){e.status&&Array.isArray(e.posts)&&(e.posts.map((function(e){localStorage.setItem("post_"+e.id,JSON.stringify(e))})),s(e.posts)),b(!1)})).catch((function(e){b(!1),console.error("Uh oh, an error!",e),w("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})}))}}),[i]),wp.element.createElement("div",{className:"selectcptfield"},wp.element.createElement("div",{className:"selectcptfield_list"},m&&m.text?wp.element.createElement("div",{className:"selectcptfield_items"},wp.element.createElement("span",{type:n.cpt,onClick:function(){p({})},dangerouslySetInnerHTML:{__html:m.text}})):wp.element.createElement("div",{className:f?"control is-loading":"control"},wp.element.createElement("input",{type:"text",value:i,placeholder:window.vibebp.translations.type_keyword,onChange:function(e){o(e.target.value)}}))),c.length?wp.element.createElement("div",{className:"search_results"},c.map((function(e,t){return wp.element.createElement("div",{className:"search_result selectcpt",onClick:function(){o("");var n=pd({},m);n=e,c.splice(t,1),p(n),s([])}},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.text}}))}))):"")}),hd=wp.element,_d=(hd.createElement,hd.useState,hd.useEffect,hd.Fragment,hd.render,hd.useRef,wp.data);_d.dispatch,_d.select;function Ed(e){if(void 0===e)return!0;if("undefined"===e)return!0;if(null==e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function Od(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Od(Object(n),!0).forEach((function(t){Sd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Od(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pd=wp.element,xd=(Pd.createElement,Pd.render,Pd.useState),Ad=Pd.useEffect,Id=(Pd.useContext,Pd.Fragment),Cd=wp.data,Td=Cd.dispatch,Dd=Cd.select,Md=function(e){var t=Dd("vibebp").getUser();t.token=Dd("vibebp").getToken();var n=Nd(xd({}),2),r=n[0],a=n[1],i=Nd(xd(!1),2),o=i[0],l=i[1],c=Nd(xd(!1),2),s=c[0],u=c[1],m=Nd(xd(!1),2),p=m[0],d=m[1],f=Nd(xd(!1),2),b=f[0],v=f[1],w=Nd(xd(!1),2),y=w[0],g=w[1],h=Nd(xd({}),2),_=h[0],E=h[1];Ad((function(){var t=jd({},e.field);!Ed(e.field.value)&&Ed(e.field.show_value)?r.value!==e.field.value&&(u(!0),fetch("".concat(window.vibebp.api.url,"/getProduct/").concat(e.field.value,"?nocache"),{method:"post",body:JSON.stringify({field:e.field,token:Dd("vibebp").getToken()})}).then((function(e){return e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}})).then((function(e){u(!1),e.status?(t.show_value=e.show_value,a(t)):(t.value=0,e.hasOwnProperty("message")&&Td("vibebp").setNotification({text:e.message}),a(t))})).catch((function(e){u(!1),console.error("Uh oh, an error!",e),Td("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})}))):(t.hasOwnProperty("is_bundle")&&t.is_bundle&&g(!0),a(t))}),[e.field]);var O=function(e){var t=jd({},r);t.fields[r.fields.findIndex((function(t){return t.id==e.field.id}))]=e.field,a(t)};return wp.element.createElement("div",{className:"course_product_price"},o?wp.element.createElement(Id,null,wp.element.createElement("span",{className:"vicon vicon-arrow-left",onClick:function(){l(!1)}}),wp.element.createElement("div",{className:"add_cpt"},"create"!=p&&"bundle"!=p?wp.element.createElement("div",{className:"select_cpt_wrapper"},"select"==p?wp.element.createElement("div",{className:"select_existing_cpt"},wp.element.createElement(gd,{field:{cpt:"product"},update:function(e){E(e)}}),wp.element.createElement("div",{className:"selectcptactions"},wp.element.createElement("a",{className:"button is-primary",onClick:function(){var t,n,i;t=_,n="fieldvaluechanged",i=jd({},r),"fieldvaluechanged"==n&&(i.value=t.show_value.id,i.show_value=t.show_value,"bundle"==p?(g(!0),i.is_bundle=!0):(g(!1),i.is_bundle=!1),Object.keys(t.show_value.fields).map((function(e,n){if("meta"==e)t.show_value.fields.meta.map((function(e){i.fields.findIndex((function(t){return t.id==e.meta_key}))>-1&&(i.fields[i.fields.findIndex((function(t){return t.id==e.meta_key}))].value=e.meta_value)}));else{var r=i.fields.findIndex((function(t){return t.id==e}));r>-1?i.fields[r].value=t.show_value.fields[e]:i.fields.push({id:e,value:t.show_value.fields[e]})}}))),e.update(i,e.fieldIndex,"fieldvaluechanged"),a(i),l(!1)}},wp.element.createElement("i",{class:"vicon vicon-plus"})),wp.element.createElement("a",{className:"link",onClick:function(){d(!1)}},window.vibebp.translations.cancel))):wp.element.createElement("a",{onClick:function(){d("select")}},wp.element.createElement("i",{className:"vicon vicon-search"}),window.vibebp.translations.add_cpt.product.search)):"","select"!=p&&"bundle"!=p?wp.element.createElement("div",{className:"create_cpt_wrapper"},"create"==p?wp.element.createElement("div",{className:"new_cpt_wrapper"},wp.element.createElement("div",{className:"new_cpt_wrapper"},r.fields.map((function(e,t){if(!(e&&e.hasOwnProperty("is_child")&&e.is_child))return wp.element.createElement(Id,null,wp.element.createElement(zb,{field:e,fieldIndex:t,update:O}),e.hasOwnProperty("children")&&e.children.length&&!Ed(e.value)&&"H"!=e.value?e.children.map((function(e){var t=r.fields.findIndex((function(t){return t&&t.hasOwnProperty("id")&&t.id==e}));return wp.element.createElement(zb,{field:r.fields[t],fieldIndex:t,update:O})})):"")}))),wp.element.createElement("div",null,wp.element.createElement("a",{className:b?"button is-primary is-loading":"button is-primary",onClick:function(){!function(){var n=jd({},r);v(!0);var a={post_title:e.group.name,post_content:e.group.name,meta:[]};r.fields.map((function(e){"meta"==e.from&&a.meta.push({meta_key:e.id,meta_value:e.value})})),fetch("".concat(window.vibebp.api.url,"/createElement/product?post"),{method:"post",body:JSON.stringify(jd(jd({},a),{},{token:t.token}))}).then((function(e){return e.ok?e.json():{status:0,message:window.wplms_course_data.translations.error_loading_data}})).then((function(t){v(!1),t.status?(n.value=t.data.id,n.hasOwnProperty("show_value")||(n.show_value={}),n.show_value=t.data,g(!1),n.is_bundle=!1,e.update(n,e.fieldIndex,"fieldvaluechanged"),l(!1)):t.hasOwnProperty("message")&&Td("vibebp").addNotification({text:t.message})})).catch((function(e){v(!1),console.error("Uh oh, an error!",e),Td("vibebp").addNotification({text:window.wplms_course_data.translations.error_loading_data})}))}()}},window.vibebp.translations.add_cpt.product.add),wp.element.createElement("a",{className:"link",onClick:function(){d(!1)}},window.vibebp.translations.cancel))):wp.element.createElement("a",{class:"more",onClick:function(){d("create")}},wp.element.createElement("i",{class:"vicon vicon-plus"}),window.vibebp.translations.add_cpt.product.add)):"")):Ed(r.value)?wp.element.createElement("span",null,window.vibebp.translations.no_price,wp.element.createElement("span",{onClick:function(){l(!0)},className:"vicon vicon-pencil"})):wp.element.createElement("div",{className:"product_price_wrapper"},s?wp.element.createElement(ud,null):r.hasOwnProperty("show_value")?wp.element.createElement("div",null,wp.element.createElement("div",null,wp.element.createElement("div",{className:"product_price",dangerouslySetInnerHTML:{__html:r.show_value.text}}),y?wp.element.createElement("a",{class:"tag link",target:"_blank",href:r.hasOwnProperty("show_value")&&r.show_value.hasOwnProperty("link")?r.show_value.link:"#"},window.vibebp.translations.add_cpt.product.bundle):""),wp.element.createElement("span",null,wp.element.createElement("span",{onClick:function(){l(!0),d("create")},className:"vicon vicon-pencil"}),wp.element.createElement("span",{onClick:function(){var t=jd({},r);t.value=null,t.show_value=null,g(!1),t.is_bundle=!1,d(!0),e.update(t,e.fieldIndex,"fieldvaluechanged")},className:"vicon vicon-trash"}))):wp.element.createElement("span",null,window.vibebp.translations.no_price,wp.element.createElement("span",{onClick:function(){l(!0)},className:"vicon vicon-pencil"}))))};function Ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ld(Object(n),!0).forEach((function(t){Ud(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ld(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ud(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hd=wp.element,qd=(Hd.createElement,Hd.render,Hd.useState),$d=Hd.useEffect,zd=(Hd.useContext,Hd.Fragment,Hd.RawHTML,function(e){var t=Rd(qd({}),2),n=t[0],r=t[1];$d((function(){r(e.field)}),[e.field]);return wp.element.createElement("div",{className:"repeatable",id:n.id},wp.element.createElement("a",{className:"button small is-primary add_repeatable_count_option",onClick:function(){var t=Jd({},n);tp(t.value)&&(t.value=[]),t.value.push("Option "+(t.value.length+1)),r(t),e.update(t,e.fieldIndex,"fieldvaluechanged")}},window.vibebp.translations.add_option),wp.element.createElement("ul",{className:"repeatableoption"},n.value&&n.value.length?n.value.map((function(t,a){return wp.element.createElement("li",null,wp.element.createElement("span",null,a+1+" "),wp.element.createElement("input",{type:"text",value:t,onChange:function(t){!function(t,a){var i=Jd({},n);i.value[a]=t,r(i),e.update(i,e.fieldIndex,"fieldvaluechanged")}(t.target.value,a)}}),wp.element.createElement("span",{class:"vicon vicon-close",onClick:function(){!function(t){var a=Jd({},n);a.value.splice(t,1),r(a),e.update(a,e.fieldIndex,"fieldvaluechanged")}(a)}}))})):""))});function Bd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zd=wp.element,Kd=(Zd.createElement,Zd.render,Zd.useState),Xd=Zd.useEffect,Yd=(Zd.useContext,Zd.Fragment,Zd.RawHTML,function(e){var t=Vd(Kd(e.field),2),n=t[0],r=t[1],a=Vd(Kd({post_content:"",raw:{}}),2),i=(a[0],a[1]),o=Vd(Kd(Math.round(1e5*Math.random())),2),l=o[0];o[1];return Xd((function(){if(e.field&&e.field.id){var t=new CustomEvent("load_vibe_editor",{detail:{selector:".vibe_"+e.field.id+l+"_editor",content:e.field.hasOwnProperty("value")?e.field.value:"",raw:e.field.hasOwnProperty("raw")?e.field.raw:"",components:["editor"],updater:e.field.id+l}});document.dispatchEvent(t)}}),[e.field]),Xd((function(){e.field&&e.field.id&&document.addEventListener("vibe_editor_content_update_"+e.field.id+l,(function(t){i({post_content:t.detail.raw_html,raw:t.detail.editor_content});var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bd(Object(n),!0).forEach((function(t){Wd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.field);n.value=t.detail.raw_html,n.raw=t.detail.editor_content,r(n),e.update(n,e.fieldIndex,"fieldvaluechanged")}))}),[]),wp.element.createElement("div",{className:"vibev_editor"},wp.element.createElement("div",{className:"vibe_"+n.id+l+"_editor"},wp.element.createElement("textarea",{value:n.value})))});function Qd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ef(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qd(Object(n),!0).forEach((function(t){tf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var af=wp.element,of=(af.createElement,af.render,af.useState),lf=af.useEffect,cf=(af.useContext,af.Fragment,af.RawHTML,wp.data),sf=(cf.dispatch,cf.select),uf=function(e){var t=nf(of({}),2),n=t[0],r=t[1],a=nf(of(""),2),i=a[0],o=a[1],l=nf(of([]),2),c=l[0],s=l[1],u=nf(of({}),2),m=u[0],p=u[1],d=nf(of(!1),2),f=d[0],b=d[1],v=sf("vibebp").getUser();return v.token=sf("vibebp").getToken(),lf((function(){e.field&&e.field.hasOwnProperty("show_value")&&p(e.field.show_value),r(e.field)}),[e.field]),lf((function(){var t=ef({},n);m.id&&(t.value=m.id,t.show_value=m,r(t),e.update(t,e.fieldIndex,"fieldvaluechanged"))}),[m]),lf((function(){if(i.length>3){b(!0);var e="",t="";n.cpt&&(e=n.cpt,t="selectcpt"),n.post_type&&(e=n.post_type,t="selectcpt"),n.taxonomy&&(e=n.taxonomy,t="taxonomy"),fetch("".concat(window.vibebp.api.url,"/").concat(t,"/").concat(e,"?nocache"),{method:"post",body:JSON.stringify({search:i,token:v.token})}).then((function(e){return e.json()})).then((function(e){e.status&&Array.isArray(e.posts)&&(e.posts.map((function(e){localStorage.setItem("post_"+e.id,JSON.stringify(e))})),s(e.posts)),b(!1)}))}}),[i]),wp.element.createElement("div",{className:"selectcptfield"},wp.element.createElement("div",{className:"selectcptfield_list"},wp.element.createElement("div",{className:"selectcptfield_items"},m&&m.text?wp.element.createElement("span",{type:n.cpt,onClick:function(){p({})}},m.text):"")),wp.element.createElement("input",{type:"text",value:i,placeholder:window.vibebp.translations.type_keyword,onChange:function(e){o(e.target.value)}}),c.length?wp.element.createElement("div",{className:"search_results"},c.map((function(e,t){return wp.element.createElement("div",{className:"search_result selectcpt",onClick:function(){o("");var n=ef({},m);n=e,c.splice(t,1),p(n)}},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.text}}))}))):f?wp.element.createElement("div",{className:"search_results"},wp.element.createElement(ud,null)):"")};function mf(e){return function(e){if(Array.isArray(e))return vf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||bf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function df(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ff(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||bf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bf(e,t){if(e){if("string"==typeof e)return vf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vf(e,t):void 0}}function vf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wf=wp.element,yf=(wf.createElement,wf.render,wf.useState),gf=wf.useEffect,hf=(wf.useContext,wf.Fragment,wf.RawHTML,wp.data),_f=hf.dispatch,Ef=hf.select,Of=function(e){var t=ff(yf({}),2),n=t[0],r=t[1],a=ff(yf(""),2),i=a[0],o=a[1],l=ff(yf([]),2),c=l[0],s=l[1],u=ff(yf([]),2),m=u[0],p=u[1],d=ff(yf(!1),2),f=d[0],b=d[1],v=ff(yf(!1),2),w=v[0],y=v[1];return Ef("vibebp").getUser().token=Ef("vibebp").getToken(),gf((function(){e.field&&e.field.hasOwnProperty("show_value")&&p(e.field.show_value),r(e.field)}),[e.field]),gf((function(){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pf(Object(n),!0).forEach((function(t){df(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);if(m&&m.length){var a=[];m.map((function(e){a.push(e.id)})),t.value=a,t.show_value=m,r(t),e.update(t,e.fieldIndex,"fieldvaluechanged")}}),[m]),gf((function(){if(i.length>3){y(!0);var e="",t="";n.cpt&&(e=n.cpt,t="selectcpt"),n.taxonomy&&(e=n.taxonomy,t="taxonomy"),fetch("".concat(window.vibebp.api.url,"/").concat(t,"/").concat(e,"?nocache"),{headers:{Authorization:window.vibebp.token},method:"post",body:JSON.stringify({search:i,token:Ef("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status?Array.isArray(e.posts)&&(e.posts.map((function(e){localStorage.setItem("post_"+e.id,JSON.stringify(e))})),s(e.posts)):_f("vibebp").addNotification({text:e.message}),y(!1)}))}}),[i]),wp.element.createElement("div",{className:"selectcptfield"},wp.element.createElement("div",{className:"selectcptfield_list"},m.length?wp.element.createElement("div",{className:"selectcptfield_items"},m.map((function(e){var t=n.cpt?n.taxonomy:"";return wp.element.createElement("span",{type:t,onClick:function(){var t=mf(m);t.splice(ep(e,m),1),p(t)}},e.text)}))):"",f?wp.element.createElement("span",{className:"add_wrapper"},wp.element.createElement("input",{type:"text",value:i,placeholder:n.hasOwnProperty("placeholder")?n.placeholder:window.vibebp.translations.type_keyword,onChange:function(e){o(e.target.value)}}),wp.element.createElement("span",{onClick:function(){b(!f)},className:"vicon vicon-close"})):wp.element.createElement("span",{className:"add_wrapper",onClick:function(){b(!f)}},window.vibebp.translations.add,wp.element.createElement("span",{className:"vicon vicon-plus"}))),c.length?wp.element.createElement("div",{className:"search_results"},c.map((function(e,t){if(-1===ep(e,m))return wp.element.createElement("div",{className:"search_result selectcpt",onClick:function(){o("");var n=mf(m);-1===ep(e,n)&&(n.push(e),c.splice(t,1),p(n))}},wp.element.createElement("span",null,e.text))}))):w?wp.element.createElement("div",{className:"search_results"},wp.element.createElement(ud,null)):"")};function jf(e){return function(e){if(Array.isArray(e))return xf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Pf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Pf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pf(e,t){if(e){if("string"==typeof e)return xf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xf(e,t):void 0}}function xf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Af=wp.element,If=(Af.createElement,Af.render,Af.useState),Cf=Af.useEffect,Tf=(Af.useContext,Af.Fragment,Af.RawHTML,function(e){var t=kf(If({}),2),n=t[0],r=t[1],a=kf(If(""),2),i=(a[0],a[1]),o=kf(If([]),2),l=o[0],c=o[1],s=kf(If([]),2),u=s[0],m=s[1],p=kf(If(!1),2),d=p[0],f=p[1],b=kf(If(!1),2),v=b[0],w=b[1],y=kf(If(!1),2),g=y[0],h=y[1];Cf((function(){if(e.field.options.length&&0==g&&e.field.hasOwnProperty("value")&&e.field.value.length){var t=[];e.field.value.map((function(n,r){var a=e.field.options.findIndex((function(e){return n==e.value}));-1!==a&&t.push(e.field.options[a])})),m(t)}r(e.field),h(!0)}),[e.field]),Cf((function(){if(1==g){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sf(Object(n),!0).forEach((function(t){Nf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);if(u&&u.length){var a=[];u.map((function(e){a.push(e.value)})),t.value=a,t.show_value=u,r(t),e.update(t,e.fieldIndex,"fieldvaluechanged")}}}),[u]),Cf((function(){g&&(f(!0),c(n.options),f(!1))}),[g]);var _="search_results";return v&&(_="search_results active"),wp.element.createElement("div",{className:"selectcptfield multiselect"},wp.element.createElement("div",{className:"selectcptfield_list"},u.length?wp.element.createElement("div",{className:"selectcptfield_items"},u.map((function(e){var t=n.cpt?n.multiselect:"";return wp.element.createElement("span",{type:t,onClick:function(){var t=jf(u),n=jf(l);t.splice(ep(e,u,"value"),1),n.push(e),c(n),m(t)}},e.label)}))):""),wp.element.createElement("div",{className:"selectimitate",onClick:function(){w(!v)}},v?wp.element.createElement("i",{class:"vicon vicon-angle-up","aria-hidden":"true"}):wp.element.createElement("i",{class:"vicon vicon-angle-down","aria-hidden":"true"}),l.length?wp.element.createElement("div",{className:_},l.map((function(e,t){if(-1===ep(e,u,"value"))return wp.element.createElement("div",{className:"search_result selectcpt",onClick:function(){i("");var n=jf(u);-1===ep(e,n,"value")&&(n.push(e),l.splice(t,1),m(n))}},wp.element.createElement("span",null,e.label))}))):d?wp.element.createElement("div",{className:"search_results"},wp.element.createElement(ud,null)):""))});function Df(e){return function(e){if(Array.isArray(e))return Rf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Uf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Uf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Uf(e,t){if(e){if("string"==typeof e)return Rf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rf(e,t):void 0}}function Rf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ff=wp.element,Hf=(Ff.createElement,Ff.render,Ff.useState),qf=Ff.useEffect,$f=(Ff.useContext,Ff.Fragment,Ff.RawHTML,wp.data),zf=($f.dispatch,$f.select),Bf=function(e){var t=Jf(Hf({}),2),n=t[0],r=t[1],a=Jf(Hf(""),2),i=(a[0],a[1]),o=Jf(Hf([]),2),l=o[0],c=o[1],s=Jf(Hf([]),2),u=s[0],m=s[1],p=Jf(Hf(!1),2),d=(p[0],p[1]),f=Jf(Hf(!1),2),b=f[0],v=f[1],w=Jf(Hf(!1),2),y=w[0],g=w[1],h=zf("vibebp").getUser();return h.token=zf("vibebp").getToken(),qf((function(){r(e.field),g(!0)}),[e.field]),qf((function(){e.field.hasOwnProperty("value")&&l.length&&e.field.value.length&&m(l.filter((function(t){return e.field.value.indexOf(t.id)>-1})))}),[l]),qf((function(){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mf(Object(n),!0).forEach((function(t){Lf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);if(u&&u.length){var r=[];u.map((function(e){r.push(e.id)})),t.value=r,t.show_value=u,m(u),e.update(t,e.fieldIndex,"fieldvaluechanged")}}),[u]),qf((function(){d(!0);n.taxonomy&&n.taxonomy,fetch("".concat(window.vibebp.api.url,"/taxonomy/?force"),{headers:{Authorization:window.vibebp.token},method:"post",body:JSON.stringify({taxonomy:n.taxonomy,token:h.token})}).then((function(e){return e.json()})).then((function(e){e.status&&Array.isArray(e.posts)&&(e.posts.map((function(e){localStorage.setItem("post_"+e.id,JSON.stringify(e))})),c(e.posts)),d(!1)}))}),[y]),wp.element.createElement("div",{className:"taxonomy_field"},wp.element.createElement("div",{className:"selected_term_list_wrapper"},wp.element.createElement("div",{className:"selected_term_list"},u.map((function(e,t){var r=n.cpt?n.taxonomy:"";return"number"==typeof e.id?wp.element.createElement("div",{className:"term_select"},wp.element.createElement("span",{type:r,onClick:function(){var n=Df(u),r=Df(l);n.splice(t,1),r.push(e),c(r),m(n)}},e.text)):wp.element.createElement("div",{className:"term_select"},wp.element.createElement("input",{type:"text",value:u[t].id.split("new_")[1],placeholder:window.vibebp.translations.type_here,onChange:function(e){var n=Df(u);n[t]={id:"new_"+e.target.value},m(n)}}),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){var e=Df(u);t>-1&&e.splice(t,1),m(e)}}))})))),wp.element.createElement("div",{className:"term_select",onClick:function(){v(!b)}},wp.element.createElement("div",{class:"term_select_label"},n.label,b?wp.element.createElement("i",{class:"vicon vicon-angle-down","aria-hidden":"true"}):wp.element.createElement("i",{class:"vicon vicon-plus","aria-hidden":"true"})),b?wp.element.createElement("div",{className:"search_term_list"},wp.element.createElement("div",{className:"search_term",onClick:function(){var e=Df(u);e.push({id:"new_"}),m(e)}},wp.element.createElement("span",null,window.vibebp.translations.add_new)),l.length?l.map((function(e,t){if(-1===ep(e,u))return wp.element.createElement("div",{className:"search_term",onClick:function(){i("");var n=Df(u);-1===ep(e,n)&&(n.push(e),l.splice(t,1),m(n))}},wp.element.createElement("span",null,e.text))})):""):""))};function Wf(e){return function(e){if(Array.isArray(e))return Yf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Xf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vf(Object(n),!0).forEach((function(t){Zf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Xf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xf(e,t){if(e){if("string"==typeof e)return Yf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yf(e,t):void 0}}function Yf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qf=wp.element,eb=(Qf.createElement,Qf.render,Qf.useState),tb=(Qf.useEffect,Qf.Fragment),nb=(Qf.useContext,wp.data),rb=nb.dispatch,ab=nb.select,ib=function(e){var t=Kf(eb(!1),2),n=t[0],r=t[1],a=Kf(eb([]),2),i=a[0],o=a[1],l=Kf(eb([]),2),c=l[0],s=(l[1],Kf(eb(!1),2)),u=s[0],m=s[1],p=Kf(eb(!1),2),d=p[0],f=p[1],b=Kf(eb("media"),2),v=b[0],w=b[1],y=Kf(eb((function(){var t={posts_per_page:20,paged:1,search_terms:"",orderby:""};return e.hasOwnProperty("type")&&(t.post_mime_type=e.type),t})),2),g=y[0],h=y[1];!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Xm(Date.now());Ym((function(){var n=setTimeout((function(){Date.now()-r.current>=t&&(e(),r.current=Date.now())}),t-(Date.now()-r.current));return function(){clearTimeout(n)}}),[t].concat(Gm(n)))}((function(){r(!0),fetch("".concat(window.vibebp.api.url,"/user/fetch_media?force"),{method:"post",body:JSON.stringify(Gf(Gf({},g),{},{token:ab("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){if(r(!1),e.status)if(d){var t=Wf(i);e.data.map((function(e){t.push(e)})),o(t),f(!1),t.length<parseInt(e.total)?m(!0):m(!1)}else o(e.data),e.data.length<parseInt(e.total)?m(!0):m(!1)}))}),500,[g]);var _=function(t){e.share(t)},E=function(e){switch(e.type){case"image":return wp.element.createElement("img",{src:e.url,className:"content_to_html_image"});case"video":return wp.element.createElement("video",{controls:!0,src:e.url,className:"content_to_html_video"});case"audio":return wp.element.createElement("audio",{controls:!0,src:e.url,className:"content_to_html_audio"})}};return wp.element.createElement("div",{className:"vibe_editor_modal"},wp.element.createElement("div",{className:"modal-content"},wp.element.createElement("div",{className:"modal-header"},wp.element.createElement("div",null,wp.element.createElement("a",{className:"media"==v?"active":"",onClick:function(){"media"!=v&&w("media")}},window.vibebp.translations.select_media),wp.element.createElement("a",{className:"upload"==v?"active":"",onClick:function(){"upload"!=v&&w("upload")}},window.vibebp.translations.upload_media)),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(t){e.close(!1)}})),wp.element.createElement("div",{className:"modal-body"},"media"==v?wp.element.createElement(tb,null,wp.element.createElement("div",{className:"vibebp_form"},wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_text,onChange:function(e){return h(Gf(Gf({},g),{},{search_terms:e.target.value}))}})),wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("select",{onChange:function(e){h(Gf(Gf({},g),{},{order:e.target.value}))}},Object.keys(window.vibeEditor.media_order).map((function(e){return wp.element.createElement("option",{value:e},window.vibeEditor.media_order[e])}))))),n?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):i&&i.length?wp.element.createElement("div",{className:"allMedia"},i.map((function(t,n){return wp.element.createElement("div",{className:"single_media",onClick:function(n){_(t),e.close(!1)}},E(t))}))):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_media),u?wp.element.createElement("a",{className:"link",onClick:function(){h(Gf(Gf({},g),{},{paged:g.paged+1})),f(!0)}},window.vibebp.translations.more):""):"upload"===v?wp.element.createElement(tb,null,wp.element.createElement("div",{className:"upload_media"},wp.element.createElement("label",{for:"vibe_editor_upload_media"},window.vibebp.translations.upload_media),wp.element.createElement("input",{type:"file",id:"vibe_editor_upload_media",onChange:function(e){return function(e){if(e.target.files[0]){var t=new FormData;t.append("file",e.target.files[0]),t.append("body",JSON.stringify({token:ab("vibebp").getToken()})),fetch("".concat(window.vibebp.api.url,"/user/upload_media?upload&post"),{method:"post",body:t}).then((function(e){return e.json()})).then((function(e){if(e.status){var t=Wf(i);t.unshift(e.data),o(t),w("media")}else e.hasOwnProperty("message")&&rb("vibebp").addNotification({text:e.message})}))}}(e)}}),c&&c.length?wp.element.createElement("div",{className:"uploaded"},wp.element.createElement("strong",null,window.vibebp.translations.uploaded_media),wp.element.createElement("div",{className:"uploaded_files"},c.map((function(e,t){return wp.element.createElement("div",{className:"single_media",onClick:function(t){_(e)}},E(e))})))):"")):"")))};function ob(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ob(Object(n),!0).forEach((function(t){cb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ob(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ub(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ub(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ub(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mb=wp.element,pb=(mb.createElement,mb.render,mb.useState),db=mb.useEffect,fb=(mb.Fragment,mb.useContext,wp.data),bb=(fb.dispatch,fb.select,function(e){var t=sb(pb(!1),2),n=t[0],r=t[1],a=sb(pb({}),2),i=a[0],o=a[1],l=sb(pb([]),2);l[0],l[1];db((function(){e.hasOwnProperty("media")&&(e.field.value=e.media),o(e.field)}),[e.field]);return wp.element.createElement("div",{className:"media_wrapper"},i&&i.hasOwnProperty("value")&&i.value.hasOwnProperty("url")?wp.element.createElement("div",{className:"media_file"},wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){var t=lb({},i);t.value={},o(t),e.update(t,e.fieldIndex,"fieldvaluechanged")}}),function(){if(i.hasOwnProperty("value")&&i.value.hasOwnProperty("type"))switch(i.value.type){case"image":return wp.element.createElement("img",{src:i.value.url,className:"content_to_html_image"});case"video":return wp.element.createElement("video",{controls:!0,src:i.value.url,className:"content_to_html_video"});case"audio":return wp.element.createElement("audio",{controls:!0,src:i.value.url,className:"content_to_html_audio"});default:return i.value.hasOwnProperty("type")?wp.element.createElement("embed",{width:"200px",height:"300px",controls:!0,type:"application/pdf",src:i.value.url}):wp.element.createElement("embed",{width:"200px",height:"300px",controls:!0,src:i.value.url})}}()):"course_featured"==i.type?wp.element.createElement("div",{onClick:function(){r(!0)}},wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-image"},wp.element.createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),wp.element.createElement("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),wp.element.createElement("polyline",{points:"21 15 16 10 5 21"}))):"featured_video"==i.type?wp.element.createElement("div",{className:"featured_video",onClick:function(){r(!0)}},i.label,wp.element.createElement("span",{className:"vicon vicon-control-play"})):wp.element.createElement("div",{className:"vicon vicon-plus",onClick:function(){r(!0)}}),n?wp.element.createElement(ib,{type:e.type,close:function(){r(!1)},share:function(t){var n,r;n=t,(r=lb({},i)).value=n,o(r),e.update(r,e.fieldIndex,"fieldvaluechanged")}}):"")});function vb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hb=wp.element,_b=(hb.createElement,hb.render,hb.useState),Eb=hb.useEffect,Ob=(hb.Fragment,hb.useContext,wp.data),jb=(Ob.dispatch,Ob.select,function(e){var t=yb(_b({}),2),n=t[0],r=t[1],a=yb(_b([]),2);a[0],a[1];Eb((function(){r(e.field)}),[e.field]);var i=function(t,a,i){if("fieldvaluechanged"==i){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vb(Object(n),!0).forEach((function(t){wb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);o.hasOwnProperty("value")||(o.value=[]),t.value.hasOwnProperty("url")?o.value.push(t.value):o.value.splice(a,1),r(o),e.update(o,e.fieldIndex,"fieldvaluechanged")}};return wp.element.createElement("div",{className:"multimedia"},wp.element.createElement("div",{className:"attachment"},wp.element.createElement(bb,{field:{},fieldIndex:-1,update:i})),n.value&&n.value.length?wp.element.createElement("div",{className:"attachments"},n.value.map((function(e,t){return wp.element.createElement("div",{className:"attachment"},wp.element.createElement(bb,{field:{},media:e,fieldIndex:t,update:i}))}))):"")});function Sb(e){return(Sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nb(Object(n),!0).forEach((function(t){Pb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ab(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ab(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ab(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ib=wp.element,Cb=(Ib.createElement,Ib.render,Ib.useState),Tb=Ib.useEffect,Db=(Ib.useContext,Ib.Fragment,Ib.RawHTML,function(e){var t=xb(Cb(!1),2),n=t[0],r=t[1],a=xb(Cb({}),2),i=a[0],o=a[1];Tb((function(){var t=kb({},e.field);Qm(t.value)&&(t.value=kb({},t.default)),o(t)}),[e.field]);var l=function(t){var n=kb({},i);n.value=t,o(n),e.update(n,e.fieldIndex,"fieldvaluechanged")};return wp.element.createElement("div",{className:"duration_field_wrapper"},n?wp.element.createElement("div",{className:"duration_field"},wp.element.createElement("input",{type:"number",value:i.value&&i.value.hasOwnProperty("value")?i.value.value:"",onChange:function(e){return l(kb(kb({},i.value),{},{value:e.target.value}))},placeholder:window.vibebp.translations.duration_value}),wp.element.createElement("select",{value:i.value&&i.value.hasOwnProperty("parameter")?i.value.parameter:86400,onChange:function(e){l(kb(kb({},i.value),{},{parameter:e.target.value}))}},window.vibebp.duration.map((function(e){return wp.element.createElement("option",{value:e.value},e.label)}))),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){r(!n),i.value.hasOwnProperty("parameter")&&i.value.parameter||l(kb(kb({},i.value),{},{parameter:86400}))}})):Qm(i.value)?"number"==typeof i.default&&9999==i.default&&"object"==Sb(i.default)&&9999==i.default.value?wp.element.createElement("div",{className:"duration_field"},wp.element.createElement("span",null,window.vibebp.translations.unlimited_duration),wp.element.createElement("span",{className:"vicon vicon-pencil",onClick:function(){r(!0),l({value:9999,parameter:86400})}})):wp.element.createElement("div",{className:"duration_field"},wp.element.createElement("span",null,"object"==Sb(i.default)?wp.element.createElement("span",null,wp.element.createElement("span",null,i.default.value),wp.element.createElement("span",null,window.vibebp.duration[window.vibebp.duration.findIndex((function(e){return e.value==i.default.parameter}))].label)):wp.element.createElement("span",null,wp.element.createElement("span",null,i.default),wp.element.createElement("select",{onChange:function(e){l({value:i.default,parameter:e.target.value})}},window.vibebp.duration.map((function(e){return wp.element.createElement("option",{value:e.value},e.label)}))))),wp.element.createElement("span",{className:"vicon vicon-pencil",onClick:function(){return r(!0)}})):"object"==Sb(i.value)&&9999==i.value.value?wp.element.createElement("div",{className:"duration_field"},wp.element.createElement("span",null,window.vibebp.translations.unlimited_duration),wp.element.createElement("span",{className:"vicon vicon-pencil",onClick:function(){r(!0),l({value:9999,parameter:86400})}})):wp.element.createElement("div",{className:"duration_field"},wp.element.createElement("span",null,"object"==Sb(i.value)?wp.element.createElement("span",null,wp.element.createElement("span",null,i.value.value),wp.element.createElement("span",null,-1!==window.vibebp.duration.findIndex((function(e){return e.value==i.value.parameter}))?window.vibebp.duration[window.vibebp.duration.findIndex((function(e){return e.value==i.value.parameter}))].label:"")):wp.element.createElement("span",null,wp.element.createElement("span",null,i.value),wp.element.createElement("select",{onChange:function(e){l({value:i.default,parameter:e.target.value})}},window.vibebp.duration.map((function(e){return wp.element.createElement("option",{value:e.value},e.label)}))))),wp.element.createElement("span",{className:"vicon vicon-pencil",onClick:function(){return r(!0)}})))});function Mb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mb(Object(n),!0).forEach((function(t){Jb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ub(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rb(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fb=wp.element,Hb=(Fb.createElement,Fb.render,Fb.useState),qb=Fb.useEffect,$b=(Fb.useContext,Fb.Fragment),zb=(Fb.RawHTML,function(e){var t=Ub(Hb({}),2),n=t[0],r=t[1];qb((function(){r(e.field)}),[e.field]);var a=function(t,n,r){"fieldvaluechanged"==r&&(e.hasOwnProperty("ufieldIndex")?e.update({field:t,index:n,ufieldIndex:e.ufieldIndex},"fieldvaluechanged"):e.update({field:t,index:n},"fieldvaluechanged")),"curriculumchanged"==r&&e.update({field:t,cindex:n},"curriculumchanged")};qb((function(){e.field&&e.field.id&&document.addEventListener("wplms_custom_field_value_changed",(function(e){e.hasOwnProperty("detail")&&a(e.detail.field,e.detail.index,e.detail.action)}))}),[]);return wp.element.createElement($b,null,void 0!==n?wp.element.createElement("div",{className:"field_wrapper field_"+n.type+" field_"+n.id},wp.element.createElement("span",null,n.label&&"course_featured"!=n.type&&"next_button"!=n.type&&"prev_button"!=n.type&&"taxonomy"!=n.type&&"featured_video"!=n.type&&"group"!=n.type&&"forum"!=n.type?wp.element.createElement("label",null,n.label,n.desc?wp.element.createElement("a",{className:"tip",title:n.desc},wp.element.createElement("i",{className:"vicon vicon-help-alt"})):""):"",n.text?wp.element.createElement("strong",null,n.text):""),wp.element.createElement("div",{className:"field_value"},function(t,n,i){switch(t.type){case"title":return wp.element.createElement(Title,{field:t,fieldIndex:n,tabIndex:i,update:a});case"taxonomy":return wp.element.createElement(Bf,{field:t,fieldIndex:n,tabIndex:i,update:a});case"course_featured":case"featured_image":return wp.element.createElement(bb,{field:t,type:"image",fieldIndex:n,tabIndex:i,update:a});case"featured_video":return wp.element.createElement(bb,{field:t,type:"video",fieldIndex:n,tabIndex:i,update:a});case"textarea":return wp.element.createElement(Vm,{field:t,fieldIndex:n,tabIndex:i,update:a});case"editor":return wp.element.createElement(Yd,{field:t,fieldIndex:n,tabIndex:i,update:a});case"unlimited_number":return wp.element.createElement(up,{field:t,fieldIndex:n,tabIndex:i,update:a});case"number":return wp.element.createElement(gp,{field:t,fieldIndex:n,tabIndex:i,update:a});case"duration":return wp.element.createElement(Db,{field:t,fieldIndex:n,tabIndex:i,update:a});case"radio":return wp.element.createElement("div",{className:"radio_group"},t.options.length?wp.element.createElement($b,null,t.options.map((function(e,i){return wp.element.createElement("div",{class:"radio_wrapper"},wp.element.createElement("div",{class:"switch"},wp.element.createElement("input",{type:"radio",selected:t.value==e.value,onChange:function(i){a(Lb(Lb({},t),{},{value:e.value}),n,"fieldvaluechanged"),r(Lb(Lb({},t),{},{value:e.value}))},id:t.id+"_"+i,name:t.id,value:e.value,checked:t.value==e.value&&"checked"}),wp.element.createElement("label",{class:"slider",for:t.id+"_"+i})),wp.element.createElement("label",null,e.label))}))):"");case"checkbox":return wp.element.createElement("div",{className:"radio_group"},t.options.length?wp.element.createElement($b,null,t.options.map((function(e,r){return wp.element.createElement("div",{className:"checkbox_wrapper"},wp.element.createElement("div",{className:"switch"},wp.element.createElement("input",{type:"checkbox",onChange:function(r){var i=Lb({},t);i.hasOwnProperty("value")&&i.value.length||(i.value=[]),i.value.indexOf(e.value)>-1?i.value.splice(i.value.indexOf(e.value),1):i.value.push(e.value),a(i,n,"fieldvaluechanged")},id:t.id+"_"+r,name:t.id,value:e.value,checked:!!(Array.isArray(t.value)&&t.value.indexOf(e.value)>-1)&&"checked"}),wp.element.createElement("label",{class:"slider",for:t.id+"_"+r})),wp.element.createElement("label",null,e.label))}))):"");case"select":return wp.element.createElement(Mp,{field:t,fieldIndex:n,tabIndex:i,update:a});case"selectmulticpt":case"courses":return wp.element.createElement(Of,{field:t,fieldIndex:n,tabIndex:i,update:a});case"off_schedule":case"multiselect":return wp.element.createElement(Tf,{field:t,fieldIndex:n,tabIndex:i,update:a});case"showhide":case"switch":case"yesno":case"conditionalswitch":case"reverseconditionalswitch":return wp.element.createElement(Rm,{field:t,fieldIndex:n,tabIndex:i,update:a});case"selectcpt":return wp.element.createElement(uf,{field:t,fieldIndex:n,tabIndex:i,update:a});case"text":return wp.element.createElement(kp,{field:t,fieldIndex:n,tabIndex:i,update:a});case"media":return wp.element.createElement(bb,{field:t,type:"image",fieldIndex:n,tabIndex:i,update:a});case"multiattachments":return wp.element.createElement(jb,{field:t,type:"image",fieldIndex:n,tabIndex:i,update:a});case"time":return wp.element.createElement(cd,{field:t,fieldIndex:n,tabIndex:i,update:a});case"date":return wp.element.createElement(zp,{field:t,fieldIndex:n,tabIndex:i,update:a});case"group":return wp.element.createElement(Groups,{ufieldIndex:e.ufieldIndex,field:t,fieldIndex:n,cindex:e.cindex,tabIndex:i,update:a});case"forum":return wp.element.createElement(Forums,{ufieldIndex:e.ufieldIndex,field:t,fieldIndex:n,cindex:e.cindex,tabIndex:i,update:a});case"repeatable":case"repeatable_count":return wp.element.createElement(zd,{ufieldIndex:e.ufieldIndex,field:t,fieldIndex:n,cindex:e.cindex,tabIndex:i,update:a});case"product":case"selectproduct":return wp.element.createElement(Md,{ufieldIndex:e.ufieldIndex,field:t,fieldIndex:n,cindex:e.cindex,tabIndex:i,update:a,group:e.group});default:var o=new CustomEvent("wplms_batches_custom_field",{detail:{field:t,index:n}});if(document.dispatchEvent(o),t&&t.hasOwnProperty("id"))return wp.element.createElement("div",{id:"wplms_batches_custom_field_"+t.id})}return""}(n,e.fieldIndex,e.tabIndex))):"")});function Bb(e){return function(e){if(Array.isArray(e))return Xb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Kb(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wb(Object(n),!0).forEach((function(t){Gb(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Kb(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kb(e,t){if(e){if("string"==typeof e)return Xb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xb(e,t):void 0}}function Xb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yb=wp.element,Qb=(Yb.createElement,Yb.useState),ev=Yb.useEffect,tv=Yb.Fragment,nv=(Yb.render,wp.data),rv=(nv.dispatch,nv.select),av=function(e){var t=Zb(Qb(!1),2),n=t[0],r=t[1],a=Zb(Qb({avatar:{url:"",cropdata:""},name:"",description:"",status:"public",invite_status:"members",group_type:"",invitees:[],meta:[]}),2),i=a[0],o=a[1],l=Zb(Qb(""),2),c=l[0],s=l[1],m=Zb(Qb(""),2),p=m[0],d=m[1],f=Zb(Qb([]),2),b=f[0],v=f[1],w=Zb(Qb(!1),2),y=w[0],g=w[1],h=Zb(Qb(!0),2),_=h[0],E=h[1],O=Zb(Qb(!1),2),j=(O[0],O[1]),S=Zb(Qb(!1),2),N=S[0],k=(S[1],Zb(Qb([]),2)),P=(k[0],k[1]),x=Zb(Qb(null),2),A=x[0],I=x[1],C=Zb(Qb(null),2),T=C[0],D=C[1],M=Zb(Qb([]),2),L=M[0],J=M[1],U=Zb(Qb(!1),2),R=U[0],F=U[1],H=Zb(Qb(null),2),q=H[0],$=H[1],z=Zb(Qb(null),2),B=z[0],W=z[1],V=Zb(Qb(null),2),G=V[0],Z=V[1],K=Zb(Qb(null),2),X=K[0],Y=K[1],Q=Zb(Qb(null),2),ee=Q[0],te=Q[1];ev((function(){localforage.setItem("fixedToolbar",1)}),[]),ev((function(){var t=new CustomEvent("load_vibe_editor",{detail:{selector:".vibe_group_desc_editor",content:e.hasOwnProperty("group")&&e.group.description?e.group.description:"",raw:e.hasOwnProperty("group")&&e.group.description_raw?e.group.description_raw:"",components:["editor"],updater:"vibe_group_desc"}});document.dispatchEvent(t)}),[]),ev((function(){document.addEventListener("vibe_editor_content_update_vibe_group_desc",ne)}),[]);var ne=function(e){D({post_content:e.detail.raw_html,raw:e.detail.editor_content})};ev((function(){if(e.hasOwnProperty("group")){var t={url:e.group.avatar,cropdata:""};e.group.avatar.length&&E(!1),o(Vb(Vb({},i),{},{id:e.group.id,name:e.group.name,description:e.group.description,status:e.group.status,avatar:t,invite_status:e.group.hasOwnProperty("invite_status")?e.group.invite_status:"members"}))}F(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/fetchcustomfields?force"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({group_id:e.hasOwnProperty("group")&&e.group&&e.group.id?e.group.id:null,token:rv("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){if(F(!1),t.hasOwnProperty("fields")&&t.fields.length){J(t.fields);var n=Vb({},i);if(t.fields.map((function(e,t){e.value?n.meta.push({meta_key:e.id,meta_value:e.value}):n.meta.push({meta_key:e.id,meta_value:null})})),e.hasOwnProperty("group")){var r={url:e.group.avatar,cropdata:""};e.group.avatar.length&&E(!1),o(Vb(Vb({},n),{},{id:e.group.id,name:e.group.name,description:e.group.description,status:e.group.status,avatar:r}))}else o(n)}}))}),[e.group]),u((function(){if(window.helpdesk&&N.length>4){A&&A.abort();var e={},t=new AbortController;A&&(e={signal:t.signal}),I(t),j(!0),fetch("".concat(window.helpdesk.api.url,"/bbp/forums?nocache"),Vb(Vb({method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{}},e),{},{body:JSON.stringify({s:N,token:rv("vibebp").getToken()})})).then((function(e){return e.json()})).then((function(e){j(!1),P(e.data)}))}}),500,[N]),u((function(){if(p.length>3){g(!0),A&&A.abort();var e={},t=new AbortController;A&&(e={signal:t.signal}),I(t),fetch("".concat(window.vibebp.api.url,"/search?nocache"),Vb(Vb({method:"post"},e),{},{body:JSON.stringify({search:p,type:"user",token:rv("vibebp").getToken()})})).then((function(e){return e.json()})).then((function(e){e.status&&(g(!1),Array.isArray(e.results)&&(e.results.map((function(e){localforage.setItem("user_"+e.id,JSON.stringify(e))})),v(e.results)))}))}}),500,[p]);var re="button is-fullwidth is-primary is-rounded";n&&(re+=" is-loading");var ae=!0;e.hasOwnProperty("meta")&&e.meta.hasOwnProperty("can_invite")&&!e.meta.can_invite&&(ae=!1);var ie=function(e,t){Vb({},i);if(e.hasOwnProperty("index"))if(console.log(e),"editor"==e.field.type){var n=L.filter((function(e){return"editor"==e.type})).findIndex((function(t){return t.id==e.field.id}));0==n&&$(e.field),1==n&&W(e.field),2==n&&Z(e.field),3==n&&Y(e.field),4==n&&te(e.field)}else{var r=Bb(L);r[e.index]=e.field,J(r);var a=Vb({},i),l=a.meta.findIndex((function(t){return t.meta_key==e.field.id}));l>-1?a.meta[l].meta_value=e.field.value:a.meta.push({meta_key:e.field.id,meta_value:e.field.value}),o(a)}};return wp.element.createElement("div",{className:"vibebp_create_group create_form"},wp.element.createElement("div",{className:"create_form_head"},wp.element.createElement("div",{className:"left_side"},wp.element.createElement("i",{className:"vicon vicon-arrow-left",onClick:function(){e.newgroup(!1)}})),wp.element.createElement("div",{className:"right_side"})),wp.element.createElement("div",{className:"group_creation_steps"},wp.element.createElement("div",{className:"group_step"},wp.element.createElement("div",{className:"group_avatar"},i.avatar.url.length&&!_?wp.element.createElement(tv,null,wp.element.createElement("img",{src:i.avatar.url}),wp.element.createElement("div",{onClick:function(){E(!0)},className:"vicon vicon-image"})):wp.element.createElement(tv,null,wp.element.createElement(aa,{type:"image",crop:"1",show:function(){return E(!1)},update:function(e,t){s(e);var n=Vb({},i);n.avatar.cropdata=t,o(n)}}),wp.element.createElement("div",{onClick:function(){E(!1)},className:"vicon vicon-image"}))),wp.element.createElement("div",{className:"group_creation_step vibebp_form"},wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_name),wp.element.createElement("input",{type:"text",value:i.name,onChange:function(e){o(Vb(Vb({},i),{},{name:e.target.value}))}})),wp.element.createElement("div",{className:"group_description vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_description),wp.element.createElement("div",{className:"vibe_group_desc_editor"},wp.element.createElement("textarea",{onChange:function(e){o(Vb(Vb({},i),{},{description:e.target.value})),D(Vb(Vb({},T),{},{post_content:e.target.value}))},value:i.description}))))),wp.element.createElement("div",{className:"group_step vibebp_form"},Object.keys(window.vibebp.components.groups.type).length&&window.vibebp.components.groups.hasOwnProperty("type")?wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_type),wp.element.createElement("select",{onChange:function(e){o(Vb(Vb({},i),{},{group_type:e.target.value}))},value:i.group_type},wp.element.createElement("option",null,window.vibebp.translations.select_group_type),Object.keys(window.vibebp.components.groups.type).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.type[e])})))):"",wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_status),wp.element.createElement("select",{onChange:function(e){o(Vb(Vb({},i),{},{status:e.target.value}))},value:i.status},Object.keys(window.vibebp.components.groups.status).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.status[e])})))),wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_invitations),wp.element.createElement("select",{onChange:function(e){o(Vb(Vb({},i),{},{invite_status:e.target.value}))},value:i.invite_status},Object.keys(window.vibebp.components.groups.invite_status).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.invite_status[e])})))),window.hasOwnProperty("wplmsschool")?wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.group_is_classroom),wp.element.createElement("div",{className:"switch"},i.meta.findIndex((function(e){return"is_classroom"==e.meta_key}))>-1&&i.meta[i.meta.findIndex((function(e){return"is_classroom"==e.meta_key}))].meta_value?wp.element.createElement("input",{type:"checkbox",id:"is_classroom",checked:!0,onClick:function(){var e=Vb({},i),t=i.meta.findIndex((function(e){return"is_classroom"==e.meta_key}));t>-1&&e.meta.splice(t,1),e.meta.push({meta_key:"is_classroom",meta_value:!1}),o(e)}}):wp.element.createElement("input",{type:"checkbox",id:"is_classroom",onClick:function(){var e=Vb({},i),t=i.meta.findIndex((function(e){return"is_classroom"==e.meta_key}));t>-1&&e.meta.splice(t,1),e.meta.push({meta_key:"is_classroom",meta_value:!0}),o(e)}}),wp.element.createElement("label",{for:"is_classroom",className:"slider"}))):""),wp.element.createElement("div",{className:"group_step vibebp_form"},R?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):L.length?L.map((function(t,n){return wp.element.createElement(zb,{field:t,fieldIndex:n,group:e.group,update:ie})})):""),ae?wp.element.createElement("div",{className:"vibebp_form"},wp.element.createElement("div",{className:"group_name vibebp_form_field"},wp.element.createElement("div",{className:"recipients"},wp.element.createElement("label",null,window.vibebp.translations.invite_members),wp.element.createElement("div",{className:"recipients_list"},wp.element.createElement("div",{className:"recipient_items"},i.invitees.map((function(e){return wp.element.createElement(Bn,{type:"user",click:function(){var t=Vb({},i);t.invitees.splice(t.invitees.indexOf(e),1),o(t)},id:{user_id:e}})}))),wp.element.createElement("div",{className:y?"control is-loading":"control"},wp.element.createElement("input",{type:"text",value:p,placeholder:window.vibebp.translations.search_member,onChange:function(e){d(e.target.value)}}))),b.length?wp.element.createElement("div",{className:"search_results"},b.map((function(e,t){return wp.element.createElement("div",{className:"search_result user",onClick:function(){d("");var n=Bb(b),r=Vb({},i);-1===r.invitees.indexOf(e.id)&&(r.invitees.push(e.id),o(r),n.splice(t,1),v(n))}},wp.element.createElement("img",{src:e.avatar}),wp.element.createElement("span",null,e.name))}))):""))):"",wp.element.createElement("a",{onClick:function(){r(!0);var t=Vb(Vb({},i),{},{description:T.post_content,description_raw:T.raw,editors:[q,B,G,X,ee],token:rv("vibebp").getToken()}),n=new FormData;n.append("body",JSON.stringify(t)),n.append("file",c[0]),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/create_update_group?upload"),{method:"post",body:n}).then((function(e){return e.json()})).then((function(t){r(!1),t.status&&e.newgroup(t.data)}))},className:re},window.vibebp.translations.create_group)))},iv=wp.element.Fragment,ov=function(e){var t=e.items,n=e.update,r=e.access;return wp.element.createElement(iv,null,t&&t.length?wp.element.createElement("div",{className:"corousel_items Gallery_items_".concat(t.length)},t.map((function(e,t){var a=e.meta_id,i=e.meta_value;return wp.element.createElement("div",{className:"corousel_item",key:a},wp.element.createElement("img",{src:i.url}),r.can_add_members?wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){return n(t)}}):"")}))):"")};function lv(e){return function(e){if(Array.isArray(e))return dv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||pv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cv(Object(n),!0).forEach((function(t){uv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||pv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pv(e,t){if(e){if("string"==typeof e)return dv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dv(e,t):void 0}}function dv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fv=wp.element,bv=fv.useState,vv=fv.useEffect,wv=fv.Fragment,yv=wp.data,gv=yv.dispatch,hv=yv.select,_v=function(e){var t=mv(bv({delete:!1,data:!1,save:!1}),2),n=t[0],r=t[1],a=mv(bv(!1),2),i=a[0],o=a[1],l=mv(bv(e.Gallery),2),c=l[0],s=l[1],u=mv(bv(!1),2),m=u[0],p=u[1],d=mv(bv([]),2),f=d[0],b=d[1],v=mv(bv(!1),2),w=v[0],y=v[1];vv((function(){s(e.Gallery)}),[e.Gallery]),vv((function(){r(sv(sv({},n),{},{data:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/gallery?force"),{method:"post",body:JSON.stringify({group_id:e.group_id,meta_id:c.meta_id,token:hv("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(sv(sv({},n),{},{data:!1})),e.status&&e.data&&b(e.data)})).catch((function(e){r(sv(sv({},n),{},{data:!0}))}))}),[c.meta_id]);return wp.element.createElement("div",{className:"portal group_side_bar_component __single_gallery"},wp.element.createElement("div",{className:"single_gallery_title"},e.access.can_add_members?wp.element.createElement(wv,null,i?wp.element.createElement("div",{className:"__create_form"},wp.element.createElement("div",{class:"input_field_wrapper"},wp.element.createElement("input",{value:c.meta_value,onChange:function(e){return s(sv(sv({},c),{},{meta_value:e.target.value}))},placeholder:window.vibebp.translations.gallery_title})),wp.element.createElement("div",{className:"__create_form_actions"},wp.element.createElement("a",{className:"button is-primary full".concat(n.edit?"is-loading":""),onClick:function(){r(sv(sv({},n),{},{edit:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/galleries/action?force"),{method:"post",body:JSON.stringify(sv(sv({},c),{},{group_id:e.group_id,action:"edit",token:hv("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(t){r(sv(sv({},n),{},{edit:!1})),o(!1),t.status&&t.data&&e.update(t.data,"edit"),t.hasOwnProperty("message")&&gv("vibebp").addNotification({text:t.message})})).catch((function(e){r(sv(sv({},n),{},{edit:!1}))}))}},window.vibebp.translations.save_changes),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(e){return o(!1)}}))):wp.element.createElement("div",{className:"gallery_title"},c.meta_value),wp.element.createElement("div",{className:"__actions"},wp.element.createElement("a",{className:"vicon vicon-more",onClick:function(e){return p(!m)}}),m?wp.element.createElement("div",{class:"action_container"},e.access.can_add_members?wp.element.createElement("span",{onClick:function(e){return y(!w)}},window.vibebp.translations.upload):"",wp.element.createElement("span",{onClick:function(e){return o(!i)}},window.vibebp.translations.edit),wp.element.createElement("span",{onClick:function(){r(sv(sv({},n),{},{delete:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/galleries/action?force"),{method:"post",body:JSON.stringify(sv(sv({},c),{},{group_id:e.group_id,action:"delete",token:hv("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(t){r(sv(sv({},n),{},{delete:!1})),t.status&&t.data&&e.update(t.data,"delete"),t.hasOwnProperty("message")&&gv("vibebp").addNotification({text:t.message})})).catch((function(e){r(sv(sv({},n),{},{delete:!0}))}))}},n.delete?"...":window.vibebp.translations.delete)):"")):wp.element.createElement("div",{className:"gallery_title"},c.meta_value)),wp.element.createElement("div",{className:"item_uploader_viewer"},w?wp.element.createElement(ib,{type:"image",close:function(){y(!1)},share:function(e){var t={meta_id:e.id,meta_value:{id:e.id,url:e.url}};b([t].concat(lv(f)))}}):"",wp.element.createElement("div",{className:"item_view"},wp.element.createElement(ov,{access:e.access,items:f,update:function(e){var t=lv(f);t.splice(e,1),b(t)}}),!n.data&&e.access.can_add_members?wp.element.createElement("a",{className:"button is-primary full ".concat(n.save?"is-loading":""),onClick:function(){r(sv(sv({},n),{},{save:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/gallery/save?force"),{method:"post",body:JSON.stringify({items:f.map((function(e){return parseInt(e.meta_value.id)})),group_id:e.group_id,meta_id:c.meta_id,token:hv("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(sv(sv({},n),{},{save:!1})),e.hasOwnProperty("message")&&gv("vibebp").addNotification({text:e.message})})).catch((function(e){r(sv(sv({},n),{},{save:!1}))}))}},wp.element.createElement("span",{className:"vicon vicon-save"}),window.vibebp.translations.save_changes):"")),n.data?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"")};function Ev(e){return function(e){if(Array.isArray(e))return Pv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||kv(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ov(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ov(Object(n),!0).forEach((function(t){Sv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ov(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||kv(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kv(e,t){if(e){if("string"==typeof e)return Pv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pv(e,t):void 0}}function Pv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xv=wp.element,Av=(xv.createElement,xv.useState),Iv=xv.useEffect,Cv=xv.Fragment,Tv=(xv.render,wp.data),Dv=(Tv.dispatch,Tv.select),Mv=function(e){var t=Nv(Av([]),2),n=t[0],r=t[1],a=Nv(Av({data:!1,create:!1,access:!1}),2),i=a[0],o=a[1],l=Nv(Av(""),2),c=l[0],s=l[1],u=Nv(Av(e.access),2),m=u[0],p=(u[1],Nv(Av(!1),2)),d=p[0],f=p[1];Iv((function(){o(jv(jv({},i),{},{data:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/galleries?force"),{method:"post",body:JSON.stringify({group_id:e.id,token:Dv("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){o(jv(jv({},i),{},{data:!1})),e.status&&e.data&&r(e.data)})).catch((function(e){o(jv(jv({},i),{},{data:!0}))}))}),[e.id]);var b=function(e,t){r((function(n){switch(t){case"edit":n.splice(n.findIndex((function(t){return t.meta_id===e.meta_id})),1,e);break;case"delete":n.splice(n.findIndex((function(t){return t.meta_id===e.meta_id})),1)}return n}))};return wp.element.createElement(Cv,null,m.can_add_members?wp.element.createElement("div",{className:"portal galleries_wrapper group_side_bar_component"},wp.element.createElement("h3",{className:"component_title"},window.vibebp.translations.galleries),d?wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{class:"input_field_wrapper"},wp.element.createElement("input",{value:c,onChange:function(e){return s(e.target.value)},placeholder:window.vibebp.translations.gallery_title})),c?wp.element.createElement(Cv,null,wp.element.createElement("button",{className:"button is-primary full ".concat(i.create?"is-loading":""),onClick:function(){o(jv(jv({},i),{},{create:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/galleries/action?force"),{method:"post",body:JSON.stringify({action:"create",group_id:e.id,meta_value:c,token:Dv("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){o(jv(jv({},i),{},{create:!1})),f(!1),e.status&&(s(""),r([e.data].concat(Ev(n))))})).catch((function(e){o(jv(jv({},i),{},{create:!1}))}))}},window.vibebp.translations.add_gallery),wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(e){return f(!1)}})):wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(e){return f(!1)}})):wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("a",{className:"button is-primary full",onClick:function(){return f(!0)}},window.vibebp.translations.add_gallery)),i.data?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):""):wp.element.createElement("div",{className:"portal"},i.data?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):""),n.length?n.map((function(t){return wp.element.createElement(_v,{group_id:e.id,key:t.meta_id,Gallery:t,update:b,access:m})})):"")};function Lv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lv(Object(n),!0).forEach((function(t){Uv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fv(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hv=wp.element,qv=Hv.useState,$v=Hv.useEffect,zv=Hv.Fragment,Bv=wp.data,Wv=Bv.dispatch,Vv=Bv.select,Gv=function(e){var t=Rv(qv({delete:!1}),2),n=t[0],r=t[1],a=Rv(qv(!1),2),i=a[0],o=a[1],l=Rv(qv(e.announcement),2),c=l[0],s=l[1],u=Rv(qv(!1),2),m=u[0],p=u[1],d=Rv(qv(!1),2),f=d[0],b=d[1];$v((function(){s(e.announcement)}),[e.announcement]);return wp.element.createElement("div",{className:"__single __single_announcement"},e.access.can_add_members?wp.element.createElement(zv,null,i?wp.element.createElement("div",{className:"__create_form"},wp.element.createElement("textarea",{value:c.meta_value,onChange:function(e){return s(Jv(Jv({},c),{},{meta_value:e.target.value}))}}),wp.element.createElement("div",{className:"__create_form_actions"},wp.element.createElement("a",{className:"button is-primary full".concat(n.edit?"is-loading":""),onClick:function(){r(Jv(Jv({},n),{},{edit:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/announcements/action?force"),{method:"post",body:JSON.stringify(Jv(Jv({},c),{},{group_id:e.group_id,action:"edit",token:Vv("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(t){r(Jv(Jv({},n),{},{edit:!1})),o(!1),t.status&&t.data&&e.update(t.data,"edit"),t.hasOwnProperty("message")&&Wv("vibebp").addNotification({text:t.message})})).catch((function(e){r(Jv(Jv({},n),{},{edit:!1}))}))}},window.vibebp.translations.save_changes),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(e){o(!1)}}))):wp.element.createElement("div",{className:"__desc"},c.meta_value,c.meta_value.length>300?wp.element.createElement("span",{onClick:function(e){return b(!0)}},window.vibebp.translations.show_more):""),wp.element.createElement("div",{className:"__actions"},wp.element.createElement("a",{className:"vicon vicon-more",onClick:function(e){return p(!m)}}),m?wp.element.createElement("div",{class:"action_container"},wp.element.createElement("span",{onClick:function(e){return o(!i)}},window.vibebp.translations.edit),wp.element.createElement("span",{onClick:function(){r(Jv(Jv({},n),{},{delete:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/announcements/action?force"),{method:"post",body:JSON.stringify(Jv(Jv({},c),{},{group_id:e.group_id,action:"delete",token:Vv("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(t){r(Jv(Jv({},n),{},{delete:!1})),t.status&&t.data&&e.update(t.data,"delete"),t.hasOwnProperty("message")&&Wv("vibebp").addNotification({text:t.message})})).catch((function(e){r(Jv(Jv({},n),{},{delete:!1}))}))}},n.delete?"...":window.vibebp.translations.delete)):"")):wp.element.createElement("div",{className:"__desc",dangerouslySetInnerHTML:{__html:c.meta_value}}),wp.element.createElement(ia,{open:f,onClose:function(){return b(!1)}},wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:c.meta_value}})))};function Zv(e){return function(e){if(Array.isArray(e))return tw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ew(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kv(Object(n),!0).forEach((function(t){Yv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||ew(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ew(e,t){if(e){if("string"==typeof e)return tw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tw(e,t):void 0}}function tw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var nw=wp.element,rw=nw.useState,aw=nw.useEffect,iw=nw.Fragment,ow=wp.data.select,lw=function(e){var t=Qv(rw([]),2),n=t[0],r=t[1],a=Qv(rw({data:!1,create:!1,access:!1}),2),i=a[0],o=a[1],l=Qv(rw(""),2),c=l[0],s=l[1],u=Qv(rw(e.access),2),m=u[0],p=(u[1],Qv(rw(!1),2)),d=p[0],f=p[1],b=Qv(rw(0),2),v=b[0],w=b[1];aw((function(){o(Xv(Xv({},i),{},{data:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/announcements?force"),{method:"post",body:JSON.stringify({meta_value:c,group_id:e.id,action:"create",token:ow("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){o(Xv(Xv({},i),{},{data:!1})),e.status&&e.data&&r(e.data)})).catch((function(e){o(Xv(Xv({},i),{},{data:!1}))}))}),[e.id]);var y=function(e,t){r((function(n){switch(t){case"edit":n.splice(n.findIndex((function(t){return t.meta_id===e.meta_id})),1,e);break;case"delete":n.splice(n.findIndex((function(t){return t.meta_id===e.meta_id})),1)}return n}))};return wp.element.createElement("div",{className:"portal announcements_wrapper group_side_bar_component"},wp.element.createElement("h3",{className:"component_title"},window.vibebp.translations.announcements,wp.element.createElement("a",{className:"button is-primary full",onClick:function(){return f(!d)},title:window.vibebp.translations.add_announcement},wp.element.createElement("span",{className:d?"vicon vicon-close":"vicon vicon-plus"}))),m.can_add_members&&d?wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("textarea",{value:c,onChange:function(e){return s(e.target.value)},placeholder:window.vibebp.translations.announcement_title}),wp.element.createElement("button",{className:"button is-primary full ".concat(i.create?"is-loading":""),onClick:function(){o(Xv(Xv({},i),{},{create:!0})),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/announcements/action?force"),{method:"post",body:JSON.stringify({meta_value:c,action:"create",group_id:e.id,token:ow("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){o(Xv(Xv({},i),{},{create:!1})),e.status&&(f(!1),s(""),r([e.data].concat(Zv(n))))})).catch((function(e){o(Xv(Xv({},i),{},{create:!1}))}))}},window.vibebp.translations.add_announcement)):"",wp.element.createElement("div",{className:"portal_body"},n.length?wp.element.createElement("div",{className:"__all"},wp.element.createElement("div",{className:"all_announcements_wrapper"},n.map((function(t,n){return wp.element.createElement(iw,null,wp.element.createElement("input",{type:"radio",id:"announcement_".concat(n),name:"announcement_".concat(n),value:n,checked:n==v?"checked":""}),wp.element.createElement("div",{className:"announcement_wrapper"},wp.element.createElement(Gv,{group_id:e.id,key:t.meta_id,announcement:t,update:y,access:m})))}))),wp.element.createElement("div",{className:"announcement_dots_wrapper"},n.map((function(e,t){return wp.element.createElement("label",{class:v===t?"active":"",for:"announcement_".concat(t),onClick:function(e){return w(t)}})})))):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_announcements)),i.data?wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"")};function cw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var uw=wp.element,mw=(uw.createElement,uw.useState),pw=uw.useEffect,dw=uw.Fragment,fw=(uw.render,wp.data),bw=fw.dispatch,vw=fw.select,ww=function(e){var t=cw(mw(!0),2),n=t[0],r=t[1],a=cw(mw(null),2),i=a[0],o=a[1],l=cw(mw(!1),2),c=l[0],s=l[1],u=cw(mw(!1),2),m=u[0],p=u[1],d=cw(mw(null),2),f=d[0],b=d[1];pw((function(){r(!0),fetch("".concat(window.vibebp.api.url,"/groups/group?client_id=").concat(window.vibebp.settings.client_id,"&force"),{method:"post",body:JSON.stringify({id:e.id,token:vw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){o(e),r(!1)})),fetch("".concat(window.vibebp.api.url,"/groups/group/is_member?client_id=").concat(window.vibebp.settings.client_id,"&force"),{method:"post",body:JSON.stringify({group_id:e.id,token:vw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){b(e.status)}))}),[e.id]);return wp.element.createElement("div",{className:"single_item_popup"},wp.element.createElement("div",{className:"header"},null!==f?f?wp.element.createElement("div",{className:"actions"},wp.element.createElement("a",{onClick:function(){s(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/member_actions?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({action:"leave_group",members:[vw("vibebp").getUser().id],group_id:e.id,token:vw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&b(!1),e.hasOwnProperty("message")&&bw("vibebp").addNotification({text:e.message}),s(!1)}))},className:c?"small button is-primary is-loading":"small button is-primary"},c?"":window.vibebp.translations.leave_group),wp.element.createElement("a",{onClick:function(){e.loadMembership(e.id)},className:"small button is-primary"},window.vibebp.translations.view_membership)):window.vibebp.settings.show_join_button?wp.element.createElement("a",{onClick:function(){p(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/member_actions?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({action:"join_group",members:[vw("vibebp").getUser().id],group_id:e.id,token:vw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&b(!0),e.hasOwnProperty("message")&&bw("vibebp").addNotification({text:e.message}),p(!1)}))},className:m?"small button is-primary is-loading":"small button is-primary"},m?"":window.vibebp.translations.join_group):wp.element.createElement("span",null):wp.element.createElement("span",null),wp.element.createElement("span",{className:"button small",onClick:function(){e.back()}},wp.element.createElement("span",{className:"vicon vicon-close"}),window.vibebp.translations.close)),n?wp.element.createElement("div",{className:"loader"},wp.element.createElement("div",{class:"lds-ellipsis"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null))):wp.element.createElement(dw,null,i.length?wp.element.createElement("div",{className:"member_card",dangerouslySetInnerHTML:{__html:i}}):""))};function yw(e){return(yw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gw(Object(n),!0).forEach((function(t){_w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ew(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ow(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ow(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ow(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jw=wp.element,Sw=(jw.createElement,jw.useState),Nw=jw.useEffect,kw=jw.Fragment,Pw=(jw.render,jw.useRef),xw=wp.data,Aw=xw.dispatch,Iw=xw.select,Cw=Math.round(100*Math.random()),Tw=function(e){var t=Pw(null),n=Ew(Sw(!1),2),r=n[0],a=(n[1],Ew(Sw(!1),2)),i=a[0],o=a[1],l=Ew(Sw(""),2),c=(l[0],l[1],Ew(Sw({}),2)),s=c[0],u=c[1],m=Ew(Sw(null),2),p=m[0],d=m[1],f=Ew(Sw(!1),2),b=f[0],v=(f[1],Ew(Sw(!1),2)),w=v[0],y=v[1],g=Ew(Sw([]),2),h=(g[0],g[1],Ew(Sw(hw({},e.group)),2)),_=h[0],E=h[1],O=Ew(Sw(!1),2),j=O[0],S=O[1],N=Ew(Sw({}),2),k=N[0],P=N[1],x=Ew(Sw(!1),2),A=x[0],I=x[1],C=Ew(Sw(!1),2),T=C[0],D=C[1],M=Ew(Sw({}),2),L=M[0],J=M[1];Nw((function(){U()}),[]);var U=function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/").concat(_.id),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({context:"meta",token:Iw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){if(e.status&&(P(e.data),e.hasOwnProperty("tabs")&&(u(e.tabs),d(Object.keys(e.tabs)[0])),e.hasOwnProperty("cover")&&e.cover.length)){var t=hw({},_);t.cover=e.cover,E(t)}}))};Nw((function(){return document.addEventListener("vibebp_component_reload",U),function(){document.removeEventListener("vibebp_component_reload",U)}})),Nw((function(){if("home"!==p)if(p&&p.indexOf("#")>-1){var e=window.location.href.split("#");Array.isArray(e)&&e.length>1&&(console.log(p.split("#")[1].split("&")[0].split("=")[1]),p.split("#")[1].split("&")[0].split("=")[1]&&(window.location.href+=e[0].activeTab,Aw("vibebp").setComponent(p.split("#")[1].split("&")[0].split("=")[1])))}else{var t=new CustomEvent("group_tab",{detail:{tab:p,group:_}});document.dispatchEvent(t)}}),[p]),Nw((function(){_.id&&fetch("".concat(window.vibebp.api.url,"/groups/").concat(_.id,"/access-details?force"),{method:"post",body:JSON.stringify({token:Iw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&e.data&&J(e.data)})).catch((function(e){"AbortError"!==e.name&&console.error("Uh oh, an error!",e)}))}),[_]);var R=function(e,t){return fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/member_actions?post"),{method:"post",body:JSON.stringify({action:e,members:t,group_id:_.id,token:Iw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.status&&E(hw(hw({},_),{},{id:_.id})),e.hasOwnProperty("message")&&Aw("vibebp").addNotification({text:e.message})}))},F={};return _.hasOwnProperty("cover")&&_.cover.length&&(F={background:"linear-gradient(rgba(0, 0, 0, 0.05),rgba(0, 0, 0, 0.3)) , url("+_.cover+")"}),wp.element.createElement(kw,null,j?wp.element.createElement(av,{group:_,newgroup:function(e){e?(E(e),S(!1)):S(!1)},meta:k}):T?wp.element.createElement(ww,{id:_.id,back:function(){D(!1)}}):wp.element.createElement("div",{className:"vibebp_full_group"},wp.element.createElement("div",{className:"group_head",style:F},wp.element.createElement("div",{className:"leftright_wrapper group_top"},wp.element.createElement("div",{className:"left_side"},wp.element.createElement("i",{className:"vicon vicon-arrow-left",onClick:function(){e.show()}})),wp.element.createElement("div",{className:"right_side"},wp.element.createElement("a",{onClick:function(){D(!0)},className:"small button "},window.vibebp.translations.view_as_public),window.vibebp.components.hasOwnProperty("groups")&&window.vibebp.components.groups.hasOwnProperty("cover")&&window.vibebp.components.groups.cover&&k&&k.hasOwnProperty("is_admin")&&k.is_admin?wp.element.createElement("label",{for:"fileupload_"+Cw,className:i?"small button is-primary is-loading":"small button is-primary"},i?"":window.vibebp.translations.change_cover,wp.element.createElement("input",{id:"fileupload_"+Cw,ref:t,type:"file",accept:"image/*",onChange:function(e){if(t.current.files[0].size<window.vibebp.settings.upload_limit){o(!0);var n={token:Iw("vibebp").getToken(),item_id:_.id},r=new FormData;r.append("body",JSON.stringify(n)),r.append("file",t.current.files[0]),fetch("".concat(window.vibebp.api.url,"/component/cover"),{method:"post",body:r}).then((function(e){return e.json()})).then((function(e){if(o(!1),e.hasOwnProperty("data")&&e.data.hasOwnProperty("message")&&Aw("vibebp").addNotification({text:e.data.message}),e.success&&e.hasOwnProperty("data")){console.log(e.data),Iw("vibebp").getUser().cover=e.data.url;var t=hw({},_);t.cover=e.data.url,E(t)}}))}else Aw("vibebp").addNotification({text:window.vibebp.translations.image_size_error})},style:{display:"none"}})):"",k&&k.hasOwnProperty("is_member")?k.hasOwnProperty("is_member")&&k.is_member?wp.element.createElement("a",{onClick:function(){fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/member_actions?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({action:"leave_group",members:[Iw("vibebp").getUser().id],group_id:_.id,token:Iw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){t.status&&e.show(),t.hasOwnProperty("message")&&Aw("vibebp").addNotification({text:t.message})}))},className:b?"small button is-primary is-loading":"small button is-primary"},b?"":window.vibebp.translations.leave_group):window.vibebp.settings.show_join_button?wp.element.createElement("a",{onClick:function(){y(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/member_actions?post"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({action:"join_group",members:[Iw("vibebp").getUser().id],group_id:_.id,token:Iw("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(t){t.status&&e.show(),t.hasOwnProperty("message")&&Aw("vibebp").addNotification({text:t.message}),y(!1)}))},className:w?"small button is-primary is-loading":"small button is-primary"},w?"":window.vibebp.translations.join_group):"":"",k&&k.hasOwnProperty("is_admin")&&k.is_admin?wp.element.createElement("a",{className:"button is-primary small",onClick:function(){S(!0)}},wp.element.createElement("span",{className:"vicon vicon-settings"})):"")),wp.element.createElement("div",{className:"group_bottom"},wp.element.createElement("div",{className:"group_avatar"},wp.element.createElement("img",{src:_.avatar})),wp.element.createElement("div",{className:"group_title"},wp.element.createElement("h1",{dangerouslySetInnerHTML:{__html:_.name}}),wp.element.createElement("div",{className:A?"group_description active":"group_description",onClick:function(){A&&I(!1)}},wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:_.description}}),!A&&_.hasOwnProperty("description")&&_.description.length>180?wp.element.createElement("span",{className:"more",onClick:function(){I(!0)}},window.vibebp.translations.more):"")))),r?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement("div",{className:"group_content "+p},Object.keys(s).length>1?wp.element.createElement("div",{className:"content_tabs_wrapper"},Object.keys(s).map((function(e){return wp.element.createElement("div",{className:p==e?"content_tab active":"content_tab",onClick:function(){if("home"==e){var t=new CustomEvent("group_tab",{detail:{tab:"home",group:_}});document.dispatchEvent(t)}d(e)}},wp.element.createElement("span",null,s[e]))}))):"",p&&"home"!=p?wp.element.createElement("div",{className:"group_content_wrapper"},wp.element.createElement("div",{id:p})):wp.element.createElement("div",{className:"leftright_wrapper"},k.hasOwnProperty("is_member")&&k.is_member?wp.element.createElement("div",{className:"left_side"},wp.element.createElement(Gi,{type:"groups",id:e.group.id})):"",wp.element.createElement("div",{className:"right_side"},L.can_add_members||L.can_view?wp.element.createElement(kw,null,wp.element.createElement(lw,{access:L,type:"groups",id:_.id,object:_,memberActions:R}),wp.element.createElement(Mv,{access:L,type:"groups",id:_.id,object:_,memberActions:R})):"",wp.element.createElement(Im,{type:"groups",id:_.id,object:_,memberActions:R}),"object"===yw(k)?Object.keys(k).map((function(e){if("invite_status"!==e&&"last_activity"!==e&&"total_member_count"!==e){var t=new CustomEvent("meta_key",{detail:k[e]});return document.dispatchEvent(t),wp.element.createElement("div",{id:e})}})):"")))))},Dw=wp.element,Mw=(Dw.createElement,Dw.useState,Dw.useEffect,Dw.Fragment,Dw.render,wp.data),Lw=(Mw.dispatch,Mw.select,function(e){return wp.element.createElement("div",{className:"vibebp_group",onClick:function(){e.show()}},wp.element.createElement("div",{className:"group_avatar"},wp.element.createElement("img",{src:e.group.avatar})),wp.element.createElement("div",{className:"group_name"},wp.element.createElement("strong",null,e.group.name)))}),Jw=wp.element,Uw=(Jw.createElement,Jw.useState,Jw.useEffect,Jw.Fragment,Jw.render,wp.data),Rw=(Uw.dispatch,Uw.select,function(e){return wp.element.createElement("div",{className:"vibebp_group_invite"},wp.element.createElement("div",{className:"group_avatar"},wp.element.createElement("img",{src:e.invite.item.avatar})),wp.element.createElement("div",{className:"group_name"},wp.element.createElement("strong",null,e.invite.item.name),wp.element.createElement("span",null,window.vibebp.components.groups[e.invite.item.status])),wp.element.createElement("div",{className:"inviter"},wp.element.createElement(Bn,{type:"user",id:{user_id:e.invite.inviter_id}})),wp.element.createElement("div",{className:"group_invite_time"},wp.element.createElement(Ua,{time:e.invite.item.date_modified})),wp.element.createElement("div",{className:"group_actions"},wp.element.createElement("a",{className:"vicon vicon-check",onClick:function(){e.action(e.invite.item.id,"accept",e.invite.id)}}),wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){e.action(e.invite.item.id,"reject",e.invite.id)}}),wp.element.createElement("a",{className:"vicon vicon-trash",onClick:function(){e.action(e.invite.item.id,"delete",e.invite.id)}})))}),Fw=wp.element,Hw=(Fw.createElement,Fw.useState,Fw.useEffect,Fw.Fragment,Fw.render,wp.data),qw=(Hw.dispatch,Hw.select,function(e){return wp.element.createElement("div",{className:"vibebp_group",onClick:function(){e.show()}},wp.element.createElement("div",{className:"group_avatar"},wp.element.createElement("img",{src:e.group.avatar}),e.group.hasOwnProperty("members")&&e.group.members&&e.group.members.members&&e.group.members.members.length?wp.element.createElement("div",{className:"group_members_wrapper"},wp.element.createElement("div",{className:"group_members"},wp.element.createElement(Wn,{user_ids:e.group.members.members.map((function(e){return e.ID}))},e.group.members.members.map((function(e,t){return wp.element.createElement(Bn,{type:"user",id:{user_id:e.ID}})})))),wp.element.createElement("span",null,e.group.members.count," ",window.vibebp.translations.members)):""),wp.element.createElement("div",{className:"group_details"},wp.element.createElement("div",{className:"group_meta"},wp.element.createElement("div",{className:"group_types"},e.group.hasOwnProperty("group_types")&&e.group.group_types.length?e.group.group_types.map((function(e,t){if(e.hasOwnProperty("labels")&&e.labels.hasOwnProperty("name"))return wp.element.createElement("span",null,e.labels.name)})):"")),wp.element.createElement("div",{className:"group_head"},wp.element.createElement("div",null,wp.element.createElement("strong",null,e.group.name),wp.element.createElement(Ua,{time:e.group.date_created})),wp.element.createElement("div",null,wp.element.createElement("span",{className:"status"},window.vibebp.components.groups.status[e.group.status])))))});function $w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$w(Object(n),!0).forEach((function(t){Bw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ww(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vw(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Gw=wp.element,Zw=(Gw.createElement,Gw.useState),Kw=(Gw.useEffect,Gw.Fragment),Xw=(Gw.render,wp.data),Yw=(Xw.dispatch,Xw.select),Qw=function(e){var t=Ww(Zw({group_type:"all"===window.vibebp.settings.group_type?"":window.vibebp.settings.group_type,full_avatar:window.vibebp.settings.full_avatar,per_page:window.vibebp.settings.groups_per_page,page:1,search_terms:"",orderby:window.vibebp.settings.order}),2),n=t[0],r=t[1],a=Ww(Zw(!1),2),i=a[0],o=a[1],l=Ww(Zw(0),2),c=l[0],s=l[1],m=Ww(Zw(null),2),p=m[0],d=m[1],f=Ww(Zw([]),2),b=f[0],v=f[1],w=Ww(Zw(!1),2),y=w[0],g=w[1];return u((function(){g(!0),p&&p.abort();var e={},t=new AbortController;p&&(e={signal:t.signal}),d(t),fetch("".concat(window.vibebp.api.url,"/groups?client_id=").concat(window.vibebp.settings.client_id,"&force"),zw(zw({method:"post"},e),{},{body:JSON.stringify(zw(zw({},n),{},{token:Yw("vibebp").getToken()}))})).then((function(e){return e.json()})).then((function(e){g(!1),e.status&&(v(e.data.groups),document.dispatchEvent(new Event("vibebp_groups_loaded")),s(e.data.total))}))}),500,[n]),!1!==i?wp.element.createElement(ww,{id:b[i].id,back:function(){o(!1)},loadMembership:function(t){e.loadMembership(t)}}):wp.element.createElement("div",{className:"vibebp_groups_directory_wrappers"},wp.element.createElement("div",{className:"vibebp_main_head"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:n.search_terms,placeholder:window.vibebp.translations.search_text,onChange:function(e){var t=zw({},n);t.search_terms=e.target.value,r(t)}}))),wp.element.createElement("select",{onChange:function(e){var t=zw({},n);t.type=e.target.value,r(t)}},wp.element.createElement("option",{value:""},window.vibebp.translations.sort_groups),Object.keys(window.vibebp.components.groups.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.sorters[e])})))),wp.element.createElement("div",{className:"group_types_wrapper"},wp.element.createElement("div",{className:"group_types"},window.vibebp.settings.group_types&&Object.keys(window.vibebp.settings.group_types).length?wp.element.createElement(Kw,null,wp.element.createElement("span",{className:n.group_type?"":"active",onClick:function(){var e=zw({},n);delete e.group_type,r(e)}},window.vibebp.translations.all),Object.keys(window.vibebp.settings.group_types).map((function(e){return wp.element.createElement("span",{className:n.group_type===e?"active":"",onClick:function(){var t=zw({},n);t.group_type=e,r(t)}},window.vibebp.settings.group_types[e])}))):"")),wp.element.createElement("div",{className:"vibebp_groups_directory_main"},wp.element.createElement("div",{className:"vibebp_groups_directory_header"},wp.element.createElement("span",null,window.vibebp.settings.search_groups?wp.element.createElement("div",{className:"vibebp_groups_search"},wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_text,value:n.search_terms,onChange:function(e){r(zw(zw({},n),{},{search_terms:e.target.value}))}}),wp.element.createElement("span",{className:"vicon vicon-search"})):""),window.vibebp.settings.sort_groups?wp.element.createElement("div",{className:"vibebp_groups_sort"},wp.element.createElement("select",{value:n.orderby,onChange:function(e){r(zw(zw({},n),{},{orderby:e.target.value}))}},Object.keys(window.vibebp.group_sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.group_sorters[e])})))):""),wp.element.createElement("div",{className:"vibebp_all_groups "},y?wp.element.createElement("div",{class:"lds-ellipsis"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):c?b.map((function(e,t){return wp.element.createElement(qw,{group:e,show:function(){o(t)}})})):wp.element.createElement("div",{className:"vibebp_message"},wp.element.createElement("p",null,window.vibebp.translations.no_groups_found))),c>n.per_page?wp.element.createElement("a",{className:"link",onClick:function(){r(zw(zw({},n),{},{page:n.page+1}))}},window.vibebp.translations.load_more):""))};function ey(e){return function(e){if(Array.isArray(e))return oy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||iy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ty(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ny(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ty(Object(n),!0).forEach((function(t){ry(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ty(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ry(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ay(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||iy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iy(e,t){if(e){if("string"==typeof e)return oy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oy(e,t):void 0}}function oy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ly=wp.element,cy=(ly.createElement,ly.useState),sy=ly.useEffect,uy=ly.Fragment,my=(ly.render,wp.data),py=my.dispatch,dy=my.select,fy=function(e){var t=ay(cy([]),2),n=t[0],r=t[1],a=ay(cy({page:1,orderby:"",accepted:"pending"}),2),i=a[0],o=a[1],l=ay(cy(""),2),c=(l[0],l[1]),s=ay(cy([]),2),m=s[0],p=s[1],d=ay(cy(!1),2),f=d[0],b=d[1],v=ay(cy(window.vibebp.components.groups.actions),2),w=(v[0],v[1],ay(cy([]),2)),y=w[0],g=w[1],h=ay(cy(!1),2),_=(h[0],h[1],ay(cy({mine:"unread",type:"",include:"",page:1,search_terms:"",label:"",filter:"groups-my-groups"}),2)),E=_[0],O=_[1],j=ay(cy(!1),2),S=j[0],N=j[1],k=ay(cy(!1),2),P=k[0],x=k[1],A=ay(cy(!1),2),I=A[0],C=A[1],T=ay(cy(!1),2),D=T[0],M=T[1],L=ay(cy(!1),2),J=(L[0],L[1],ay(cy({text:"",color:"#000"}),2)),U=(J[0],J[1],ay(cy(""),2)),R=U[0],F=U[1],H=ay(cy(!1),2),q=H[0],$=H[1],z=ay(cy(null),2),B=z[0],W=z[1];sy((function(){var e=dy("vibebp").getAction();if(e&&"view"==e){var t=dy("vibebp").getId();t&&O(ny(ny({},E),{},{include:[t]}))}else E.include&&O(ny(ny({},E),{},{include:""}));var n=dy("vibebp").getMenu().filter((function(e){return"groups"===e.parent}));n.map((function(e,t){-1===n.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&-1==n[0].class.indexOf("current-menu-item")&&n[0].class.push("current-menu-item")})),g(n),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),u((function(){if("invites"===R)b(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/").concat(R,"?").concat(encodeURIComponent(JSON.stringify(ny({},i)))),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(ny(ny({},i),{},{token:dy("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){if(b(!1),e.status)if(P){var t=ey(n);e.data.invites.map((function(e){t.push(e)})),r(ngroups),x(!1),t.length<e.data.total?N(!0):N(!1)}else r(e.data.invites),e.data.invites.length<e.data.total?N(!0):N(!1);else e.hasOwnProperty("message")&&c(e.message),r([])}));else{var e=ny({},E);e.token=dy("vibebp").getToken();var t=dy("vibebp").getUser();e.user_id=t.id,B&&B.abort();var a={},o=new AbortController;B&&(a={signal:o.signal}),W(o),b(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"?").concat(E.search_terms.length?"nocache":encodeURIComponent(JSON.stringify(ny(ny({},E),{},{search_terms:""})))),ny(ny({method:"post"},a),{},{body:JSON.stringify(e)})).then((function(e){return e.json()})).then((function(t){if(b(!1),t.status){if(P){var n=ey(m);t.data.groups.map((function(e){n.push(e)})),p(n),x(!1),n.length<t.data.total?N(!0):N(!1)}else p(t.data.groups),e.include&&M(0),t.data.groups.length<t.data.total?N(!0):N(!1);t.hasOwnProperty("can_create_groups")&&$(t.can_create_groups)}else p([])}))}}),500,[E,i,R]);var V=function(){O(ny(ny({},E),{},{page:1}))};sy((function(){return document.addEventListener("vibebp_component_reload",V),function(){document.removeEventListener("vibebp_component_reload",V)}}));var G=function(e,t,a){var i=ey(n);fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"/invite/").concat(e),{method:"post",body:JSON.stringify({token:dy("vibebp").getToken(),action:t})}).then((function(e){return e.json()})).then((function(e){e.status&&(i.splice(n.findIndex((function(e){return e.id===a})),1),r(i))}))};return wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.groups.label),window.vibebp.settings.show_groups_dir?wp.element.createElement("a",{className:"button is-primary new_mail "+("all-groups"==R?"active":""),onClick:function(){F("all-groups")}},window.vibebp.components.groups.all):"",y.map((function(e,t){var n=e.class.join(" ")+" "+e.css_id;if("compose"!==e.css_id)return wp.element.createElement("a",{className:n,onClick:function(n){var r=ny({},E);r.filter=e.css_id,r.page=1,M(!1),C(!1),E.css_id!==r.filter&&O(r),F(e.css_id);var a=ey(y),i=a.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));a[i].class.splice(a[i].class.indexOf("current-menu-item"),1),a[t].class.push("current-menu-item"),g(a)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},"all-groups"===R?wp.element.createElement(Qw,{loadMembership:function(e){var t=m.findIndex((function(t,n){return t.id===e}));t>-1&&(M(t),py("vibebp").setAction("view"),py("vibebp").setId(e),F(""))}}):I?wp.element.createElement(av,{newgroup:function(e){if(e){var t=ey(m);t.unshift(e),p(t);var n="".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.groups,"?").concat(encodeURIComponent(JSON.stringify(ny(ny({},E),{},{search_terms:""}))));localforage.getItem(n).then((function(e){var r=JSON.parse(e);r.data.groups=t,localforage.setItem(n,JSON.stringify(r))})),C(!1),M(0)}else C(!1)}}):!1!==D?wp.element.createElement(Tw,{group:m[D],show:function(){M(!1),O(ny(ny({},E),{},{include:""})),py("vibebp").setId(!1),py("vibebp").setAction(!1)}}):wp.element.createElement(uy,null,wp.element.createElement("div",{className:"vibebp_main_head"},"invites"===R?wp.element.createElement(uy,null,wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:i.search_terms,placeholder:window.vibebp.translations.search_text,onChange:function(e){var t=ny({},i);t.search_terms=e.target.value,o(t)}})),wp.element.createElement("div",null,wp.element.createElement("select",{onChange:function(e){var t=ny({},i);t.accepted=e.target.value,o(t)}},Object.keys(window.vibebp.components.groups.invite_type).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.invite_type[e])}))),wp.element.createElement("select",{onChange:function(e){var t=ny({},i);t.orderby=e.target.value,o(t)}},Object.keys(window.vibebp.components.groups.invite_sort).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.invite_sort[e])}))))):wp.element.createElement(uy,null,wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",value:E.search_terms,placeholder:window.vibebp.translations.search_text,onChange:function(e){var t=ny({},E);t.search_terms=e.target.value,O(t)}})),wp.element.createElement("select",{onChange:function(e){var t=ny({},E);t.type=e.target.value,O(t)}},Object.keys(window.vibebp.components.groups.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.groups.sorters[e])}))))),f?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"invites"===R?wp.element.createElement("div",{className:"group_invites"},n.length||f?wp.element.createElement(uy,null,n.length?n.map((function(e,t){return wp.element.createElement(Rw,{invite:e,action:G})})):""):wp.element.createElement(uy,null,wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_groups_found))):wp.element.createElement("div",{className:"grouplist"},m.length||f?wp.element.createElement(uy,null,wp.element.createElement("div",{className:"vibebp_groups"},q?wp.element.createElement("div",{className:"vibebp_groups"},wp.element.createElement("div",{className:"new_group",onClick:function(){C(!0)}},wp.element.createElement("i",{className:"vicon vicon-plus"}))):"",m.length?m.map((function(e,t){return wp.element.createElement(Lw,{group:e,show:function(){M(t),py("vibebp").setAction("view"),py("vibebp").setId(e.id)}})})):""),S?wp.element.createElement("a",{className:"link",onClick:function(){var e=ny({},E);e.page=E.page+1,x(!0),O(e)}},window.vibebp.translations.more):""):wp.element.createElement(uy,null,wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_groups_found),q?wp.element.createElement("div",{className:"vibebp_groups"},wp.element.createElement("div",{className:"new_group",onClick:function(){C(!0)}},wp.element.createElement("i",{className:"vicon vicon-plus"}))):"")))))};function by(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?by(Object(n),!0).forEach((function(t){wy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):by(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gy(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hy=wp.element,_y=(hy.createElement,hy.useState),Ey=(hy.useEffect,hy.Fragment),Oy=(hy.render,wp.data),jy=Oy.dispatch,Sy=Oy.select,Ny=function(e){var t=yy(_y(!1),2),n=t[0],r=t[1],a=yy(_y(window.vibebp.translations.save_changes),2),i=a[0],o=a[1],l=yy(_y("email"),2),c=l[0],s=l[1],u=Sy("vibebp").getUser().email,m=yy(_y({email:u,pwd:"",pass1:"",pass2:""}),2),p=m[0],d=m[1],f=yy(_y(!1),2),b=f[0],v=f[1];return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.account_email)),wp.element.createElement("div",{className:"portal_body"},wp.element.createElement("div",{className:"settings_tabs"},wp.element.createElement("a",{className:"setting_tab "+("email"==c?"active":""),onClick:function(){s("email")}},window.vibebp.translations.change_email),wp.element.createElement("a",{className:"setting_tab "+("password"==c?"active":""),onClick:function(){s("password")}},window.vibebp.translations.change_password),wp.element.createElement("a",{className:"setting_tab "+("cleardata"==c?"active":""),onClick:function(){s("cleardata")}},window.vibebp.translations.clear_data),!Sy("vibebp").getUser().caps.hasOwnProperty("edit_posts")&&window.vibebp.settings.delete_account?wp.element.createElement("a",{className:"setting_tab "+("delete_account"==c?"active":""),onClick:function(){s("delete_account")}},window.vibebp.translations.delete_account):""),wp.element.createElement("div",{className:"vibebp_form tab_content"},"email"==c?wp.element.createElement(Ey,null,wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.account_email),wp.element.createElement("input",{type:"email",onChange:function(e){d(vy(vy({},p),{},{email:e.target.value}))},value:p.email}),p.email!==u?wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.confirm_old_password),wp.element.createElement("input",{type:"password",value:p.pwd,onChange:function(e){d(vy(vy({},p),{},{pwd:e.target.value}))}})):"")):"password"==c?wp.element.createElement(Ey,null,wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.change_password),wp.element.createElement("input",{type:"password",value:p.pass1,onChange:function(e){d(vy(vy({},p),{},{pass1:e.target.value}))}})),wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.repeat_new_password),wp.element.createElement("input",{type:"password",value:p.pass2,onChange:function(e){d(vy(vy({},p),{},{pass2:e.target.value}))}}))):"cleardata"==c?wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.clear_saved_data),wp.element.createElement("a",{onClick:function(){v(!0);var e=localforage.createInstance({name:"vibebp_stale_requests",storeName:"user"}),t=localforage.createInstance({name:"vibebp_stale_requests",storeName:"global"});e.clear(),t.clear(),localforage.clear().then((function(){v(!1),jy("vibebp").addNotification({text:window.vibebp.translations.data_cleared}),document.dispatchEvent(new Event("vibebp_logout"))}))},className:b?"button is-primary is-loading":"button is-primary"},window.vibebp.translations.clear_data)):"",wp.element.createElement("a",{className:n?"button is-primary is-loading":"button is-primary",onClick:function(){r(!0),fetch("".concat(window.vibebp.api.url,"/settings/save?post"),{method:"post",body:JSON.stringify(vy(vy({},p),{},{token:Sy("vibebp").getToken(),type:c}))}).then((function(e){return e.json()})).then((function(e){r(!1),"delete_account"==c&&jy("vibebp").logout(),o(e.message),setTimeout((function(){o(window.vibebp.translations.save_changes)}),3e3)}))}},i))))};function ky(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Py(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Py(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Py(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xy=wp.element,Ay=(xy.createElement,xy.useState),Iy=xy.useEffect,Cy=xy.Fragment,Ty=(xy.render,wp.data),Dy=(Ty.dispatch,Ty.select),My=function(e){var t=ky(Ay(!0),2),n=t[0],r=t[1],a=ky(Ay({status:"",label:"",exports:"",message:"",submessage:""}),2),i=a[0],o=a[1],l=ky(Ay(!1),2),c=l[0],s=l[1];Iy((function(){u()}),[]),Iy((function(){return document.addEventListener("vibebp_component_reload",u),function(){document.removeEventListener("vibebp_component_reload",u)}}));var u=function(){r(!0),fetch("".concat(window.vibebp.api.url,"/settings/export_data"),{method:"post",body:JSON.stringify({token:Dy("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),o(e)}))};return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.export_data_settings)),wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(Cy,null,i.hasOwnProperty("exports")&&i.exports.length?wp.element.createElement(Cy,null,wp.element.createElement("div",{className:"export_data_items",dangerouslySetInnerHTML:{__html:i.exports}})):"",i.hasOwnProperty("message")&&i.message.length?wp.element.createElement("div",null,wp.element.createElement("div",{className:"export_data_message vbp_message",dangerouslySetInnerHTML:{__html:i.message}})):"",i.hasOwnProperty("can_make_new_request")&&i.can_make_new_request?wp.element.createElement("div",null,wp.element.createElement("a",{className:c?"button is-primary is-loading make_new_export_request":"button is-primary make_new_export_request",onClick:function(){s(!0),fetch("".concat(window.vibebp.api.url,"/settings/export_data/request"),{method:"post",body:JSON.stringify({token:Dy("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){s(!1),u()}))}},i.label," ")):"",i.hasOwnProperty("report_link")&&i.report_link?wp.element.createElement("div",null,wp.element.createElement("a",{className:"link make_new_export_download",href:i.report_link,target:"__blank"},i.label," ")):"")))};function Ly(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ry(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ry(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ry(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fy=wp.element,Hy=(Fy.createElement,Fy.useState),qy=Fy.useEffect,$y=Fy.Fragment,zy=(Fy.render,wp.data),By=(zy.dispatch,zy.select),Wy=function(e){var t=Uy(Hy(!1),2),n=t[0],r=t[1],a=Uy(Hy({}),2),i=a[0],o=a[1];qy((function(){l()}),[]);var l=function(){r(!0),fetch("".concat(window.vibebp.api.url,"/settings/email"),{method:"post",body:JSON.stringify({token:By("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),o(e)}))};qy((function(){return document.addEventListener("vibebp_component_reload",l),function(){document.removeEventListener("vibebp_component_reload",l)}}));var c=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ly(Object(n),!0).forEach((function(t){Jy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ly(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i);n[e].value=t,o(n),fetch("".concat(window.vibebp.api.url,"/settings/email/set?post"),{method:"post",body:JSON.stringify({token:By("vibebp").getToken(),setting:e,value:t})}).then((function(e){return e.json()})).then((function(e){}))};return wp.element.createElement("div",{class:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.send_email_notice)),wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):Object.keys(i).length?wp.element.createElement($y,null,Object.keys(i).map((function(e){return wp.element.createElement("div",{className:"setting"},wp.element.createElement("label",null,i[e].label),wp.element.createElement("div",{className:"switch"},"yes"==i[e].value?wp.element.createElement("input",{type:"checkbox",id:e,checked:!0,onClick:function(){return c(e,"no")}}):wp.element.createElement("input",{type:"checkbox",id:e,onClick:function(){return c(e,"yes")}}),wp.element.createElement("label",{for:e,className:"slider"})))}))):""))};function Vy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ky(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ky(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ky(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xy=wp.element,Yy=(Xy.createElement,Xy.useState),Qy=Xy.useEffect,eg=Xy.Fragment,tg=(Xy.render,wp.data),ng=(tg.dispatch,tg.select),rg=function(e){var t=Zy(Yy(!1),2),n=t[0],r=t[1],a=Zy(Yy({}),2),i=a[0],o=a[1];Qy((function(){l()}),[]);var l=function(){r(!0),fetch("".concat(window.vibebp.api.url,"/xprofile/fields"),{method:"post",body:JSON.stringify({token:ng("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),o(e)}))};Qy((function(){return document.addEventListener("vibebp_component_reload",l),function(){document.removeEventListener("vibebp_component_reload",l)}}));var c=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vy(Object(n),!0).forEach((function(t){Gy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i);n.fields[n.fields.findIndex((function(t){return t.id===e.id}))].visibility=t,o(n),fetch("".concat(window.vibebp.api.url,"/xprofile/fields/setvisibility?post"),{method:"post",body:JSON.stringify({token:ng("vibebp").getToken(),field_id:e.id,visibility:t})}).then((function(e){return e.json()})).then((function(e){}))};return wp.element.createElement("div",{class:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.visibility_settings)),wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):Object.keys(i).length?wp.element.createElement(eg,null,i.groups.map((function(e){return wp.element.createElement("div",{className:"setting_group"},wp.element.createElement("label",null,e.name),i.fields.filter((function(t){return t.group_id===e.id})).map((function(e){return wp.element.createElement("div",{className:"setting_field"},wp.element.createElement("strong",null,e.name),wp.element.createElement("select",{value:e.visibility,onChange:function(t){return c(e,t.target.value)}},Object.keys(window.vibebp.components.xprofile.visibility).map((function(t){return wp.element.createElement("option",{value:t,selected:e.visibility==t},window.vibebp.components.xprofile.visibility[t])}))))})))}))):""))};var ag=wp.element,ig=(ag.createElement,ag.useState,ag.useEffect,ag.Fragment,ag.render,wp.data);ig.dispatch,ig.select;function og(e){return function(e){if(Array.isArray(e))return sg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||cg(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||cg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cg(e,t){if(e){if("string"==typeof e)return sg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sg(e,t):void 0}}function sg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ug=wp.element,mg=(ug.createElement,ug.useState),pg=ug.useEffect,dg=ug.Fragment,fg=(ug.render,wp.data),bg=fg.dispatch,vg=fg.select,wg=function(e){var t=lg(mg(!0),2),n=t[0],r=t[1],a=lg(mg(!1),2),i=a[0],o=a[1];pg((function(){l()}),[]);pg((function(){return document.addEventListener("vibebp_component_reload",l),function(){document.removeEventListener("vibebp_component_reload",l)}}));var l=function(){r(!0),fetch("".concat(window.vibebp.api.url,"/settings/logins/get?force"),{method:"post",body:JSON.stringify({token:vg("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.status&&o(e.data),r(!1)}))};return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.active_sessions)),wp.element.createElement("div",{className:"portal_body"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(dg,null,wp.element.createElement("div",{className:"my-logins"},i.map((function(e,t){return wp.element.createElement("div",{className:"login_val"},wp.element.createElement("h4",{className:"login_date"},new Date(1e3*parseInt(e.login_time)).toString()),wp.element.createElement("div",{className:"login_details"},wp.element.createElement("div",{className:"info"}," ",wp.element.createElement("span",null,wp.element.createElement("span",{className:"vicon vicon-world"}),(n=e.usr,r="",/Opera[\/\s](\d+\.\d+)/.test(n)?r=window.vibebp.settings.browser_names.opera:/MSIE (\d+\.\d+);/.test(n)?r=window.vibebp.settings.browser_names.msie:/Navigator[\/\s](\d+\.\d+)/.test(n)?r=window.vibebp.settings.browser_names.netscape:/Chrome[\/\s](\d+\.\d+)/.test(n)?r=window.vibebp.settings.browser_names.chrome:/Safari[\/\s](\d+\.\d+)/.test(n)?(r=window.vibebp.settings.browser_names.safari,/Version[\/\s](\d+\.\d+)/.test(n),new Number(RegExp.$1)):/Firefox[\/\s](\d+\.\d+)/.test(n)&&(r=window.vibebp.settings.browser_names.firefox),r)," ",window.vibebp.translations.on," ",function(e){var t="Unknown";return-1!=e.indexOf("Windows NT 10.0")&&(t=window.vibebp.settings.os_names.win_10),-1!=e.indexOf("Windows NT 6.3")&&(t=window.vibebp.settings.os_names.win_81),-1!=e.indexOf("Windows NT 6.2")&&(t=window.vibebp.settings.os_names.win_8),-1!=e.indexOf("Windows NT 6.1")&&(t=window.vibebp.settings.os_names.win_7),-1!=e.indexOf("Windows NT 6.0")&&(t=window.vibebp.settings.os_names.win_vista),-1!=e.indexOf("Windows NT 5.1")&&(t=window.vibebp.settings.os_names.win_xp),-1!=e.indexOf("Windows NT 5.0")&&(t=window.vibebp.settings.os_names.win_2000),-1!=e.indexOf("Mac")&&(t=window.vibebp.settings.os_names.mac_os),-1!=e.indexOf("X11")&&(t=window.vibebp.settings.os_names.unix),-1!=e.indexOf("Linux")&&(t=window.vibebp.settings.os_names.linux),-1!=e.indexOf("Android")&&(t=window.vibebp.settings.os_names.android),/(iPhone|iPad|iPod)/.test(e)&&(t=window.vibebp.settings.os_names.iphone),t}(e.usr))),wp.element.createElement("div",{className:"login_action"},wp.element.createElement("a",{className:"remove_device vicon vicon-trash",title:window.vibebp.translations.remove_device,onClick:function(t){var n;n=e,fetch("".concat(window.vibebp.api.url,"/settings/logins/remove?post"),{method:"post",body:JSON.stringify({token:vg("vibebp").getToken(),login:n})}).then((function(e){return e.json()})).then((function(e){var t=og(i);t.splice(t.findIndex((function(e){return e.vibebp_token_key===n.vibebp_token_key})),1),o(t),e.hasOwnProperty("message")&&e.message.length&&bg("vibebp").addNotification({text:e.message,icon:"vicon vicon-check"})}))}}))));var n,r}))))))};function yg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hg=wp.element,_g=(hg.createElement,hg.useState),Eg=hg.useEffect,Og=(hg.Fragment,hg.render,wp.data),jg=Og.dispatch,Sg=Og.select,Ng=function(e){var t=yg(_g(!0),2),n=t[0],r=t[1],a=yg(_g(!1),2),i=a[0],o=a[1];Eg((function(){fetch("".concat(window.vibebp.api.url,"/wall/whocanpost/get?force"),{method:"post",body:JSON.stringify({token:Sg("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){e.value&&e.value.length&&o(e.value),r(!1)}))}),[]);return wp.element.createElement("div",{className:"portal"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement("div",{className:"details"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.wall_settings)),wp.element.createElement("div",{className:"portal_body"},wp.element.createElement("div",{className:"form form-field"},wp.element.createElement("label",null,window.vibebp.translations.wall_settings),wp.element.createElement("select",{onChange:function(e){!function(e){o(e.target.value),e.target.value&&fetch("".concat(window.vibebp.api.url,"/wall/whocanpost/set?post"),{method:"post",body:JSON.stringify({token:Sg("vibebp").getToken(),value:e.target.value})}).then((function(e){return e.json()})).then((function(e){jg("vibebp").addNotification({text:e.message})}))}(e)}},window.vibebp.components.wall.who_can_post&&Object.keys(window.vibebp.components.wall.who_can_post).length?Object.keys(window.vibebp.components.wall.who_can_post).map((function(e){return wp.element.createElement("option",{value:e,selected:i===e},window.vibebp.components.wall.who_can_post[e])})):"")))))};function kg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xg=wp.element,Ag=(xg.createElement,xg.useState),Ig=(xg.useEffect,xg.Fragment,xg.render,wp.data),Cg=Ig.dispatch,Tg=Ig.select,Dg=function(e){var t=kg(Ag(!1),2),n=t[0],r=t[1],a=kg(Ag(!1),2),i=a[0],o=a[1];return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"details"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",null,window.vibebp.translations.delete_account)),wp.element.createElement("div",{className:"portal_body"},wp.element.createElement("a",{className:n?"button is-primary danger is-loading":"button is-primary danger",onClick:function(){o(!0)}},window.vibebp.translations.delete_account)),wp.element.createElement(ia,{open:i,onClose:function(){return o(!1)}},wp.element.createElement("div",{className:"content"},window.vibebp.translations.sure_delete_account,wp.element.createElement("div",{className:"action_buttons"},wp.element.createElement("a",{className:"button is-primary",onClick:function(e){o(!1),r(!0),fetch("".concat(window.vibebp.api.url,"/settings/deleteaccount?post"),{method:"post",body:JSON.stringify({token:Tg("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),e.status&&document.dispatchEvent(new Event("vibebp_logout")),Cg("vibebp").addNotification({text:e.message})}))}},window.vibebp.translations.yes),wp.element.createElement("a",{className:"button",onClick:function(){return o(!1)}},window.vibebp.translations.no))))))};function Mg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Lg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jg=wp.element,Ug=(Jg.createElement,Jg.useState),Rg=Jg.useEffect,Fg=(Jg.Fragment,Jg.render,wp.data),Hg=(Fg.dispatch,Fg.select),qg=function(e){var t=Mg(Ug(!1),2),n=t[0],r=t[1];return Rg((function(){var e=new CustomEvent("vibebp_profile_settings");document.dispatchEvent(e),document.querySelector("body").classList.value.includes("withsidebar")&&document.querySelector("body").classList.remove("withsidebar"),fetch("".concat(window.vibebp.api.url,"/settings/candeleteaccount?force"),{method:"post",body:JSON.stringify({token:Hg("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(e.status)}))}),[]),wp.element.createElement("div",{className:"profile_settings"},wp.element.createElement(Ny,null),wp.element.createElement(rg,null),wp.element.createElement(Wy,null),wp.element.createElement(My,null),wp.element.createElement(wg,null),wp.element.createElement(Ng,null),n?wp.element.createElement(Dg,null):"",window.vibebp.settings.profile_settings.map((function(e){return wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("strong",{dangerouslySetInnerHTML:{__html:e.label}})),wp.element.createElement("div",{className:"portal_body"},wp.element.createElement("div",{className:e.key})))})))},$g=wp.element,zg=($g.createElement,$g.useState,$g.useEffect,$g.Fragment),Bg=($g.render,wp.data),Wg=(Bg.dispatch,Bg.select,function(e){return wp.element.createElement("div",{className:"vibebp_wc_full_order"},wp.element.createElement("div",{className:"vibebp_wc_order_header"},wp.element.createElement("span",{className:"vicon vicon-arrow-left",onClick:e.back}),wp.element.createElement("span",{className:"order_status "+e.order.status},window.vibebp.components.shop.order_statuses["wc-"+e.order.status])),wp.element.createElement("div",{className:"vibebp_order_details"},wp.element.createElement("div",{className:"vibebp_order_main"},wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_number),"#",e.order.order_number),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_date),e.order.created_at),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_status),wp.element.createElement("span",{className:"order_status "+e.order.status},window.vibebp.components.shop.order_statuses["wc-"+e.order.status])),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_amount),e.order.currency," ",e.order.total),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_payment_method),e.order.payment_details.method_title)),wp.element.createElement("div",{className:"vibebp_order_line_items"},e.order.line_items.length?e.order.line_items.map((function(e){return wp.element.createElement("div",{className:"vibebp_order_line_item"},wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.item_name),e.name," x ",e.quantity),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.item_total),e.subtotal," ","0.00"!==e.subtotal_tax?wp.element.createElement("span",{className:"subtotal_tax"},"[",e.subtotal_tax,"]"):""))})):""),e.order.fee_lines.length||e.order.shipping_lines.length||e.order.coupon_lines.length?wp.element.createElement("div",{className:"vibebp_order_extra_items"},e.order.coupon_lines.length?wp.element.createElement(zg,null,wp.element.createElement("strong",null,window.vibebp.translations.coupons_applied),e.order.coupon_lines.map((function(e){return wp.element.createElement("div",{className:"vibebp_order_coupon_item"},wp.element.createElement("span",null,e.code),wp.element.createElement("span",null,e.amount))}))):"",e.order.shipping_lines.length?wp.element.createElement(zg,null,wp.element.createElement("strong",null,window.vibebp.translations.shipping_rates),e.order.shipping_lines.map((function(e){return wp.element.createElement("div",{className:"vibebp_order_coupon_item"},wp.element.createElement("span",null,e.method_title),wp.element.createElement("span",null,e.total))}))):"",e.order.fee_lines.length?wp.element.createElement(zg,null,wp.element.createElement("strong",null,window.vibebp.translations.fees),e.order.fee_lines.map((function(e){return wp.element.createElement("div",{className:"vibebp_order_coupon_item"},wp.element.createElement("span",null,e.method_title),wp.element.createElement("span",null,e.total))}))):""):"",wp.element.createElement("div",{className:"vibebp_addresses"},wp.element.createElement("div",{className:"vibebp_billing_address"},wp.element.createElement("strong",null,window.vibebp.translations.billing_address),wp.element.createElement("span",null,e.order.billing_address.first_name," ",e.order.billing_address.last_name),wp.element.createElement("span",null,e.order.billing_address.email," ",e.order.billing_address.phone),e.order.billing_address.company.length?wp.element.createElement("span",null,e.order.billing_address.company):"",wp.element.createElement("span",null,e.order.billing_address.address_1),e.order.billing_address.address_2.length?wp.element.createElement("span",null,e.order.billing_address.address_2):"",wp.element.createElement("span",null,e.order.billing_address.city," ",e.order.billing_address.state," ",e.order.billing_address.country," ",e.order.billing_address.pincode)),e.order.shipping_address.first_name.length?wp.element.createElement("div",{className:"vibebp_shipping_address"},wp.element.createElement("strong",null,window.vibebp.translations.shipping_address),wp.element.createElement("span",null,e.order.shipping_address.first_name," ",e.order.shipping_address.last_name),wp.element.createElement("span",null,e.order.shipping_address.email," ",e.order.shipping_address.phone),e.order.shipping_address.company.length?wp.element.createElement("span",null,e.order.shipping_address.company):"",wp.element.createElement("span",null,e.order.shipping_address.address_1),e.order.shipping_address.address_2.length?wp.element.createElement("span",null,e.order.shipping_address.address_2):"",wp.element.createElement("span",null,e.order.shipping_address.city," ",e.order.shipping_address.state," ",e.order.shipping_address.country," ",e.order.shipping_address.pincode)):"")))});function Vg(e){return function(e){if(Array.isArray(e))return Qg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Yg(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gg(Object(n),!0).forEach((function(t){Kg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Yg(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yg(e,t){if(e){if("string"==typeof e)return Qg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qg(e,t):void 0}}function Qg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var eh=wp.element,th=(eh.createElement,eh.useState),nh=eh.useEffect,rh=eh.Fragment,ah=(eh.render,eh.useRef),ih=wp.data,oh=(ih.dispatch,ih.select),lh=function(e){var t=Xg(th(!1),2),n=t[0],r=t[1],a=Xg(th({page:1,order_date:"",status:"wc-completed",limit:window.vibebp.components.shop.per_page}),2),i=a[0],o=a[1],l=Xg(th(!1),2),c=l[0],s=l[1],u=Xg(th(!1),2),m=u[0],p=u[1],d=Xg(th([]),2),f=d[0],b=d[1],v=Xg(th([]),2),w=v[0],y=v[1],g=Xg(th(!1),2),h=g[0],_=g[1],E=Xg(th(!1),2),O=(E[0],E[1],ah());nh((function(){if(O&&O.current&&"function"==typeof flatpickr&&(!f.length||f.length&&f.length>1)){var e={dateFormat:"m/d/Y",mode:"range",defaultDate:f,onChange:function(e){if(e&&e.length>1){b(e);var t=Zg({},i);t.order_date={start_date:e[0].getTime(),end_date:e[e.length-1].getTime()},o(t)}}};flatpickr(O.current,e)}}),[f]),nh((function(){var e=Zg({},i);e.token=oh("vibebp").getToken(),r(!0),fetch("".concat(window.vibebp.api.url,"/wc/orders?force"),{method:"post",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){if(r(!1),e.status){if(m){if(e.orders.length){var t=Vg(w);e.orders.map((function(e){t.push(e)})),y(t)}p(!1)}else y(e.orders),s(!0);e.orders.length<i.limit&&s(!1)}}))}),[i]);var j=function(){o(Zg({},i))};return nh((function(){return document.addEventListener("vibebp_component_reload",j),function(){document.removeEventListener("vibebp_component_reload",j)}})),wp.element.createElement("div",{className:"vibebp_shop_orders"},wp.element.createElement("div",{className:"vibebp_shop_orders_header vibebp_form vibebp_main_head"},wp.element.createElement("select",{value:i.timeline,onChange:function(e){o(Zg(Zg({},i),{},{timeline:e.target.value,page:1}))}},Object.keys(window.vibebp.components.shop.order_timelines).map((function(e){return wp.element.createElement("option",{selected:i.timeline==e,value:e},window.vibebp.components.shop.order_timelines[e])}))),wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("div",{className:"date"},wp.element.createElement("input",{type:"text",ref:O}),i.order_date?wp.element.createElement("span",{className:"vicon vicon-close",onClick:function(){b([]);var e=Zg({},i);e.order_date=!1,o(e)}}):"")),wp.element.createElement("select",{value:i.status,onChange:function(e){o(Zg(Zg({},i),{},{status:e.target.value,page:1}))}},wp.element.createElement("option",null,window.vibebp.translations.select_order_status),Object.keys(window.vibebp.components.shop.order_statuses).map((function(e){return wp.element.createElement("option",{selected:i.status==e,value:e},window.vibebp.components.shop.order_statuses[e])})))),n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):h?wp.element.createElement(Wg,{order:h,back:function(){_(!1)}}):w.length?wp.element.createElement(rh,null,w.map((function(e){var t=e[0];return wp.element.createElement("div",{className:"vibebp_wc_order",onClick:function(){_(t)}},wp.element.createElement("div",{className:"vibebp_order_details"},wp.element.createElement("a",{className:"vibebp_order_number link",href:t.view_order_url,target:"_blank"},wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_number),"#",t.order_number),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_date),t.created_at),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_status),wp.element.createElement("span",{className:"order_status "+t.status},window.vibebp.components.shop.order_statuses["wc-"+t.status])),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_quantity),t.total_line_items_quantity),wp.element.createElement("span",null,wp.element.createElement("span",{className:"vibebp_wc_order_label"},window.vibebp.translations.order_amount),t.currency," ",t.total)))})),c?wp.element.createElement("a",{className:"link",onClick:function(){p(!0),o(Zg(Zg({},i),{},{page:i.page+1}))}},window.vibebp.components.shop.translations.load_more):""):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_orders))};function ch(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var uh=wp.element,mh=(uh.createElement,uh.useState),ph=uh.useEffect,dh=(uh.Fragment,uh.render,wp.data),fh=(dh.dispatch,dh.select),bh=function(e){var t=ch(mh(!1),2),n=t[0],r=t[1],a=ch(mh([]),2),i=a[0],o=a[1];return ph((function(){r(!0),fetch("".concat(window.vibebp.api.url,"/wc/downloads?force"),{method:"post",body:JSON.stringify({token:fh("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),e.status&&o(e.downloads)}))}),[]),wp.element.createElement("div",{className:"vibebp_wc_downloads"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):i.length?i.map((function(e){return wp.element.createElement("div",{className:"vibebp_wc_download"},wp.element.createElement("strong",null,e.download_name),wp.element.createElement("span",null,wp.element.createElement("span",null,window.vibebp.translations.product_name),e.product_name),e.downloads_remaining?wp.element.createElement("span",null,wp.element.createElement("span",null,window.vibebp.translations.remaining_downloads),e.downloads_remaining):"",e.access_expires?wp.element.createElement("span",null,wp.element.createElement("span",null,window.vibebp.translations.access_expires),e.access_expires):"",wp.element.createElement("a",{href:e.file.file,target:"_blank",className:"button is-primary"},wp.element.createElement("span",{className:"vicon vicon-download"})," ",window.vibebp.translations.download))})):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_downloads))};function vh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hh=wp.element,_h=(hh.createElement,hh.useState),Eh=hh.useEffect,Oh=(hh.Fragment,hh.render,wp.data),jh=Oh.dispatch,Sh=Oh.select,Nh=function(e){var t=yh(_h(!1),2),n=t[0],r=t[1],a=yh(_h({}),2),i=a[0],o=a[1],l=yh(_h(),2),c=l[0],s=l[1],m=yh(_h(!1),2),p=m[0],d=m[1];Eh((function(){f()}),[]);var f=function(){r(!0),fetch("".concat(window.vibebp.api.url,"/wc/addresses?force"),{method:"post",body:JSON.stringify({token:Sh("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),e.status&&o(e.addresses)}))};return Eh((function(){return document.addEventListener("vibebp_component_reload",f),function(){document.removeEventListener("vibebp_component_reload",f)}})),u((function(){if(p){var e=c.split("-");fetch("".concat(window.vibebp.api.url,"/wc/addresses/update?post"),{method:"post",body:JSON.stringify({token:Sh("vibebp").getToken(),address_type:e[0],field:e[1],value:i[e[0]][e[1]].value})}).then((function(e){return e.json()})).then((function(e){d(!1),e.status||e.hasOwnProperty("message")&&jh("vibebp").addNotification({text:e.message})}))}}),500,[i]),wp.element.createElement("div",{className:"vibebp_wc_addresses"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):Object.keys(i).length?Object.keys(i).map((function(e){return wp.element.createElement("div",{className:"vibebp_wc_address"},wp.element.createElement("strong",null,window.vibebp.translations[e]),Object.keys(i[e]).map((function(t){return wp.element.createElement("div",{className:"vibebp_wc_address_field"},wp.element.createElement("span",{onClick:function(){s(c!==e+"-"+t&&e+"-"+t)}},i[e][t].label,c===e+"-"+t?wp.element.createElement("i",null,window.vibebp.translations.cancel):wp.element.createElement("span",{className:"vicon vicon-pencil"})),c===e+"-"+t?wp.element.createElement("div",{className:p?"control is-loading":"control"},wp.element.createElement("input",{type:"text",value:i[e][t].value,onChange:function(n){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vh(Object(n),!0).forEach((function(t){wh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i);r[e][t].value=n.target.value,o(r),d(!0)}})):wp.element.createElement("span",null,i[e][t].value))})))})):"")};function kh(e){return function(e){if(Array.isArray(e))return Ch(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ih(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ph(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ah(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||Ih(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ih(e,t){if(e){if("string"==typeof e)return Ch(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ch(e,t):void 0}}function Ch(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Th=wp.element,Dh=(Th.createElement,Th.useState),Mh=Th.useEffect,Lh=(Th.Fragment,Th.render,wp.data),Jh=(Lh.dispatch,Lh.select),Uh=function(e){var t=Ah(Dh({}),2),n=t[0],r=t[1],a=Ah(Dh([]),2),i=a[0],o=a[1],l=Ah(Dh(""),2),c=l[0],s=l[1];return Mh((function(){var e=Jh("vibebp").getMenu().filter((function(e){return"shop"===e.parent}));e.map((function(t,n){-1===e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&e[n].class.push("current-menu-item")})),o(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.shop.label),i.map((function(e,t){var a=e.class.join(" ")+" "+e.css_id;return wp.element.createElement("a",{className:a,onClick:function(a){var l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ph(Object(n),!0).forEach((function(t){xh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ph(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);l.filter=e.css_id,l.page=1,n.css_id!==l.filter&&r(l),s(e.css_id);var c=kh(i),u=c.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));c[u].class.splice(c[u].class.indexOf("current-menu-item"),1),c[t].class.push("current-menu-item"),o(c)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},"downloads"==c?wp.element.createElement(bh,null):"edit-address"==c?wp.element.createElement(Nh,null):wp.element.createElement(lh,null)))};function Rh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hh=wp.element,qh=(Hh.createElement,Hh.useState),$h=Hh.useEffect,zh=Hh.Fragment,Bh=(Hh.render,wp.data),Wh=Bh.dispatch,Vh=Bh.select,Gh=function(e){var t=Rh(qh(!1),2),n=t[0],r=t[1],a=Rh(qh({}),2),i=a[0],o=a[1],l=Rh(qh({}),2),c=l[0],s=l[1];return $h((function(){r(!0),fetch("".concat(window.vibebp.api.url,"/pmpro/memberships"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:Vh("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),e.status&&o(e.data),e.hasOwnProperty("message")&&Wh("vibebp").addNotification({text:e.message}),e.hasOwnProperty("all_levels_page")&&s(e.all_levels_page)}))}),[]),wp.element.createElement("div",{className:"vibebp_pmpro_memberships"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(zh,null,i.length?wp.element.createElement("table",{className:"memberships table"},wp.element.createElement("thead",null,wp.element.createElement("tr",null,wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.level)),wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.billing)),wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.expiration)))),wp.element.createElement("tbody",null,i.map((function(e,t){return wp.element.createElement("tr",{className:"membership"},wp.element.createElement("td",null,wp.element.createElement("h3",{dangerouslySetInnerHTML:{__html:e.name}}),wp.element.createElement("div",{className:"actions"},e.hasOwnProperty("change_link")?wp.element.createElement("a",{target:"_blank",className:"button",href:e.change_link},window.vibebp.components.pmpro.translations.change):"",e.hasOwnProperty("cancel_link")?wp.element.createElement("a",{target:"_blank",className:"button",href:e.cancel_link},window.vibebp.components.pmpro.translations.cancel," "):"",e.hasOwnProperty("renew")?wp.element.createElement("a",{target:"_blank",className:"button",href:e.renew},window.vibebp.components.pmpro.translations.renew):"")),e.hasOwnProperty("billing_html")?wp.element.createElement("td",{dangerouslySetInnerHTML:{__html:e.billing_html}}):"",e.hasOwnProperty("expiration_html")?wp.element.createElement("td",{dangerouslySetInnerHTML:{__html:e.expiration_html}}):"")})))):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.components.pmpro.translations.no_memberships),c.length?wp.element.createElement("a",{target:"_blank",href:c},window.vibebp.components.pmpro.translations.view_all_levels):""))};function Zh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xh=wp.element,Yh=(Xh.createElement,Xh.useState),Qh=Xh.useEffect,e_=(Xh.Fragment,Xh.render,wp.data),t_=(e_.dispatch,e_.select),n_=function(e){var t=Zh(Yh(!1),2),n=t[0],r=t[1],a=Zh(Yh({}),2),i=(a[0],a[1]),o=t_("vibebp").getUser();return Qh((function(){r(!0),fetch("".concat(window.vibebp.api.url,"/pmpro/account"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:t_("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),e.status&&i(e.data)}))}),[]),wp.element.createElement("div",{className:"vibebp_pmpro_account"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement("table",{className:"table",style:{width:"auto"}},wp.element.createElement("tbody",null,wp.element.createElement("tr",null,wp.element.createElement("td",null,window.vibebp.components.pmpro.translations.username),wp.element.createElement("td",null,o.username)),wp.element.createElement("tr",null,wp.element.createElement("td",null,window.vibebp.components.pmpro.translations.email),wp.element.createElement("td",null,o.email)))))};function r_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a_(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i_=wp.element,o_=(i_.createElement,i_.useState),l_=i_.useEffect,c_=i_.Fragment,s_=(i_.render,wp.data),u_=s_.dispatch,m_=s_.select,p_=function(e){var t=r_(o_(!1),2),n=t[0],r=t[1],a=r_(o_({}),2),i=a[0],o=a[1],l=r_(o_({}),2);l[0],l[1];l_((function(){r(!0),c()}),[]);var c=function(){fetch("".concat(window.vibebp.api.url,"/pmpro/invoices"),{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({token:m_("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(!1),e.status&&o(e.data),e.hasOwnProperty("message")&&u_("vibebp").addNotification({text:e.message})}))};return l_((function(){return document.addEventListener("vibebp_component_reload",c),function(){document.removeEventListener("vibebp_component_reload",c)}})),wp.element.createElement("div",{className:"vibebp_pmpro_invoices"},n?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement(c_,null,i.length?wp.element.createElement("table",{className:"memberships table"},wp.element.createElement("thead",null,wp.element.createElement("tr",null,wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.date)),wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.level)),wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.amount)),wp.element.createElement("td",null,wp.element.createElement("strong",null,window.vibebp.components.pmpro.translations.status)))),wp.element.createElement("tbody",null,i.map((function(e,t){return wp.element.createElement("tr",{className:"membership"},wp.element.createElement("td",null,e.hasOwnProperty("date")?wp.element.createElement("a",{target:"_blank",className:"",href:e.invoice_link},e.date):""),e.hasOwnProperty("level")?wp.element.createElement("td",{dangerouslySetInnerHTML:{__html:e.level}}):"",e.hasOwnProperty("amount")?wp.element.createElement("td",{dangerouslySetInnerHTML:{__html:e.amount}}):"",e.hasOwnProperty("status")?wp.element.createElement("td",{dangerouslySetInnerHTML:{__html:e.status}}):"")})))):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.components.pmpro.translations.no_invoices)))};function d_(e){return function(e){if(Array.isArray(e))return y_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||w_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||w_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w_(e,t){if(e){if("string"==typeof e)return y_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y_(e,t):void 0}}function y_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g_=wp.element,h_=(g_.createElement,g_.useState),__=g_.useEffect,E_=(g_.Fragment,g_.render,wp.data),O_=(E_.dispatch,E_.select),j_=function(e){var t=v_(h_({}),2),n=t[0],r=t[1],a=v_(h_([]),2),i=a[0],o=a[1],l=v_(h_(""),2),c=l[0],s=l[1];return __((function(){var e=O_("vibebp").getMenu().filter((function(e){return"memberships"===e.parent}));e.map((function(t,n){-1===e.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}))&&(e[n].class.push("current-menu-item"),""==c&&s(e[n].css_id))})),o(e),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.pmpro.label),i.map((function(e,t){var a=e.class.join(" ")+" "+e.css_id;return wp.element.createElement("a",{className:a,onClick:function(a){var l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f_(Object(n),!0).forEach((function(t){b_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);l.filter=e.css_id,l.page=1,n.css_id!==l.filter&&r(l),s(e.css_id);var c=d_(i),u=c.findIndex((function(e){return e.class.indexOf("current-menu-item")>-1}));c[u].class.splice(c[u].class.indexOf("current-menu-item"),1),c[t].class.push("current-menu-item"),o(c)}},e.name)})))),wp.element.createElement("div",{className:"vibebp_main"},"memberships"==c?wp.element.createElement(Gh,null):"account"==c?wp.element.createElement(n_,null):"invoices"==c?wp.element.createElement(p_,null):""))};function S_(e){return function(e){if(Array.isArray(e))return I_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||A_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N_(Object(n),!0).forEach((function(t){P_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||A_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A_(e,t){if(e){if("string"==typeof e)return I_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I_(e,t):void 0}}function I_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C_=wp.element,T_=C_.useState,D_=C_.useEffect,M_=wp.data,L_=M_.dispatch,J_=M_.select,U_=function(e){var t=x_(T_([]),2),n=t[0],r=t[1],a=x_(T_({search:"",page:1}),2),i=a[0],o=a[1],l=x_(T_(!1),2),c=l[0],s=l[1],m=x_(T_(!0),2),p=m[0],d=m[1],f=x_(T_(null),2),b=f[0],v=f[1];D_((function(){o({search:"",page:1,user_id:e.user_id}),r([])}),[e.user_id]),u((function(){var t=k_({},i);t.token=J_("vibebp").getToken(),b&&b.abort();var a={},o=new AbortController;b&&(a={signal:o.signal}),v(o),e.user_id&&(t=k_(k_({},t),{},{user_id:e.user_id})),d(!0),fetch("".concat(window.vibebp.api.url,"/").concat(window.vibebp.api.endpoints.activity,"?args=").concat(i.search.length?"nocache":encodeURIComponent(JSON.stringify(k_(k_({},i),{},{search:""}))),"&force"),k_(k_({method:"post"},a),{},{headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(t)})).then((function(e){return e.json()})).then((function(e){d(!1),e.status?(r([].concat(S_(n),S_(e.data.activities))),s(e.data.has_more_items)):e.hasOwnProperty("message")&&L_("vibebp").addNotification({text:e.message})}))}),500,[i]);var w=S_(n);return i.hasOwnProperty("search")&&i.search.length&&(w=n.filter((function(e){return e.action.indexOf(i.search)>-1||e.content.indexOf(i.search)>-1}))),i.hasOwnProperty("sorter")&&i.sorter.length&&(w=n.filter((function(e){return e.type==i.sorter>-1}))),wp.element.createElement("div",{className:"portal"},wp.element.createElement("div",{className:"portal_header"},wp.element.createElement("div",{className:"header_links"},wp.element.createElement("div",{className:"searchbox active"},wp.element.createElement("span",{className:"vicon vicon-search"}),wp.element.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_text,value:i.search,onChange:function(e){var t=k_({},i);t.search=e.target.value,t.page=1,o(t)}}))),wp.element.createElement("div",{className:"header_extras"},wp.element.createElement("select",{onChange:function(e){return selectActivityType(e.target.value)}},Object.keys(window.vibebp.components.activity.sorters).map((function(e){return wp.element.createElement("option",{value:e},window.vibebp.components.activity.sorters[e])}))))),wp.element.createElement("div",{className:"portal_body"},w.length?wp.element.createElement("div",{className:"activity_list"},w.map((function(e){return wp.element.createElement(Di,{activity:e,rootActivityId:e.id,update:function(){},noedit:!0})}))):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_activity_found),p?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",c?wp.element.createElement("a",{className:"link",onClick:function(){var e=k_({},i);e.page=i.page+1,o(e)}},window.vibebp.translations.more):""))},R_=(0,wp.element.createContext)({});var F_=wp.element;F_.useState,F_.useEffect,F_.useRef,F_.Fragment,wp.data.dispatch;function H_(e){return function(e){if(Array.isArray(e))return Z_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||G_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q_(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function $_(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){q_(i,r,a,o,l,"next",e)}function l(e){q_(i,r,a,o,l,"throw",e)}o(void 0)}))}}function z_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z_(Object(n),!0).forEach((function(t){W_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||G_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G_(e,t){if(e){if("string"==typeof e)return Z_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z_(e,t):void 0}}function Z_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K_(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}var X_=wp.element,Y_=X_.useState,Q_=X_.useEffect,eE=X_.Fragment,tE=X_.useContext,nE=wp.data,rE=nE.dispatch,aE=nE.select,iE=function(e){var t=tE(R_).menu,n=V_(Y_(!1),2),r=n[0],a=n[1],i=V_(Y_({email:"",password:"",role:"",member_types:[],tags:[],image:{}}),2),o=i[0],l=i[1],c=V_(Y_(e.create_type?e.create_type:"create"),2),s=c[0],u=c[1],m=V_(Y_([]),2),p=m[0],d=m[1],f=function(e){if(!e.length)return!1;var t=[];return e.length<window.vibebp.settings.password_length&&t.push(window.vibebp.translations.password_6_chars),e.search(/[a-z]/i)<0&&t.push(window.vibebp.translations.password_one_letter),e.search(/[0-9]/)<0&&t.push(window.vibebp.translations.password_digit),e.search(/[A-Z]/)<0&&t.push(window.vibebp.translations.password_uppercase),e.search(/[!@#$%^&*]/)<0&&t.push(window.vibebp.translations.special_char),t},b=function(e){e.hasOwnProperty("fields")&&e.fields.length&&d(e.fields)};return wp.element.createElement("div",{className:"vibebp_form vibe_register_users_wrapper"},e.hasOwnProperty("hidetabs")?"":wp.element.createElement("div",{class:"buttons has-addons create_user_type"},wp.element.createElement("button",{className:"create"===s?"button is-success is-selected":"button",onClick:function(){return u("create")}},window.vibebp.translations.create_user," "),wp.element.createElement("button",{className:"csv"===s?"button is-success is-selected":"button",onClick:function(){return u("csv")}},window.vibebp.translations.bulk_upload)),wp.element.createElement("div",{className:"create_user_wrapper"},s?wp.element.createElement(eE,null,"csv"===s?wp.element.createElement(oE,{fields:p,update:b}):"",wp.element.createElement("div",{style:{display:"create"===s?"block":"none"}},wp.element.createElement("div",{className:"vibe_register_user_header"},wp.element.createElement("div",null,wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.enter_email),wp.element.createElement("input",{type:"email",value:o.email,onChange:function(e){return l(B_(B_({},o),{},{email:e.target.value}))}})),wp.element.createElement("div",{className:"vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.enter_password),wp.element.createElement("input",{type:"password",value:o.password,onChange:function(e){return l(B_(B_({},o),{},{password:e.target.value}))}})))),wp.element.createElement("div",{className:"vibe_register_user_body"},t?wp.element.createElement(eE,null,t.types?wp.element.createElement("div",{className:"member_tags_wrapper vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.select_member_types),wp.element.createElement("div",{className:"member_tags"},Object.keys(t.types).map((function(e){var n=t.types[e].db_id,r=o.member_types.includes(n);return wp.element.createElement("span",{className:"member_tag ".concat(r?"active":""),style:{color:"inherit",border:"1px solid var(--border)"},key:n,onClick:function(){var e=B_({},o);e.member_types.includes(n)?e.member_types.splice(e.member_types.indexOf(n),1):e.member_types.push(n),l(e)}},t.types[e].labels.name)})))):"",t.tags&&t.tags.length?wp.element.createElement("div",{className:"member_tags_wrapper vibebp_form_field"},wp.element.createElement("label",null,window.vibebp.translations.select_tags),wp.element.createElement("div",{className:"member_tags"},t.tags.map((function(e){var t=e.name,n=e.term_id,r=e.color,a=o.tags.includes(n);return wp.element.createElement("span",{className:"member_tag ".concat(a?"active":""),key:n,style:{background:r},onClick:function(){var e=B_({},o);e.tags.includes(n)?e.tags.splice(e.tags.indexOf(n),1):e.tags.push(n),l(e)}},t)})))):""):"",wp.element.createElement(el,{user_id:0,update:b}),wp.element.createElement("a",{className:r?"button is-primary is-loading":"button is-primary",onClick:function(){if(t=o.email,/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(t)){var t,n=f(o.password);0===n.length?(a(!0),fetch("".concat(window.vibebp.api.url,"/members/create-users?nocache"),{method:"post",body:JSON.stringify(B_(B_({},e),{},{users:[o],is_single:!0,token:aE("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(t){a(!1),t.hasOwnProperty("message")&&rE("vibebp").addNotification({text:t.message}),t.status&&(e.update(),e.close())}))):n.map((function(e){rE("vibebp").addNotification({text:e})}))}else rE("vibebp").addNotification({text:window.vibebp.translations.email_not_valid})}},window.vibebp.translations.create_account)))):""))},oE=function(e){var t=V_(Y_(!1),2),n=t[0],r=t[1],a=V_(Y_({file:!1,saving:!1}),2),i=a[0],o=a[1],l=V_(Y_([]),2),c=l[0],s=l[1],u=V_(Y_(0),2),m=u[0],p=u[1];Q_((function(){fetch("".concat(window.vibebp.api.url,"/xprofile/allfields"),{method:"post",body:JSON.stringify({token:aE("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){var t=e.status,n=(e.groups,e.fields);t&&n.length&&s(n)}))}),[]);var b=function(){var t=$_(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:p(0),(a=new FileReader).onload=function(){var t=$_(regeneratorRuntime.mark((function t(n){var a,l,s,u,m,d,b,v,w,y,g;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.target.result,!(l=(l=f(a)).filter((function(e){return""!==e[0].value||" "!==e[0].value}))).length){t.next=43;break}o(B_(B_({},i),{},{saving:!0})),s=0,u=W_({},Symbol.asyncIterator,(function(){return{i:0,next:function(){var t=this;if(this.i<l.length){var n=l[this.i],r={email:n[0].value,password:n[1].value,tags:n[2].value?n[2].value.split("&"):"",member_types:n[3].value?n[3].value.split("&"):""},a=[],i=0;return n.map((function(e,t){t>3&&c[i]&&c[i].id&&(a.push({id:c[i].id,value:e.value}),i++)})),r.fields=a,fetch("".concat(window.vibebp.api.url,"/members/create-users?nocache"),{method:"post",body:JSON.stringify(B_(B_({},e),{},{users:[r],token:aE("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(){return{value:t.i++,done:!1}}))}return Promise.resolve({done:!0})}}})),m=!0,d=!1,t.prev=9,v=K_(u);case 11:return t.next=13,v.next();case 13:return w=t.sent,m=w.done,t.next=17,w.value;case 17:if(y=t.sent,m){t.next=27;break}y,s++,100===(g=100*s/l.length)&&(o(B_(B_({},i),{},{saving:!1})),r(""),p(0),rE("vibebp").addNotification({text:window.vibebp.translations.all_registered}),e.update()),p(g);case 24:m=!0,t.next=11;break;case 27:t.next=33;break;case 29:t.prev=29,t.t0=t.catch(9),d=!0,b=t.t0;case 33:if(t.prev=33,t.prev=34,m||null==v.return){t.next=38;break}return t.next=38,v.return();case 38:if(t.prev=38,!d){t.next=41;break}throw b;case 41:return t.finish(38);case 42:return t.finish(33);case 43:case"end":return t.stop()}}),t,null,[[9,29,33,43],[34,,38,42]])})));return function(e){return t.apply(this,arguments)}}(),a.readAsText(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(){e.fields.length&&s(e.fields);var t=H_(c),n=window.vibebp.translations.create_members_csv,r={email:window.vibebp.translations.email,password:window.vibebp.translations.password,tags:window.vibebp.translations.member_tags_comma,member_types:window.vibebp.translations.member_types_comma},a=[{email:"sample@gmail.com",password:"######",tags:"t1&t2",member_types:"slug-1|slug-2"}];t.map((function(e){r["field_".concat(e.id)]=e.name})),t.map((function(e){var t="";e.options?(e.options.map((function(n,r){t=r!==e.options.length-1?t+n.name+"/":t+n.name})),a[0]["field_".concat(e.id)]=t):a[0]["field_".concat(e.id)]=t})),d(r,a,n)};return console.log(c,"@@@@"),wp.element.createElement("div",{className:"vibep_csv_register_wrapper"},wp.element.createElement("div",{className:"vibep_csv_register"},wp.element.createElement("label",null,n?wp.element.createElement("span",{onClick:function(){return r("")}},n.name,wp.element.createElement("span",null,window.vibebp.translations.deselect_csv)):wp.element.createElement("span",null,wp.element.createElement("span",null,window.vibebp.translations.select_csv),wp.element.createElement("input",{type:"file",onChange:function(e){r(e.target.files[0])},accept:".csv"})))),i.saving?wp.element.createElement("progress",{className:"progress is-primary",style:{height:"10px"},value:m,max:"100"},m,"%"):"",wp.element.createElement("div",{className:"csv_actions"},n?wp.element.createElement("a",{className:"button is-primary ".concat(i.saving?"is-loading":""),onClick:b},window.vibebp.translations.upload,wp.element.createElement("span",{className:"vicon vicon-upload"})):"",n?"":(e.fields&&e.fields.length,wp.element.createElement("a",{className:"button is-primary",title:"sample",onClick:v},window.vibebp.translations.download," ",wp.element.createElement("span",{className:"vicon vicon-download"})))))};function lE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lE(Object(n),!0).forEach((function(t){sE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pE=wp.element,dE=pE.useState,fE=pE.useEffect,bE=wp.data,vE=bE.select,wE=bE.dispatch,yE=function(e){var t=uE(dE([]),2),n=t[0],r=t[1],a=uE(dE(!1),2),i=a[0],o=a[1];return fE((function(){if(e.user_id){o(!0);var t={user_id:e.user_id},n="?args=".concat(encodeURIComponent(JSON.stringify(cE({},t))));fetch("".concat(window.vibebp.api.url,"/members/stats").concat(n),{method:"post",body:JSON.stringify(cE(cE({},t),{},{token:vE("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){o(!1),e.status?r(e.data):e.hasOwnProperty("message")&&wE("vibebp").addNotification({text:e.message})}))}}),[e.user_id]),wp.element.createElement("div",{className:"stats_wrapper"},n.length?wp.element.createElement("table",{className:"all_stats_table"},n.map((function(e){var t=e.key,n=e.type,r=e.label,a=e.value;return wp.element.createElement("tr",{key:t},wp.element.createElement("td",null,r),"timestamp"!==n?wp.element.createElement("td",null,a):wp.element.createElement("td",null,wp.element.createElement(Ra,{timestamp:a})))}))):"",i?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"")};function gE(e){return function(e){if(Array.isArray(e))return SE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||jE(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hE(Object(n),!0).forEach((function(t){EE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function EE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||jE(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jE(e,t){if(e){if("string"==typeof e)return SE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SE(e,t):void 0}}function SE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var NE=wp.element,kE=NE.useState,PE=NE.useEffect,xE=NE.Fragment,AE=wp.data,IE=AE.select,CE=AE.dispatch,TE={menu:!1,edit:!1,view:!1,activity:!1,create_member:!1,stats:!1},DE=!1,ME=function(e){var t,n,r,a=Object.keys(IE("vibebp").getUser().caps).indexOf("manage_options")>-1||(window.vibebp.settings.create_member&&Object.keys(IE("vibebp").getUser().caps).indexOf(window.vibebp.settings.create_member))>-1,i=OE(kE({menu:!1,members:!1}),2),o=i[0],l=i[1],c=OE(kE(!1),2),s=c[0],m=c[1],p=OE(kE(!1),2),d=p[0],f=p[1],b=OE(kE([]),2),v=b[0],w=b[1],y=OE(kE({taxonomies:[],paged:1,s:"",orderby:"",order:"ASC"}),2),g=y[0],h=y[1],_=OE(kE([]),2),E=_[0],O=_[1],j=OE(kE(!1),2),S=j[0],N=j[1],k=OE(kE(null),2),P=k[0],x=k[1],A=OE(kE(TE),2),I=A[0],C=A[1],T=OE(kE("list"),2),D=T[0],M=T[1],L=OE(kE([]),2),J=L[0],U=L[1],R=OE(kE(!1),2),F=R[0],H=R[1],q=OE(kE(!1),2),$=q[0],z=q[1],B=OE(kE(""),2),W=B[0],V=B[1],G=OE(kE({tax:"",terms:[]}),2),Z=G[0],K=G[1],X=OE(kE({color:"#28B888",name:"",tax:""}),2),Y=X[0],Q=X[1],ee=OE(kE(!1),2),te=ee[0],ne=ee[1],re=OE(kE(!1),2),ae=(re[0],re[1],OE(kE(""),2)),ie=(ae[0],ae[1],OE(kE(!1),2)),oe=ie[0],le=ie[1],ce=OE(kE(""),2),se=ce[0],ue=ce[1],me=OE(kE(!1),2),pe=me[0],de=me[1],fe=OE(kE(""),2),be=fe[0],ve=fe[1];PE((function(){if(I.view)return document.querySelector(".vibebp_myprofile")&&document.querySelector(".vibebp_myprofile").classList.add("popup_active"),function(){document.querySelector(".vibebp_myprofile.popup_active")&&document.querySelector(".vibebp_myprofile").classList.remove("popup_active")}}),[I.view]),PE((function(){DE=!0,fetch("".concat(window.vibebp.api.url,"/members/taxonomies?force"),{method:"post",body:JSON.stringify({token:IE("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){DE=!1,e.status&&e.data&&w(e.data),e.hasOwnProperty("message")&&CE("vibebp").addNotification({text:e.message})})).catch((function(e){DE=!1})),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar")}),[]),PE((function(){I.hasOwnProperty("edit")&&I.edit&&(le(!0),fetch("".concat(window.vibebp.api.url,"/members/getUserSlug?force"),{method:"post",body:JSON.stringify({user_id:I.edit,token:IE("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){le(!1),e.status?(ue(e.slug),ve(e.link)):CE("vibebp").setNotification({text:e.message})})))}),[I]);var we=function(e){O(e)};u((function(){ye()}),500,[g]),PE((function(){return document.addEventListener("vibebp_component_reload",ye),function(){document.removeEventListener("vibebp_component_reload",ye)}}));var ye=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];P&&P.abort();var t=new AbortController,n=P?{signal:t.signal}:{};x(t);var r=_E({},g),a=r.s.length?"?force":"?args=".concat(encodeURIComponent(JSON.stringify(_E(_E({},r),{},{s:""}))));e&&(a="?force");var i=1==r.paged?[]:gE(E);we(i),l(_E(_E({},o),{},{members:!0})),fetch("".concat(window.vibebp.api.url,"/members/all").concat(a," "),_E(_E({method:"post"},n),{},{body:JSON.stringify(_E(_E({},g),{},{token:IE("vibebp").getToken()}))})).then((function(e){return e.json()})).then((function(e){if(l(_E(_E({},o),{},{members:!1})),e.status){i=1===g.paged?[]:gE(E);var t=[].concat(gE(i),gE(e.members));N(t.length<parseInt(e.total)),we(t)}})).catch((function(e){l(_E(_E({},o),{},{members:!1})),x(null),console.error("Uh oh, an error!",e)}))},ge=function(){m(!0),fetch("".concat(window.vibebp.api.url,"/members/create-tax?post"),{method:"post",body:JSON.stringify({tax:_E({},Y),token:IE("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){if(e.status){var t=gE(v),n=t.findIndex((function(t){return t.type==e.data.taxonomy}));n>-1&&(t[n].value[e.data.slug]=e.data),w(t)}e.hasOwnProperty("message")&&CE("vibebp").addNotification({text:e.message}),m(!1)})).catch((function(e){m(!1),console.error("Uh oh, an error!",e)}))},he=function(e,t){var n=_E(_E({},g),{},{paged:1});return n.taxonomies.length?-1==n.taxonomies.findIndex((function(t){return t.tax==e}))?(n.taxonomies.push({tax:e,term_ids:[t]}),void h(n)):(-1==n.taxonomies[n.taxonomies.findIndex((function(t){return t.tax==e}))].term_ids.indexOf(t)?n.taxonomies[n.taxonomies.findIndex((function(t){return t.tax==e}))].term_ids.push(t):(n.taxonomies[n.taxonomies.findIndex((function(t){return t.tax==e}))].term_ids.splice(n.taxonomies[n.taxonomies.findIndex((function(t){return t.tax==e}))].term_ids.indexOf(t),1),n.taxonomies[n.taxonomies.findIndex((function(t){return t.tax==e}))].term_ids.length||n.taxonomies.splice(n.taxonomies.findIndex((function(t){return t.tax==e})),1)),void h(n)):(n.taxonomies=[],n.taxonomies.push({tax:e,term_ids:[t]}),void h(n))},_e=function(){f(!0);var e={member_ids:J.map((function(e){return e.id})),tax:Z.tax,term_ids:Z.terms,action:W},t="?args=".concat(encodeURIComponent(JSON.stringify(_E({},e))));fetch("".concat(window.vibebp.api.url,"/members/assignTerms").concat(t),{method:"post",body:JSON.stringify(_E(_E({},e),{},{token:IE("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){f(!1),K({tax:"",terms:[]}),e.status&&ye(!0),e.hasOwnProperty("message")&&CE("vibebp").addNotification({text:e.message})}))};PE((function(){F&&CE("vibebp").addNotification({text:window.vibebp.translations.select_users})}),[F]),console.log("bulkTerms",Z);return wp.element.createElement("div",{className:"vibebp_sidebars"},wp.element.createElement("div",{className:"vibebp_left_sidebar_wrapper"},wp.element.createElement("div",{className:"vibebp_left_sidebar"},wp.element.createElement("h3",null,window.vibebp.components.members_detail.label),a?wp.element.createElement("a",{class:"button is-primary new_mail",onClick:function(){C(_E(_E({},TE),{},{create_member:!0}))}},window.vibebp.translations.create_member):"",v.length?v.map((function(e,t){return wp.element.createElement("div",{className:"member_types_wrapper "+e.type},wp.element.createElement("strong",null,e.label),e.value?Object.keys(e.value).map((function(n){var r,a,i,o,l,c=(null===(r=g.taxonomies)||void 0===r?void 0:r.findIndex((function(t){return t.tax==e.type})))>-1&&(null===(a=g.taxonomies[g.taxonomies.findIndex((function(t){return t.tax==e.type}))])||void 0===a||null===(i=a.term_ids)||void 0===i?void 0:i.indexOf(v[t].value[n].term_id))>-1;return wp.element.createElement("a",{className:"menu-child ".concat(c?"current-menu-item":""),key:v[t].value[n].term_id,onClick:function(){he(e.type,v[t].value[n].term_id)}},e.value[n].color?wp.element.createElement("span",{style:{background:e.value[n].color}},wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:(null===(o=v[t].value[n].name)||void 0===o?void 0:o.length)?v[t].value[n].name:v[t].value[n].labels?v[t].value[n].labels.name:""}})):v[t].value[n].labels?wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:v[t].value[n].labels.name}}):(null===(l=v[t].value[n].name)||void 0===l?void 0:l.length)?wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:v[t].value[n].name}}):"")})):"",a?wp.element.createElement("a",{className:"link",onClick:function(){te==e.type?ne(!1):(ne(e.type),Q(_E(_E({},Y),{},{tax:e.type})))}},te==e.type?window.vibebp.translations.cancel:window.vibebp.translations.add_new):"",te==e.type?wp.element.createElement(xE,null,DE?wp.element.createElement("div",{className:"lds-ellipsis"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):te?wp.element.createElement("div",{className:"create_member_tax"},wp.element.createElement("input",{type:"text",value:Y.name,placeholder:window.vibebp.translations.tax_name,onChange:function(e){return Q(_E(_E({},Y),{},{name:e.target.value}))}}),wp.element.createElement("input",{type:"color",value:Y.color,onChange:function(e){return Q(_E(_E({},Y),{},{color:e.target.value}))}}),Y.name?wp.element.createElement("a",{className:"button is-primary vicon vicon-plus ".concat(s?"is-loading":""),onClick:ge}):""):""):"")})):"")),wp.element.createElement("div",{className:"vibebp_main members_crm"},wp.element.createElement("div",{className:"vibebp_all_members"},wp.element.createElement("div",{className:"vibebp_all_members_header"},wp.element.createElement("div",{className:"vibebp_search_field"},wp.element.createElement("input",{type:"text",value:g.s,onChange:function(e){h(_E(_E({},g),{},{s:e.target.value,paged:1}))},placeholder:window.vibebp.translations.search}),wp.element.createElement("span",{className:"vicon vicon-search"})),wp.element.createElement("div",{className:"member_sorter"},wp.element.createElement("div",{className:"member_display_type"},wp.element.createElement("span",{className:"vicon vicon-menu ".concat("list"==D?"active":""),onClick:function(){return M("list")}}),wp.element.createElement("span",{className:"vicon vicon-layout-grid2 ".concat("grid"==D?"active":""),onClick:function(){return M("grid")}})),wp.element.createElement("div",{className:"vibebp_sort_by"},wp.element.createElement("select",{value:g.orderby,onChange:function(e){h(_E(_E({},g),{},{orderby:e.target.value,paged:1}))}},window.vibebp.components.members_detail.sorters.map((function(e){return wp.element.createElement("option",{value:e.value},e.label)})))),wp.element.createElement("div",{className:"vibebp_sort_by"},wp.element.createElement("span",null,wp.element.createElement("span",{className:"ASC"==g.order?"vicon vicon-angle-up active":"vicon vicon-angle-up",onClick:function(){h(_E(_E({},g),{},{order:"ASC",paged:1}))}}),wp.element.createElement("span",{className:"DESC"==g.order?"vicon vicon-angle-down active":"vicon vicon-angle-down",onClick:function(){h(_E(_E({},g),{},{order:"DESC",paged:1}))}}))))),wp.element.createElement("div",{className:"bulk_action_wrapper"},wp.element.createElement("div",{className:"bulk_handler"},wp.element.createElement("div",{onClick:function(){return H(!F)},className:"checkbox"},wp.element.createElement("input",{type:"checkbox",checked:F}),wp.element.createElement("label",null,window.vibebp.translations.bulk_actions)),F?wp.element.createElement("div",{className:"selected_users"},J&&J.length?$?wp.element.createElement(xE,null,J.map((function(e,t){return wp.element.createElement("span",{className:"selected_user",onClick:function(){var e=gE(J);e.splice(t,1),U(e)}},wp.element.createElement("span",null,e.name))})),wp.element.createElement("span",{className:"link",onClick:function(){return U([])}},window.vibebp.translations.clearall)):wp.element.createElement("span",{className:"expand_option",onClick:function(){return z(!0)}},"".concat(J.length," "),window.vibebp.translations.user_selected):""):""),F&&J&&J.length?wp.element.createElement("div",{className:"bulk_action_options"},wp.element.createElement("select",{value:W,onChange:function(e){K({tax:"",terms:[]}),V(e.target.value)}},wp.element.createElement("option",{value:""},window.vibebp.translations.select_action),wp.element.createElement("option",{value:"add_tax"},window.vibebp.translations.add_tax),wp.element.createElement("option",{value:"remove_tax"},window.vibebp.translations.remove_tax),window.vibebp.components.members_detail.settings.bulk_actions.map((function(e){return wp.element.createElement("option",{value:e.key},e.label)}))),"add_tax"==W||"remove_tax"==W?wp.element.createElement("div",null,wp.element.createElement("select",{value:Z.tax,onChange:function(e){return K({tax:e.target.value,terms:[]})}},wp.element.createElement("option",null,window.vibebp.translations.select_tax),v.map((function(e){return wp.element.createElement("option",{value:e.type},e.label)}))),Z.tax?wp.element.createElement("div",{className:"member_tags_wrapper"},wp.element.createElement("div",{className:"member_tags"},Object.values(v[v.findIndex((function(e){return e.type==Z.tax}))].value).map((function(e){var t,n,r=Z.terms.indexOf(e.term_id)>-1;return wp.element.createElement("span",{className:"member_tag ".concat(r?"active":""),key:e.term_id,style:e.color?{background:e.color}:{},onClick:function(){var t=_E({},Z);r?t.terms.splice(Z.terms.indexOf(e.term_id),1):t.terms.push(e.term_id),K(t)}},(null===(t=e.labels)||void 0===t?void 0:t.length)?wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.labels.name}}):(null===(n=e.name)||void 0===n?void 0:n.length)?wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.name}}):"N.A "+e.term_id)})))):"",(null===(t=Z.terms)||void 0===t?void 0:t.length)?wp.element.createElement("a",{className:"button is-primary ".concat(d?"is-loading":""),onClick:_e},window.vibebp.translations.apply):""):"send_message"===W?wp.element.createElement("div",null,wp.element.createElement(Kc,{messaging_users:J.map((function(e){return e.id})),cancel:function(){return V("")},update:function(){}})):window.vibebp.components.members_detail.settings.bulk_actions.findIndex((function(e){return e.key==W}))>-1&&window.vibebp.components.members_detail.settings.bulk_actions[window.vibebp.components.members_detail.settings.bulk_actions.findIndex((function(e){return e.key==W}))].hasOwnProperty("options")?wp.element.createElement("div",null,window.vibebp.components.members_detail.settings.bulk_actions[window.vibebp.components.members_detail.settings.bulk_actions.findIndex((function(e){return e.key==W}))].options.length&&(null===(n=window.vibebp.components.members_detail.settings.bulk_actions[window.vibebp.components.members_detail.settings.bulk_actions.findIndex((function(e){return e.key==W}))].options)||void 0===n?void 0:n.map((function(e){return wp.element.createElement("span",{onClick:function(){var t,n=_E({},Z);(null==Z||null===(t=Z.terms)||void 0===t?void 0:t.length)&&Z.terms.findIndex((function(t){return t.key==e.key}))>-1?(n.terms.splice(Z.terms.findIndex((function(t){return t.key==e.key})),1),n.tax="remove"):(n.tax="add",n.terms.push(e)),K(n)}},wp.element.createElement("span",{className:Z.terms.findIndex((function(t){return t.key==e.key}))>-1?"vicon vicon-check":""}),wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:e.label}}))}))),(null==Z||null===(r=Z.terms)||void 0===r?void 0:r.length)?wp.element.createElement("a",{className:"button is-primary ".concat(d?"is-loading":""),onClick:_e},window.vibebp.translations.apply):""):""):""),wp.element.createElement("div",{className:"members_wrapper ".concat("grid"==D?"member_grid":"members_list")},E&&E.length?E.map((function(e,t){var n,r,a=J.findIndex((function(t){return t.id===e.ID}));return wp.element.createElement("div",{className:"member_detail ".concat(F&&a>-1?"selected":""," ").concat(I.view==e.ID||I.stats==e.ID||I.activity==e.ID||I.edit==e.ID?"active":""),key:e.ID},wp.element.createElement("div",{className:"member_info",onClick:function(){if(F){var t=gE(J);-1===a?t.push({name:e.display_name,id:e.ID}):t.splice(a,1),U(t)}}},wp.element.createElement("span",{className:"member_info_wrapper"},wp.element.createElement("img",{className:"avatar",src:e.image}),wp.element.createElement("span",null,e.display_name))),v.length?v.map((function(n){var r;return wp.element.createElement("div",{className:n.type+"_wrapper"},e.tax.hasOwnProperty(n.type)&&(null===(r=e.tax[n.type])||void 0===r?void 0:r.length)?e.tax[n.type].map((function(e){var r,a,i;return wp.element.createElement(LE,{remove:function(){return function(e,t,n){var r,a=gE(E),i=gE(E),o=null===(r=a[e].tax[t])||void 0===r?void 0:r.findIndex((function(e){return e.term_id===n}));o>-1&&(a[e].tax[t].splice(o,1),O(a));var l={member_ids:[a[e].ID],term_ids:[n],tax:t,action:"remove_tax"},c="?args=".concat(encodeURIComponent(JSON.stringify(_E({},l))));fetch("".concat(window.vibebp.api.url,"/members/assignTerms").concat(c),{method:"post",body:JSON.stringify(_E(_E({},l),{},{token:IE("vibebp").getToken()}))}).then((function(e){return e.json()})).then((function(e){e.status||O(i),e.hasOwnProperty("message")&&CE("vibebp").addNotification({text:e.message})})).catch((function(e){O(i),console.error("Uh oh, an error!",e)}))}(t,n.type,e.term_id)},color:e.color,name:"bp_member_type"==e.taxonomy&&(null===(r=v[0])||void 0===r||null===(a=r.value[e.slug])||void 0===a||null===(i=a.labels)||void 0===i?void 0:i.name)?v[0].value[e.slug].labels.name:e.name,set:function(){he(n.type,e.term_id)}})})):"")})):"",wp.element.createElement("div",{className:"member_tags_wrapper"},(null===(n=v[1])||void 0===n||null===(r=n.value)||void 0===r?void 0:r.length)?Object.keys(v[1].value).map((function(e){var t;null===(t=v[1].value[e])||void 0===t||t.color})):""),wp.element.createElement("div",{className:"member_extra"},wp.element.createElement("span",{className:"vicon vicon-info-alt ".concat(I.view==e.ID?"active":""),onClick:function(){C(_E(_E({},TE),{},{view:e.ID}))}}),wp.element.createElement("span",{className:"vicon vicon-pencil ".concat(I.edit==e.ID?"active":""),onClick:function(){C(_E(_E({},TE),{},{edit:e.ID}))}}),wp.element.createElement("span",{className:"vicon vicon-pulse ".concat(I.activity==e.ID?"active":""),onClick:function(){C(_E(_E({},TE),{},{activity:e.ID}))}}),wp.element.createElement("span",{className:"vicon vicon-bar-chart ".concat(I.stats==e.ID?"active":""),onClick:function(){C(_E(_E({},TE),{},{stats:e.ID}))}})))})):wp.element.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_members)),o.members?wp.element.createElement("div",{class:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):"",S?wp.element.createElement("a",{className:"link",onClick:function(){h(_E(_E({},g),{},{paged:g.paged+1}))}},window.vibebp.translations.more):""),Object.values(I).some((function(e){return e}))?wp.element.createElement("div",{className:I.view?"vibebp_single_member_view_wrapper popout":"vibebp_single_member_view_wrapper"},I.view?wp.element.createElement("span",{onClick:function(){return C(TE)}}):"",wp.element.createElement("div",{className:"vibebp_single_member_view"},wp.element.createElement("a",{className:"vicon vicon-close",onClick:function(){return C(TE)},title:window.vibebp.translations.cancel}),I.edit?wp.element.createElement("div",null,wp.element.createElement(kl,{user_id:I.edit}),wp.element.createElement("div",{className:"additional_controls"},wp.element.createElement("a",{href:be,target:"_blank"},wp.element.createElement("span",{className:"vicon vicon-link"})),wp.element.createElement("span",{onClick:function(e){return de(!pe)},className:pe?"vicon vicon-close":"vicon vicon-settings"}),wp.element.createElement("div",{className:"change_slug"},pe?wp.element.createElement("div",{className:"slugchange_panel_wrapper"},se.length?wp.element.createElement("input",{type:"text",value:se,onChange:function(e){return ue(e.target.value)}}):"",wp.element.createElement("a",{className:"button",onClick:function(){le(!0),fetch("".concat(window.vibebp.api.url,"/members/saveUserSlug?force"),{method:"post",body:JSON.stringify({user_id:I.edit,userSlug:se,token:IE("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){le(!1),e.status&&(ue(e.slug),ve(e.link)),CE("vibebp").setNotification({text:e.message})}))}},wp.element.createElement("span",{className:oe?"vicon vicon-reload":"vicon vicon-save"}))):"")),wp.element.createElement(el,{user_id:I.edit})):I.view?wp.element.createElement(Ho,{user_id:I.view}):I.activity?wp.element.createElement(U_,{user_id:I.activity}):I.create_member?wp.element.createElement(iE,{close:function(){C(TE)},update:function(){h(_E(_E({},g),{},{orderby:"user_registered",order:"DESC"}))}}):I.stats?wp.element.createElement(yE,{user_id:I.stats}):"")):""))},LE=function(e){var t=e.remove,n=e.color,r=e.name,a=e.set,i=OE(kE(!1),2),o=i[0],l=i[1];return wp.element.createElement("span",{onMouseEnter:function(){return l(!0)},onMouseLeave:function(){return l(!1)},className:"tax_item",style:n?{background:n,color:"#fff"}:{}},wp.element.createElement("span",{onClick:a},r),wp.element.createElement("span",{style:{display:o?"block":"none"},className:"vicon vicon-close",onClick:t}))};function JE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return UE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function UE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var RE=wp.element,FE=(RE.createElement,RE.useState),HE=RE.useEffect,qE=(RE.Fragment,RE.render,wp.data),$E=(qE.dispatch,qE.select),zE=function(e){var t=JE(FE(),2),n=t[0],r=t[1],a=JE(FE({}),2),i=a[0],o=a[1],l=JE(FE({}),2),c=l[0],s=l[1],u=JE(FE({}),2),m=u[0],p=u[1];return HE((function(){if(e.page){var t=e.page.split("__");fetch("".concat(window.vibebp.api.url,"/getPost/?force"),{method:"post",body:JSON.stringify({post_type:t[1],id:t[2],token:$E("vibebp").getToken()})}).then((function(e){return e.json()})).then((function(e){r(e.content),o(e.scripts),p(e.styles),s(e.objects)}))}}),[e.page]),HE((function(){c&&Object.keys(c).map((function(e){window[e]=c[e]}))}),[c]),HE((function(){i&&Object.keys(i).map((function(e){var t=document.createElement("script");t.src=i[e],t.id=e,document.body.appendChild(t),t.onload=function(){setTimeout((function(){document.dispatchEvent(new CustomEvent(e+"_loaded"))}),300)}}))}),[i]),HE((function(){m&&Object.keys(m).map((function(e){var t=document.createElement("link");t.rel="stylesheet",t.href=m[e],t.type="text/css",t.id=e,document.head.appendChild(t)}))}),[m]),wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:n}})};function BE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function WE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BE(Object(n),!0).forEach((function(t){VE(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function VE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GE(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ZE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZE(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var KE=wp.element,XE=(KE.createElement,KE.useState),YE=KE.useEffect,QE=KE.Fragment,eO=(KE.render,KE.useRef,wp.data),tO=(eO.dispatch,eO.select,function(e){var t=GE(XE({}),2),n=t[0],r=t[1],a=GE(XE(),2),i=a[0],o=a[1],l=GE(XE({}),2),c=l[0],s=l[1],u=GE(XE(!1),2),m=(u[0],u[1],GE(XE(!1),2)),d=m[0],f=m[1],b=GE(XE(!1),2),v=b[0],w=b[1],y=GE(XE("left_point"),2),g=y[0],h=y[1];YE((function(){s(e.tour),localforage.getItem("tour_"+c.id).then((function(e){e&&s(WE(WE({},c),{},{currentStep:e}))}))}),[e.tour]),YE((function(){v&&clearInterval(v);var e=setInterval((function(){if(!(d||!i||c.currentStep<0||c.currentStep>=c.steps.length)&&document.querySelector(c.steps[c.currentStep].selector)){document.querySelector(c.steps[c.currentStep].selector).scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});var e=document.querySelector(c.steps[c.currentStep].selector).getBoundingClientRect(),t=document.querySelector(".tour_step").getBoundingClientRect();t.height||(t.height=200);var n={},a=0;e.top>t.height&&e.left>t.width/2?(n.top=e.top-t.height,n.left=e.left-t.width/2,h("bottom_point")):e.top>t.height/2&&(window.innerWidth-e.right>t.width||e.left>t.width)?(n.top=e.top-t.height/2+e.height/2,window.innerWidth-e.right>t.width?(h("left_point"),n.left=e.right):e.left>t.width&&(h("right_point"),n.left=e.left-t.width)):window.innerHeight-e.bottom>t.height&&window.innerWidth-e.right>t.width/2&&e.left>t.width/2?(n.top=e.bottom,n.left=e.left-t.width/2,h("top_point")):window.innerHeight-e.bottom>t.height/2&&(window.innerWidth-e.right>t.width||e.left>t.width)?(n.top=e.bottom-t.height/2+e.height/2,window.innerWidth-e.right>t.width?(h("left_point"),n.left=e.right):e.left>t.width&&(h("right_point"),n.left=e.left-t.width)):window.innerWidth-e.right>320?(n.left=e.right+20,n.top=e.top,h("left_point")):e.left>320?(n.left=e.left-20,n.top=e.top,h("no_point")):e.top>t.height?(n.left=0,n.top=e.top-t.height,h("no_point")):e.bottom>t.height?(n.left=0,n.top=e.bottom,h("no_point")):a++,2==a&&(n.top=(window.innerHeight-t.height)/2,n.left=(window.innerWidth-t.width)/2,h("bottom_point")),document.querySelector(c.steps[c.currentStep].selector).addEventListener(c.steps[c.currentStep].action,O),console.log("#1"),r(n)}}),800);return w(e),function(){_()}}),[c.currentStep]),YE((function(){c.currentStep>-1&&c.currentStep<c.steps.length&&c.steps[c.currentStep].hasOwnProperty("action")&&c.steps[c.currentStep].action&&("view"==c.steps[c.currentStep].action?c.steps[c.currentStep].action=!1:document.querySelector(c.steps[c.currentStep].selector)&&document.querySelector(c.steps[c.currentStep].selector).addEventListener(c.steps[c.currentStep].action,O))}),[c.currentStep]);var _=function(){v&&(clearInterval(v),w(!1))},E=function(){clearInterval(v),w(!1),e.stop(),localforage.removeItem("tour_"+c.id)},O=function(){var t=c.currentStep+1,n=t+1,r=WE({},c);t>=c.steps.length?(r=WE(WE({},r),{},{currentStep:t,progress:100}),t==c.steps.length-1&&(r=WE(WE({},r),{},{currentStep:t,progress:100})),e.update(r)):(r.currentStep=t,r.progress=100*n/c.steps.length),c.currentStep,s(r)};return wp.element.createElement("div",{className:"tourstep_wrapper"},c&&Object.keys(c).length&&c.hasOwnProperty("steps")?wp.element.createElement(QE,null,-1===c.currentStep?wp.element.createElement("div",{className:"tour_steps_wrapper"},wp.element.createElement("span",{className:"tour_steps_background"}),wp.element.createElement("div",{className:"tour_step",ref:function(e){return o(e)}},wp.element.createElement("span",{className:"tour_subtitle"},window.vibebp.translations.step," ",c.currentStep+1," / ",c.steps.length," ",wp.element.createElement(p,{progress:c.progress,size:"xs"})),wp.element.createElement("h3",null,c.title," "),wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:c.description}}),wp.element.createElement("div",{className:"tour_step_actions"},wp.element.createElement("a",{className:"button is-primary",onClick:O},window.vibebp.translations.start_tour),wp.element.createElement("a",{className:"link",onClick:E},window.vibebp.translations.cancel)))):c.currentStep>=0&&c.currentStep<=c.steps.length-1?wp.element.createElement("div",{className:"tour_step step_"+c.currentStep+" "+g,ref:function(e){return o(e)},style:n},wp.element.createElement("div",{className:"tourstep"},wp.element.createElement("span",{className:"tour_subtitle"},window.vibebp.translations.step," ",c.currentStep+1," / ",c.steps.length," ",wp.element.createElement(p,{progress:c.progress,size:"xs"})),wp.element.createElement("h3",null,c.steps[c.currentStep].title),wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:c.steps[c.currentStep].description}}),wp.element.createElement("div",{className:"tour_step_actions"},wp.element.createElement("span",null,wp.element.createElement("a",{className:"button small is-danger",onClick:E},wp.element.createElement("span",{className:"vicon vicon-control-stop"})),d?wp.element.createElement("a",{className:"vicon vicon-control-play",onClick:function(){f(!1)}}):wp.element.createElement("a",{className:"vicon vicon-control-pause",onClick:function(){f(!0),localforage.setItem("tour_"+c.id,c.currentStep)}})),wp.element.createElement("span",null,c.currentStep>0?wp.element.createElement("a",{className:"vicon vicon-arrow-left",onClick:function(){var t=c.currentStep-1,n=t-1,r=WE({},c);r=WE(WE({},r),{},{currentStep:t,progress:100*n/c.steps.length}),e.update(r),s(r)}}):"",!c.steps[c.currentStep].action&&c.currentStep<=c.steps.length-1?wp.element.createElement("a",{className:"button small is-success",onClick:O},wp.element.createElement("span",{className:"vicon vicon-arrow-right"})):"")))):wp.element.createElement("div",{className:"tour_steps_wrapper"},wp.element.createElement("span",{className:"tour_steps_background"}),wp.element.createElement("div",{className:"tour_step"},wp.element.createElement("span",{className:"tour_subtitle"},window.vibebp.translations.step," ",c.currentStep," / ",c.steps.length," ",wp.element.createElement(p,{progress:c.progress,size:"xs"})),wp.element.createElement("h3",{dangerouslySetInnerHTML:{__html:window.vibebp.translations.tour_complete}}),wp.element.createElement("p",{dangerouslySetInnerHTML:{__html:window.vibebp.translations.thank_you}}),wp.element.createElement("div",{className:"tour_step_actions"},wp.element.createElement("a",{className:"button is-primary",onClick:E},window.vibebp.translations.end_tour))))):"")});function nO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nO(Object(n),!0).forEach((function(t){aO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function aO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lO=wp.element,cO=(lO.createElement,lO.useState),sO=lO.useEffect,uO=(lO.Fragment,lO.render,wp.data),mO=(uO.dispatch,uO.select,function(e){var t=iO(cO(e.tour),2),n=t[0],r=t[1],a=iO(cO(!1),2),i=a[0],o=a[1];sO((function(){r(rO(rO({},e.tour),{},{progress:0,currentStep:-1}))}),[e.tour]);sO((function(){i?document.querySelector("body").classList.add("tour_active"):document.querySelector("body").classList.remove("tour_active")}),[i]);return wp.element.createElement("div",{className:"tour"},wp.element.createElement("div",{className:"tour_snap",onClick:function(t){t.preventDefault(),o(!0),e.tourActivated(!0)}},wp.element.createElement("h3",{className:"tour_title",dangerouslySetInnerHTML:{__html:n.title}}),wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:n.description}})),wp.element.createElement(p,{progress:n.progress,size:"xs"}),i?ReactDOM.createPortal(wp.element.createElement(tO,{tour:n,update:function(t){return function(t){e.update(rO(rO({},n),t))}(t)},stop:function(){e.tourActivated(-2),o(!1)}}),document.querySelector("#tour_wrapper")):"")});function pO(e){return function(e){if(Array.isArray(e))return bO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||fO(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||fO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fO(e,t){if(e){if("string"==typeof e)return bO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bO(e,t):void 0}}function bO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vO=wp.element,wO=(vO.createElement,vO.useState),yO=vO.useEffect,gO=vO.Fragment,hO=(vO.render,wp.data),_O=hO.dispatch,EO=hO.select,OO=function(e){var t=dO(wO(!1),2),n=t[0],r=t[1],a=dO(wO(-2),2),i=a[0],o=a[1],l=dO(wO(0),2),c=l[0],s=l[1],u=dO(wO([]),2),m=u[0],p=u[1],d=dO(wO(""),2),f=d[0],b=d[1];EO("vibebp").getUser();yO((function(){if(!document.querySelector("#tour_wrapper")){var e=document.createElement("div");e.setAttribute("id","tour_wrapper"),document.querySelector("body").appendChild(e)}}),[]),yO((function(){i>-2?(r(!0),fetch("".concat(window.vibebp.api.url,"/getCurrentComponentTours?force"),{method:"post",body:JSON.stringify({token:EO("vibebp").getToken(),component:EO("vibebp").getComponent()})}).then((function(e){return e.json()})).then((function(e){r(!1),e.status?(p(e.tours),s(e.count)):p([]),e.hasOwnProperty("message")&&_O("vibebp").addNotification({text:e.message})}))):b("")}),[i]);var v=[];return v=f.length?m.filter((function(e){return e.title.toLowerCase().indexOf(f.toLowerCase())>-1})):pO(m),wp.element.createElement("div",{className:"tours_wrapper"},wp.element.createElement("a",{className:"".concat(i>-2?"active":""," ").concat(n?"vicon-reload":"vicon-help-alt"," vicon"),onClick:function(){o(-2==i?-1:-2)},title:window.vibebp.translations.get_help},m.length&&i>-1?wp.element.createElement("span",null,m[i].title):""),i>-2&&c?wp.element.createElement("div",{className:"tours_list"},wp.element.createElement("div",{className:"tours_list_header"},wp.element.createElement("span",null," ",(window.vibebp.components[EO("vibebp").getComponent()]&&window.vibebp.components[EO("vibebp").getComponent()].label?window.vibebp.components[EO("vibebp").getComponent()].label:"")+" "+window.vibebp.translations.tours),m.length>8?wp.element.createElement("div",{className:"vbp_search_field"},wp.element.createElement("input",{type:"text",value:f,placeholder:window.vibebp.translations.search_text,onChange:function(e){return b(e.target.value)}}),wp.element.createElement("span",{className:"vicon vicon-search"})):""),wp.element.createElement(gO,null,v.map((function(e,t){return wp.element.createElement(mO,{tour:e,update:function(e){var n=pO(m);n[t]=e,p(n)},tourActivated:function(t){o(t>-1?m.findIndex((function(t){return t.id==e.id})):-2)}})}))),c>m.length?wp.element.createElement("span",null,c-m.length," ",window.vibebp.translations.more_tours):""):"")};const{createElement:jO,useState:SO,useEffect:NO,Fragment:kO,render:PO}=wp.element,{dispatch:xO,select:AO}=wp.data,IO=(e,t,n,r,a,i)=>{document.cookie=e+"="+escape(t)+(n?"; expires="+n:"")+(r?"; path="+r:"")+(a?"; domain="+a:window.location.hostname)+(i?"; secure":"")},CO=e=>{var t=" "+document.cookie,n=" "+e+"=",r=null,a=0,i=0;return t.length>0&&-1!=(a=t.indexOf(n))&&(a+=n.length,-1==(i=t.indexOf(";",a))&&(i=t.length),r=unescape(t.substring(a,i))),r};var TO=e=>{const[t,n]=SO(e.time),[r,a]=SO(""),i=()=>{let n=0,r=0,i=Math.floor((t-(new Date).getTime())/1e3);i>60&&(n=Math.floor(i/60),n=n<10?"0"+n.toString():n.toString()),r=Math.floor(i%60).toString().padStart(2,"0"),r=r<10?"0"+r.toString():r.toString(),i<=0?(a(window.vibebp_cart.translations.timeout),e.removeItem()):a(n+":"+r)};return NO(()=>{let e=setInterval(i,1e3);return()=>{clearInterval(e)}},[]),React.createElement("span",{className:"clock"},r)};const{createElement:DO,useState:MO,useEffect:LO,Fragment:JO,useRef:UO}=wp.element,{dispatch:RO,select:FO}=wp.data;var HO=e=>{const[t,n]=MO(!1),[r,a]=MO(!1),[i,o]=MO([]),[l,c]=MO({});LO(()=>{setTimeout(()=>{n(!0)},200);return()=>{n(!1)}},[]),LO(()=>(document.querySelector("body").addEventListener("cart_totals_refreshed",s),()=>{document.querySelector("body").removeEventListener("cart_totals_refreshed",s)}),[]),LO(()=>(s(),document.addEventListener("vibebp_cart_updated",s),()=>{document.removeEventListener("vibebp_cart_updated",s)}),[]),String.prototype.insert=(e,t)=>{var n=e<0?(void 0).length+e:e;return(void 0).substring(0,n)+t+(void 0).substr(n)};const s=()=>{a(!0),fetch(`${window.vibebp_cart.api.get}?client_id=${window.vibebp.settings.client_id}&force`,{method:"get"}).then(e=>e.json()).then(e=>{c(e);let t=[];e.hasOwnProperty("items")&&e.items.length&&e.items.map(e=>{-1==t.findIndex(t=>t.key==e.id)&&t.push({id:e.id,key:e.key,title:e.name,quantity:e.quantity,price:{currency_prefix:e.totals.currency_prefix,currency_suffix:e.totals.currency_suffix,amount:[e.totals.line_subtotal.slice(0,e.totals.line_subtotal.length-parseInt(e.totals.currency_minor_unit)),".",e.totals.line_subtotal.slice(e.totals.line_subtotal.length-parseInt(e.totals.currency_minor_unit))].join("")}})});let n=CO("appointment_products"),r=CO("cart_items");n&&(n=JSON.parse(n)),Array.isArray(n)&&n.length&&n.map(e=>{let n,r="";e.price.currency_html.indexOf(e.price.amount)?n=e.price.currency_html.replace(e.price.amount,""):r=e.price.currency_html.replace(e.price.amount,""),t.push({key:e.id,id:e.id,title:e.title+"["+e.appointment_id+"]",expiry:e.expiry,image:e.image,price:{currency_html:e.price.currency_html,currency_prefix:n,currency_suffix:r,amount:e.price.amount}})}),r&&(r=JSON.parse(r)),Array.isArray(r)&&r.length&&r.map(e=>{let n,r="";e.price.currency_html.indexOf(e.price.amount)?n=e.price.currency_html.replace(e.price.amount,""):r=e.price.currency_html.replace(e.price.amount,""),t.push({key:e.id,id:e.id,title:e.title,image:e.image,price:{currency_html:e.price.currency_html,currency_prefix:n,currency_suffix:r,amount:e.price.amount}})}),localforage.setItem("cart_item_count",t.length),document.dispatchEvent(new Event("vibebp_update_cart")),o(t),a(!1)})},u=t=>{fetch(`${window.vibebp_cart.api.remove_item}?key=${t}&client_id=${window.vibebp.settings.client_id}&force`,{method:"post",headers:{Nonce:window.vibebp_cart.settings.nonce},body:JSON.stringify({key:t})}).then(e=>e.json()).then(e=>{console.log(e)});let n=CO("appointment_products");if(n&&(n=JSON.parse(n),n.findIndex(e=>e.id==t)>-1)){n.splice(n.findIndex(e=>e.id==t),1);let e="/";e="undefined"==typeof VIBEAPPOINTMENTS?window.vibebp_cart.settings.cookiepath:VIBEAPPOINTMENTS.settings.cookiepath,IO("appointment_products",JSON.stringify(n),new Date((new Date).setMinutes((new Date).getMinutes()+15)).toUTCString(),e,window.location.hostname)}let r=CO("cart_items");r&&(r=JSON.parse(r),r.findIndex(e=>e.id==t)>-1&&(r.splice(r.findIndex(e=>e.id==t),1),IO("cart_items",JSON.stringify(r),new Date((new Date).setMinutes((new Date).getMinutes()+15)).toUTCString(),window.vibebp_cart.settings.cookiepath,window.location.hostname))),e.update()},m=(t,n)=>{fetch(`${window.vibebp_cart.api.update_item}?key=${t}&quantitiy=${n}&client_id=${window.vibebp.settings.client_id}&force`,{method:"post",headers:{Nonce:window.vibebp_cart.settings.nonce},body:JSON.stringify({key:t,quantity:n})}).then(e=>e.json()).then(t=>{e.update()})};return React.createElement("div",{className:"vibebp_body_wrapper"},React.createElement("span",{className:"vibebp_close",onClick:e.close}),React.createElement("div",{className:t?"vibebp_cart_wrapper active":"vibebp_cart_wrapper"},React.createElement("div",{className:"vibebp_cart"},React.createElement("strong",null,window.vibebp_cart.translations.cart,React.createElement("span",{className:"vicon vicon-close",onClick:e.close})),React.createElement("div",{className:"vibebp_cart_body"},r?"...":i.length?i.map((e,t)=>React.createElement("div",{className:"cart_item_wrapper",key:t},React.createElement("div",{className:"cart_item"},e.image?React.createElement("img",{src:e.image,className:"image"}):React.createElement("svg",{className:"image",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},React.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),React.createElement("path",{d:"M4.828 21l-.02.02-.021-.02H2.992A.993.993 0 012 20.007V3.993A1 1 0 012.992 3h18.016c.548 0 .992.445.992.993v16.014a1 1 0 01-.992.993H4.828zM20 15V5H4v14L14 9l6 6zm0 2.828l-6-6L6.828 19H20v-1.172zM8 11a2 2 0 110-4 2 2 0 010 4z"})),React.createElement("span",{className:"cart_item_title"},React.createElement("span",{dangerouslySetInnerHTML:{__html:e.title}}),e.hasOwnProperty("desc")?React.createElement("span",{dangerouslySetInnerHTML:{__html:e.desc}}):"",e.price.hasOwnProperty("currency_html")?React.createElement("span",{dangerouslySetInnerHTML:{__html:e.price.currency_html}}):e.hasOwnProperty("price")?React.createElement("span",{dangerouslySetInnerHTML:{__html:e.price.currency_prefix+e.price.amount+e.price.currency_suffix}}):"",e.hasOwnProperty("expiry")?React.createElement(TO,{time:new Date(e.expiry).getTime(),removeItem:()=>u(e.key)}):""),e.hasOwnProperty("quantity")?React.createElement("span",{className:"quantity"},e.quantity>0?React.createElement("span",{className:"vicon vicon-minus",onClick:n=>{let r=[...i];r[t].quantity--,r[t].quantity<=0?(r.splice(t,1),u(e.key)):m(e.key,r[t].quantity),o(r)}}):React.createElement("span",null),React.createElement("span",null,e.quantity),React.createElement("span",{className:"vicon vicon-plus",onClick:()=>{let n=[...i];n[t].quantity++,o(n),m(e.key,n[t].quantity)}})):"",React.createElement("span",{className:"vicon vicon-trash",onClick:()=>{let n=[...i];n.splice(t,1),o(n),u(e.key)}})))):React.createElement("span",{className:"vbp_error"},window.vibebp_cart.translations.cart_no_items)),React.createElement("div",{className:"vibebp_cart_footer"},i.length?React.createElement(JO,null,window.vibebp_cart.settings.hasOwnProperty("continue_shopping_link")&&window.vibebp_cart.settings.continue_shopping_link?React.createElement("a",{href:window.vibebp_cart.settings.continue_shopping_link,className:"button is-success"},window.vibebp_cart.translations.continue_shopping):React.createElement("a",{onClick:e.close,className:"button is-success"},window.vibebp_cart.translations.continue_shopping),i.filter(e=>"credits"==e.type).length?React.createElement("a",{className:"button is-primary"},window.vibebp_cart.translations.complete_purchase_via_credits):React.createElement("a",{href:window.vibebp_cart.settings.cart+"?"+Math.round(1e4*Math.random()),className:"button is-primary"},window.vibebp_cart.translations.view_cart)):React.createElement("a",{className:"button",onClick:e.close},React.createElement("span",{className:"vicon vicon-close"})," ",window.vibebp_cart.translations.close)))))};const{createElement:qO,useState:$O,useEffect:zO,Fragment:BO,useRef:WO}=wp.element,{dispatch:VO,select:GO}=wp.data;var ZO=e=>{const[t,n]=$O(!1),[r,a]=$O(0),i=()=>{n(!0)};zO(()=>{const e=()=>{let e=parseInt(sessionStorage.getItem("cart_item_count"));sessionStorage.setItem("cart_item_count",e+1),a(e+1)},t=()=>{let e=parseInt(sessionStorage.getItem("cart_item_count"));sessionStorage.setItem("cart_item_count",e-1),a(e-1)};return"undefined"!=typeof jQuery&&(jQuery(document.body).on("added_to_cart",e),jQuery(document.body).on("removed_from_cart updated_cart_totals wc_cart_emptied",t)),()=>{"undefined"!=typeof jQuery&&(jQuery(document.body).on("added_to_cart",e),jQuery(document.body).on("removed_from_cart updated_cart_totals wc_cart_emptied",t))}},[]);const o=()=>{let e=CO("appointment_products");e&&(e=JSON.parse(e));let t=CO("cart_items"),n=0;Array.isArray(e)&&e.length&&(n=e.length),Array.isArray(t)&&t.length&&(n+=t.length),fetch(`${window.vibebp_cart.api.get}?client_id=${window.vibebp.settings.client_id}&force`,{method:"get"}).then(e=>e.json()).then(r=>{r.hasOwnProperty("items")&&r.items.length&&(r.items.map(r=>{Array.isArray(t)&&t.length&&-1==t.findIndex(e=>e.id==r.id)&&n++,Array.isArray(e)&&e.length&&-1==e.findIndex(e=>e.id==r.id)&&n++}),n<r.items_count&&(n=r.items_count)),a(n),sessionStorage.setItem("cart_item_count",n)})};return zO(()=>(o(),document.addEventListener("vibebp_update_cart",o),document.addEventListener("vibebp_show_cart",i),()=>{document.removeEventListener("vibebp_show_cart",i),document.removeEventListener("vibebp_update_cart",o)}),[]),React.createElement("span",{className:"vibebp_cart"},React.createElement("svg",{onClick:()=>n(!0),xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},React.createElement("path",{fill:"currentColor",d:"M4 6.414L.757 3.172l1.415-1.415L5.414 5h15.242a1 1 0 01.958 1.287l-2.4 8a1 1 0 01-.958.713H6v2h11v2H5a1 1 0 01-1-1V6.414zM6 7v6h11.512l1.8-6H6zm-.5 16a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm12 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3z"})),r?React.createElement("span",null,r):"",t?ReactDOM.createPortal(React.createElement(HO,{update:o,close:e=>{n(!1)}}),document.body):"")};function KO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return XO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XO(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var YO=wp.element,QO=(YO.createElement,YO.useState),ej=YO.useEffect,tj=YO.Fragment,nj=(YO.render,YO.useContext),rj=YO.useRef,aj=wp.data,ij=aj.dispatch,oj=aj.select,lj=function(e){var t=KO(QO(window.vibebp.components.default_component),2),n=t[0],r=t[1],a=KO(QO(!1),2),i=(a[0],a[1],KO(QO([]),2)),o=i[0],l=i[1],c=KO(QO(0),2),s=c[0],u=c[1],m=KO(QO(0),2),p=m[0],d=m[1],f=KO(QO(!1),2),b=f[0],v=f[1],w=KO(QO(!1),2),y=w[0],g=w[1],h=KO(QO(!1),2),_=h[0],E=h[1],O=KO(QO([]),2),j=O[0],S=O[1],N=KO(QO(oj("vibebp").getUser()),2),k=N[0],P=N[1],x=KO(QO(oj("vibebp").getToken()),2),A=x[0],I=x[1],C=KO(QO({}),2),T=(C[0],C[1],KO(QO(!1),2)),D=T[0],M=T[1],L=KO(QO(!0),2),J=L[0],U=L[1],R=nj(Cn),F=KO(QO(null),2),H=(F[0],F[1]),q=rj(null),$=KO(QO(!0),2);$[0],$[1];ej((function(){J||-1!=document.querySelector("body").classList.contains("dark_vibebp")?document.querySelector("body").classList.remove("dark_vibebp"):document.querySelector("body").classList.add("dark_vibebp")}),[J]),ej((function(){window.vibebp.dark_mode&&(U(!1),R.update("dark",!0))}),[]),ej((function(){document.addEventListener("userLoaded",(function(){A||(I(oj("vibebp").getToken()),P(oj("vibebp").getUser()))})),A&&(document.addEventListener("component_loaded",(function(e){r(e.detail.component),console.log("LOADED")})),oj("vibebp").getData("loggedinMenu")?S(oj("vibebp").getData("loggedinMenu")):fetch("".concat(window.vibebp.api.url,"/loggedinmenu"),{method:"post",body:JSON.stringify({token:A})}).then((function(e){return e.json()})).then((function(e){e.status&&(ij("vibebp").setData("loggedinMenu",e.menu),S(e.menu))})))}),[]),ej((function(){setTimeout((function(){l(oj("vibebp").getNotifications()),d(p+1),u(oj("vibebp").getNotifications().length)}),5e3)}),[p]),ej((function(){y&&-1==document.querySelector("body").classList.contains("leftsidebar_minimised")&&document.querySelector("body").classList.add("leftsidebar_minimised"),!y&&document.querySelector("body").classList.contains("leftsidebar_minimised")>-1&&document.querySelector("body").classList.remove("leftsidebar_minimised")}),[y]),ej((function(){window.innerWidth<1280?g(!0):g(!1),window.addEventListener("resize",(function(){window.innerWidth<1280?g(!0):g(!1)}))}),[]);ej((function(){if(D){var e=localforage.createInstance({name:"vibebp_last_requests"}),t=[];e.iterate((function(e,n,r){n&&n.length&&navigator.onLine&&t.push(localforage.removeItem(n))})).then((function(){Promise.all(t).then((function(){M(!1),document.dispatchEvent(new Event("vibebp_component_reload"))}))}))}}),[D]),ej((function(){if(q){var e=new Draggabilly(document.querySelector(".profile_grid"),{axis:"y",handle:".drag_to_refresh"});H(e),e.on("dragStart",(function(){})),e.on("dragMove",(function(e,t,n){n.y>=90&&(D||M(0))})),e.on("dragEnd",(function(){e.setPosition(0,0),0==D?(console.log("now true"),M(!0)):M(!1)}))}}),[q]);return A?wp.element.createElement("div",{className:"profile_grid",ref:q},wp.element.createElement("div",{className:"profile_grid_header"},wp.element.createElement("div",{className:"start_block"},window.vibebp.profile_grid_promo&&window.vibebp.profile_grid_promo.length?wp.element.createElement("div",{className:"profile_grid_promo",dangerouslySetInnerHTML:{__html:window.vibebp.profile_grid_promo}}):"","dashboard"==n?wp.element.createElement("div",{className:"dashboard_intro"},wp.element.createElement("h3",null,wp.element.createElement("strong",{dangerouslySetInnerHTML:{__html:window.vibebp.translations.hello}}),", ",k.displayname)):wp.element.createElement("span",{onClick:function(){g(!y)}},wp.element.createElement("span",{className:y?window.innerWidth<480?"vicon vicon-angle-down":"vicon vicon-angle-right":window.innerWidth<480?"vicon vicon-angle-up":"vicon vicon-angle-left"}),wp.element.createElement("span",null,y?window.vibebp.translations.show_panel:window.vibebp.translations.hide_panel)),wp.element.createElement("div",{className:"vibe_global_searchbox_wrap"}),wp.element.createElement("div",{className:"drag_to_refresh"},wp.element.createElement("span",{title:window.vibebp.translations.drag_to_refresh},D?wp.element.createElement("div",{class:"lds-ripple"},wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement("span",{className:"vicon vicon-reload"})))),wp.element.createElement("div",{className:"end_block"},function(){if(window.vibebp.settings.hasOwnProperty("custom_header_items")&&window.vibebp.settings.custom_header_items.length){var e=[];return window.vibebp.settings.custom_header_items.map((function(t){var n=new CustomEvent("vibebp_custom_header_items_"+t,{detail:{div:t}});document.dispatchEvent(n),e.push(wp.element.createElement("div",{className:t}))})),e}}(),window.vibebp.settings.cart?wp.element.createElement("span",{className:"vibebp-cart"},wp.element.createElement(ZO,null)):"",wp.element.createElement(OO,null),wp.element.createElement("div",{className:"notifications",onClick:function(){v(!b),u(0)}},s?wp.element.createElement("span",{className:"count"},s):"",wp.element.createElement("span",{className:"vicon vicon-bell"}),b&&o.length?wp.element.createElement("div",{className:"notification_list"},o.map((function(e){return oj("vibebp").removeNotification(e),wp.element.createElement("div",{className:"notification_item"},wp.element.createElement("span",{className:e.hasOwnProperty("icon")?e.icon:"vicon vicon-alert"}),e.hasOwnProperty("sub")?wp.element.createElement("span",null,e.sub):"",wp.element.createElement("span",null,e.text))}))):""),"slick"==window.vibebp.settings.customizer.theme?wp.element.createElement(tj,null,J?wp.element.createElement("div",{className:"menu_item",onClick:function(){U(!1),R.update("dark",!0),setHovered(!hovered)}},wp.element.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:window.vibebp.icons.dark_mode}})):wp.element.createElement("div",{className:"menu_item",onClick:function(){U(!0),R.update("dark",!1)}},wp.element.createElement("span",{className:"icon",dangerouslySetInnerHTML:{__html:window.vibebp.icons.light_mode}}))):wp.element.createElement(tj,null,wp.element.createElement("div",{className:"vibebp_user_head",onClick:function(){return E(!_)}},wp.element.createElement("div",{className:"vibebp_user_avatar"},wp.element.createElement(Bn,{type:"user",id:{user_id:oj("vibebp").getUser().id}}),wp.element.createElement(In,null)),_?wp.element.createElement("div",{className:"vibebp_profile_menu_wrapper"},wp.element.createElement("div",{className:"vibebp_profile_usermenu_content"},j.length?j.map((function(e){return wp.element.createElement("span",{className:e.classes.join(" "),onClick:function(){return function(e){e.classes.indexOf("bp-menu")>-1?(r(e.css_id),ij("vibebp").setComponent(e.css_id)):window.location.href=e.url}(e)},dangerouslySetInnerHTML:{__html:e.title}})})):"",wp.element.createElement("span",{onClick:function(){ij("vibebp").logout()}},wp.element.createElement("span",{className:"vicon vicon-power-off"}),window.vibebp.translations.logout))):"")))),"dashboard"===n?wp.element.createElement(Br,null):"activity"===n?wp.element.createElement(Gi,{type:"personal"}):"wall"===n?wp.element.createElement(Gi,{type:"public"}):"wallet"===n?wp.element.createElement(Ao,null):"profile"===n?wp.element.createElement(Kl,null):"notifications"===n?wp.element.createElement(bc,null):"messages"===n?wp.element.createElement(Ds,null):"friends"===n?wp.element.createElement(Cu,null):"groups"===n?wp.element.createElement(fy,null):"settings"===n?wp.element.createElement(qg,null):"followers"===n?wp.element.createElement(bm,null):"shop"===n?wp.element.createElement(Uh,null):"memberships"===n?wp.element.createElement(j_,null):"members_detail"===n?wp.element.createElement(ME,null):-1!==n.indexOf("post_type")?wp.element.createElement(zE,{page:n}):wp.element.createElement("div",{id:n+"_component"})):wp.element.createElement("div",{className:"loading-roller"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null))};function cj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cj(Object(n),!0).forEach((function(t){uj(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var dj=wp.element,fj=(dj.createElement,dj.useState),bj=(dj.useEffect,dj.Fragment,dj.render,wp.data),vj=(bj.dispatch,bj.select,function(e){var t=mj(fj({dark:!1,widgets:[]}),2),n=t[0],r=t[1];return wp.element.createElement(Cn.Provider,{value:sj(sj({},n),{},{update:function(e,t){var a=sj({},n);"remove"===e?delete a[t]:a[e]=t,r(a)}})},wp.element.createElement("div",{className:n.dark?"vibebp_myprofile dark_theme "+window.vibebp.style:"vibebp_myprofile "+window.vibebp.style},wp.element.createElement(Wn,{user_ids:[e.user.id]},wp.element.createElement(ir,null),wp.element.createElement(lj,null)),wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:"<style>span.vibebp-login{z-index:-1}</style>"}})))});n(0),n(1);function wj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gj=wp.element,hj=(gj.createElement,gj.useState),_j=gj.useEffect,Ej=gj.Fragment,Oj=gj.render,jj=wp.data,Sj=(jj.dispatch,jj.select),Nj=function(e){var t=wj(hj({}),2),n=t[0],r=t[1];return _j((function(){document.addEventListener("userLoaded",(function(){var e=Sj("vibebp").getUser();document.querySelector("body#vibeapp")||document.querySelector("body").classList.contains("page")&&!document.querySelector("body").classList.contains("profile")||document.querySelector("body").classList.contains("my-profile")&&parseInt(e.id)===parseInt(window.vibebp.user_id)?(r(e),document.querySelector("body").classList.add("vibebp_my_profile")):document.querySelector("body").classList.remove("vibebp_my_profile")})),document.getElementById("vibebp_member").classList.add("loaded")}),[]),wp.element.createElement(Ej,null,n&&Object.keys(n).length?wp.element.createElement(vj,{user:n}):wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:e.def}}))};document.getElementById("vibebp_member")&&!document.getElementById("vibebp_member").classList.contains("loaded")&&Oj(wp.element.createElement(Nj,{def:document.getElementById("vibebp_member").innerHTML}),document.getElementById("vibebp_member")),document.addEventListener("DOMContentLoaded",(function(){document.getElementById("vibebp_member")&&!document.getElementById("vibebp_member").classList.contains("loaded")&&Oj(wp.element.createElement(Nj,{def:document.getElementById("vibebp_member").innerHTML}),document.getElementById("vibebp_member"))}),!1)}]);