!function(e){var t={};function a(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=1)}([function(e,t,a){},function(e,t,a){"use strict";a.r(t);a(0);const{createElement:i,useState:n,useEffect:c,useRef:r,Fragment:s,render:l}=wp.element,{dispatch:o,select:d}=wp.data,p=Math.round(100*Math.random());var m=e=>{const t=r(null),a=React.createRef(),[i,l]=n(!0),[o,d]=n(!1),[m,v]=n(!1),[b,u]=n(""),[w,h]=n(""),[y,g]=n(""),[f,_]=n(""),[E,R]=n({x:0,y:0,width:0,height:0,type:"image"}),[N,O]=n(window.vibebp.translations.select_image);c(()=>{e.hasOwnProperty("crop")&&e.crop&&d(!0)},[]),c(()=>{e.file&&(u(window.URL.createObjectURL(e.file)),l(!1),_([e.file]))},[e.file]),c(()=>{if(m&&o){let t=a.current;new Croppr(t,{aspectRatio:1,returnMode:"raw",maxSize:[460,460,"px"],minSize:[150,150,"px"],onCropEnd:function(t){let a={...E};a.x=t.x,a.y=t.y,a.height=t.height,a.width=t.width,R(a);let i={x:t.x,y:t.y,width:t.width,height:t.height};e.update(f,i)}})}},[m]);return React.createElement("div",{className:"uploader"},i?React.createElement("label",{for:"fileupload_"+p,className:"upload_file"},N,"image"==e.type?React.createElement("input",{id:"fileupload_"+p,"data-type":e.type,ref:t,type:"file",accept:"image/*",onChange:a=>{t.current.files[0].size<window.vibebp.settings.upload_limit?(u(window.URL.createObjectURL(t.current.files[0])),l(!1),_(t.current.files),e.update(t.current.files,{...E,key:"image"})):(O(window.vibebp.translations.image_size_error),setTimeout(()=>{O(window.vibebp.translations.select_image)},3500))}}):"video"==e.type?React.createElement("input",{id:"fileupload_"+p,"data-type":e.type,ref:t,type:"file",accept:"video/*",onChange:a=>{t.current.files[0].size<window.vibebp.settings.upload_limit?(h(window.URL.createObjectURL(t.current.files[0])),l(!1),_(t.current.files),e.update(t.current.files,{...E,key:"video"})):(O(window.vibebp.translations.image_size_error),setTimeout(()=>{O(window.vibebp.translations.select_image)},3500))}}):React.createElement("input",{id:"fileupload_"+p,"data-type":e.type,ref:t,type:"file",onChange:a=>{t.current.files[0].size<window.vibebp.settings.upload_limit?(g(window.URL.createObjectURL(t.current.files[0])),l(!1),_(t.current.files),e.update(t.current.files,{...E,key:"attachment"})):(O(window.vibebp.translations.image_size_error),setTimeout(()=>{O(window.vibebp.translations.select_image)},3500))}})):React.createElement("div",{className:"uploaded_src"},"image"==e.type?React.createElement(s,null,o?React.createElement(s,null,React.createElement("div",{className:"uploaded_image"},React.createElement("img",{src:b})),React.createElement("span",null,React.createElement("span",{className:"vicon vicon-pencil",onClick:()=>{v(!m)}}),React.createElement("span",{className:"vicon vicon-close",onClick:()=>{d(!1),l(!0),setImgRef(""),u(""),R({x:0,y:0,width:0,height:0})}})),m?React.createElement("div",{className:"cropimage",id:"cropper"},React.createElement("img",{src:b,ref:a})):""):React.createElement("img",{src:b})):"video"==e.type?React.createElement(s,null,React.createElement("video",{className:"content_to_html_video",ref:e=>{e&&new Plyr(e)}},React.createElement("source",{src:w,type:"video/mp4"}))):React.createElement(s,null,React.createElement("i",{className:"vicon vicon-clip"}))))};var v=({children:e,onClose:t,open:a})=>a?ReactDOM.createPortal(React.createElement("div",{className:"vibe_editor_modal react_portal_modal"},React.createElement("span",{onClick:t}),React.createElement("div",{className:"ve_modal-content"},React.createElement("div",{className:"ve_modal-header"},React.createElement("div",null),React.createElement("span",{className:"vicon vicon-close",onClick:t})),React.createElement("div",{className:"ve_modal-body"},e))),document.body):null;const{createElement:b,useRef:u,useEffect:w,Fragment:h,render:y}=wp.element,g=(e,t,a=[])=>{const i=u(Date.now());w(()=>{const a=setTimeout((function(){Date.now()-i.current>=t&&(e(),i.current=Date.now())}),t-(Date.now()-i.current));return()=>{clearTimeout(a)}},[t,...a])};const{createElement:f,useState:_,useEffect:E,Fragment:R,render:N}=wp.element,{dispatch:O,select:k}=wp.data;var P=e=>{const[t,a]=_(!1),[i,n]=_(!1),[c,r]=_({s:"",page:1}),[s,l]=_([]),[o,d]=_(0);return g(()=>{console.log(c),a(!0);let e=`${window.vibebp.settings.giphy.endpoints.trending}?api_key=${window.vibebp.settings.giphy.api_key}&limit=10&offset=${s.length}`;c.s.length>2&&(e=`${window.vibebp.settings.giphy.endpoints.search}?api_key=${window.vibebp.settings.giphy.api_key}&q=${c.s}&limit=10&offset=${10*(c.page-1)}`),fetch(e,{method:"get"}).then(e=>e.json()).then(e=>{if(e.data&&e.data.length){a(!1);let t=[];i?t=[...s,...e.data]:(l([]),t=e.data),l(t),d(e.pagination.total_count),n(!1)}})},500,[c]),React.createElement("div",{className:"gif_wrap"},React.createElement("div",{className:"input_field_wrapper"},React.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_gif,onChange:e=>{r({...c,s:e.target.value,page:1})}}),React.createElement("span",{className:"vicon vicon-search"})),React.createElement("div",{className:"gif_wrapper"},s.length?s.map((t,a)=>React.createElement("img",{src:t.images.preview_gif.url,alt:t.title,title:t.title,onClick:()=>{e.update("add",t)}})):""),!t&&o>s.length?React.createElement("a",{className:"link",onClick:()=>{n(!0),r({...c,page:c.page+1})}},window.vibebp.translations.load_more):React.createElement("div",{class:"lds-ellipsis"},React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null)))};const{createElement:S,useState:C,useEffect:I,Fragment:x,render:$}=wp.element,{dispatch:j,select:J}=wp.data;var M=e=>{const[t,a]=C(!1),[i,n]=C([]),[c,r]=C([]),[s,l]=C(""),[o,d]=C([]),[p,b]=C({content:"",component:"activity",component_id:"",parent_id:"",meta:[]}),[u,w]=C(!1);I(()=>{if(e.hasOwnProperty("activity_id")&&b({content:"",component:"activity_comment",component_id:e.comment_id,parent_id:e.activity_id,meta:[]}),e.hasOwnProperty("component")&&"personal"!=e.component){let t={...p,component:e.component,component_id:e.id};e.hasOwnProperty("secondary_item_id")&&(t.secondary_item_id=e.secondary_item_id),b(t)}e.hasOwnProperty("component")&&"personal"==e.component&&b({...p,type:null}),e.hasOwnProperty("component")&&"public"==e.component&&b({...p,type:e.component})},[e.component]),I(()=>{p.component.length&&"activity"!==p.component&&"activity_comment"!==p.component&&fetch(`${window.vibebp.api.url}/${p.component}/user/${J("vibebp").getUser().id}/get_items`,{method:"post",body:JSON.stringify({token:J("vibebp").getToken()})}).then(e=>e.json()).then(e=>{e.status&&(console.log("#"),Array.isArray(e[p.component])&&n(e[p.component]))})},[p.component]);const h=e=>{let t=[...c];t.push(e),r(t)};return React.createElement("div",{className:"portal activity_post"},React.createElement("div",{className:"portal_body"},React.createElement("textarea",{placeholder:e.hasOwnProperty("is_child")?window.vibebp.translations.add_comment:window.vibebp.translations.whats_new,onChange:e=>{let t={...p};t.content=e.target.value,b(t)}},p.content)),React.createElement("div",{className:"portal_footer"},e.hasOwnProperty("activity_id")||"personal"!==e.component||e.hasOwnProperty("component")&&"public"==e.component?"":React.createElement("div",{className:"footer_main"},React.createElement("select",{value:p.component,onChange:e=>{let t={...p};t.component=e.target.value,b(t)}},Object.keys(window.vibebp.components.activity.post.components).map(e=>React.createElement("option",{value:e},window.vibebp.components.activity.post.components[e]))),i.length?React.createElement("select",{value:p.component_id,onChange:e=>{let t={...p};t.component_id=e.target.value,b(t)}},React.createElement("option",null,window.vibebp.translations.select_component),i.map(e=>React.createElement("option",{value:e.id},e.label))):""),React.createElement("div",{className:"footer_links"},o.length?React.createElement("div",{className:"media_wrap"},o.map((e,t)=>React.createElement("div",{className:"media_file"},React.createElement("span",{className:"viocn vicon-close",onClick:()=>{let e=[...o];e.splice(t,1),d(e)}}),(e=>{switch(e.type){case"image":return React.createElement("img",{src:e.url});case"video":return React.createElement("video",{src:e.url})}})(e)))):"",c.length?c.map((e,t)=>React.createElement(x,null,"image"==e?React.createElement("a",{className:"vicon vicon-image upload_type"}):"video"==e?React.createElement("a",{className:"vicon vicon-video-camera upload_type"}):React.createElement("a",{className:"vicon vicon-clip upload_type"}),React.createElement(m,{file:s[t],type:e,update:(a,i)=>{let n=[...s];n[t]=new File([a[0]],a[0].name),l(n),b({...p,meta:[...p.meta,{key:e,value:t}]})}}),React.createElement("a",{className:"vicon vicon-close",onClick:()=>{let e=[...s];e.splice(t,1),l(e);let a={...p},i=a.meta.findIndex(e=>e.value===t);console.log(i),a.meta.splice(i,1),b(a);let n=[...c];n.splice(t,1),r(n)}}))):"",React.createElement(x,null,React.createElement("a",{className:"vicon vicon-clip",onClick:()=>{h("attachment")}}),React.createElement("a",{className:"vicon vicon-video-camera",onClick:()=>{h("video")}}),React.createElement("a",{className:"vicon vicon-image",onClick:()=>{h("image")}}),window.vibebp.settings.giphy.api_key&&window.vibebp.settings.giphy.api_key.length?React.createElement("a",{className:"",onClick:()=>{w(!u)}},React.createElement("svg",{width:"15px",height:"15px",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},React.createElement("path",{d:"M2.5 10.5H2V11H2.5V10.5ZM4.5 10.5V11H5V10.5H4.5ZM13.5 3.5H14V3.29289L13.8536 3.14645L13.5 3.5ZM10.5 0.5L10.8536 0.146447L10.7071 0H10.5V0.5ZM2 6V10.5H3V6H2ZM2.5 11H4.5V10H2.5V11ZM5 10.5V8.5H4V10.5H5ZM3 7H5V6H3V7ZM2 5V1.5H1V5H2ZM13 3.5V5H14V3.5H13ZM2.5 1H10.5V0H2.5V1ZM10.1464 0.853553L13.1464 3.85355L13.8536 3.14645L10.8536 0.146447L10.1464 0.853553ZM2 1.5C2 1.22386 2.22386 1 2.5 1V0C1.67157 0 1 0.671573 1 1.5H2ZM1 12V13.5H2V12H1ZM2.5 15H12.5V14H2.5V15ZM14 13.5V12H13V13.5H14ZM12.5 15C13.3284 15 14 14.3284 14 13.5H13C13 13.7761 12.7761 14 12.5 14V15ZM1 13.5C1 14.3284 1.67157 15 2.5 15V14C2.22386 14 2 13.7761 2 13.5H1ZM6 7H9V6H6V7ZM6 11H9V10H6V11ZM7 6.5V10.5H8V6.5H7ZM10.5 7H13V6H10.5V7ZM10 6V11H11V6H10ZM10.5 9H12V8H10.5V9Z",fill:"var(--text)"}))):""),React.createElement("a",{className:t?"button is-primary is-loading":"button is-primary",onClick:()=>{if(!p.content.length)return;var t=new FormData;let i={...p};e.hasOwnProperty("media")&&void 0!==e.media&&e.media.hasOwnProperty("url")?(i.meta_key=e.media.url,i.component="activity_comment",i.parent_id=e.media.activity.id):J("vibebp").getData("wallUserId")&&(i.wallUserId=J("vibebp").getData("wallUserId")),p.hasOwnProperty("type")&&"public"===p.type&&!i.wallUserId&&(i.wallUserId=J("vibebp").getUser().id),t.append("body",JSON.stringify({args:i,medias:o,token:J("vibebp").getToken()})),s.length&&s.map((e,a)=>{t.append("files_"+a,e)}),a(!0),fetch(`${window.vibebp.api.url}/${window.vibebp.api.endpoints.activity}/add?upload`,{method:"post",body:t}).then(e=>e.json()).then(t=>{t.status&&(e.update(t.activity,"add"),b({content:"",component:"activity",component_id:"",parent_id:"",meta:[],content:"",meta:[]}),l([]),a(!1),j("vibebp").addNotification({text:t.activity.action}))})}},e.hasOwnProperty("is_child")?window.vibebp.translations.post:window.vibebp.translations.post_update),e.hasOwnProperty("activity_id")?React.createElement("a",{className:"link",onClick:()=>{e.update("","cancel")}},window.vibebp.translations.cancel):"")),React.createElement(v,{open:u,onClose:()=>w(!1)},React.createElement(P,{update:(e,t)=>{if("add"==e){let e=t.images.original.url,a=[...o];a.push({type:"image",url:e}),d(a),w(!1)}}})))};const{createElement:H,useState:U,useEffect:V,Fragment:A,render:T}=wp.element;var D=e=>{const[t,a]=U(""),[i,n]=U({s:0,m:0,h:0,d:0,w:0,mn:0,y:0});V(()=>{c()},[e.time]);const c=()=>{let t={s:0,m:0,h:0,d:0,mn:0,y:0},a=Math.floor(((new Date).getTime()-function(e){const t=Date.parse(e);return isNaN(t)?"string"==typeof e?Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," ")):e:t}(e.time)+6e4*(new Date).getTimezoneOffset())/1e3);a>31536e3&&(t.y=Math.floor(a/31536e3),a-=86400*t.y*365),a>2592e3&&(t.mn=Math.floor(a/2592e3),a-=86400*t.mn*30),a>604800&&(t.w=Math.floor(a/604800),a-=86400*t.w*7),a>86400&&(t.d=Math.floor(a/86400),a-=86400*t.d),a>3600&&(t.h=Math.floor(a/3600),a-=3600*t.h),a>60&&(t.m=Math.floor(a/60),a-=60*t.m),t.s=a,n(t)};return React.createElement("div",{className:"datetime"},i.y||i.mn||i.w||i.d||i.h||i.m?"":window.vibebp.translations.justnow,i.y?React.createElement("span",{className:"years"},i.y," ",i.y>1?window.vibebp.translations.years:window.vibebp.translations.year):"",i.mn?React.createElement("span",{className:"months"},i.mn," ",i.mn>1?window.vibebp.translations.months:window.vibebp.translations.month):"",i.w?React.createElement("span",{className:"weeks"},i.w," ",i.w>1?window.vibebp.translations.weeks:window.vibebp.translations.week):"",i.d?React.createElement("span",{className:"days"},i.d," ",i.d>1?window.vibebp.translations.days:window.vibebp.translations.day):"",i.h?React.createElement("span",{className:"hours"},i.h," ",i.h>1?window.vibebp.translations.hours:window.vibebp.translations.hour):"",i.m?React.createElement("span",{className:"minutes"},i.m," ",i.m>1?window.vibebp.translations.minutes:window.vibebp.translations.minute):"")};const{createElement:L,useState:Z,useEffect:F,Fragment:z,render:q}=wp.element,{dispatch:W,select:X}=wp.data;var B=e=>{const[t,a]=Z({});return F(()=>{let t="",i="";switch(e.type){case"friends":i="user",t=e.id.item_id;break;case"forum":i="forum",t=e.id.item_id;break;case"group":i="group",t=e.id.item_id;break;case"activity":i="user",t=e.id.secondary_item_id;break;case"member":case"name":case"user_tip":case"user":i="user",t=e.id.user_id;break;default:i=e.type,t=e.id.item_id}i||(i="user");let n=X("vibebp").getData(i+"_"+t);n?a(n):localforage.getItem(i+"_"+t).then(n=>{null!==n?(a(JSON.parse(n)),W("vibebp").setData(i+"_"+t,JSON.parse(n))):fetch(`${window.vibebp.api.url}/avatar?id=${i+"_"+t}&client_id=${window.vibebp.settings.client_id}`,{method:"post",body:JSON.stringify({type:e.type,ids:e.id,token:X("vibebp").getToken()})}).then(e=>e.json()).then(e=>{e.hasOwnProperty("avatar")&&(W("vibebp").setData(i+"_"+t,e),localforage.setItem(i+"_"+t,JSON.stringify(e)),a(e))})})},[e.id.item_id,e.id.user_id]),t.hasOwnProperty("avatar")||t.hasOwnProperty("name")?"member"==e.type?React.createElement("span",{className:"vibebp_member"},React.createElement("img",{src:t.avatar,className:"vibebp_avatar",onClick:e.click,alt:t.name,title:t.name}),React.createElement("span",null,t.name)):"group"==e.type?React.createElement("span",{className:"vibebp_group"},React.createElement("img",{src:t.avatar,className:"vibebp_avatar",onClick:e.click,alt:t.name,title:t.name}),React.createElement("span",null,t.name)):"user_tip"==e.type?React.createElement("span",{className:"vibebp_member tip",title:t.name},React.createElement("img",{src:t.avatar,className:"vibebp_avatar",onClick:e.click,alt:t.name,title:t.name})):"name"==e.type||"forum"==e.type?React.createElement("span",null,t.name):React.createElement("img",{src:t.avatar,className:"vibebp_avatar",onClick:e.click,alt:t.name,title:t.name}):""};const G=e=>{const[t,a]=Z(!0),[i,n]=Z(null);return F(()=>{a(!0);let t=[];i&&i.abort();let c={},r=new AbortController;i&&(c={signal:r.signal}),n(r),e.hasOwnProperty("avatars")&&(t=e.avatars);let s="user";if(e.hasOwnProperty("type")&&(s=e.type),e.hasOwnProperty("user_ids")){let a=e.user_ids;Array.isArray(e.user_ids)||(a=Object.values(e.user_ids)),a.map(e=>{Array.isArray(e)?e.map(e=>{-1==t.findIndex(t=>t.id.user_id==e)&&t.push({type:s,id:{user_id:e}})}):-1==t.findIndex(t=>t.id.user_id==e)&&t.push({type:s,id:{user_id:e}})})}let l=[],o=[];t.map((e,t)=>{let a="",i="";switch(e.type){case"friends":i="user",a=e.id.item_id;break;case"forum":i="forum",a=e.id.item_id;break;case"group":i="group",a=e.id.item_id;break;case"activity":i="user",a=e.id.secondary_item_id;break;case"member":case"name":case"user_tip":case"user":i="user",a=e.id.user_id;break;default:i=e.type,a=e.id.item_id}let n=X("vibebp").getData(i+"_"+a);n&&void 0!==n||o.push(localforage.getItem(i+"_"+a).then(e=>{e?W("vibebp").setData(i+"_"+a,JSON.parse(e)):l.push({type:i,key:a})}))}),o.length?Promise.all(o).then(()=>{l.length?fetch(`${window.vibebp.api.url}/avatars?ids=${JSON.stringify(l)}&client_id=${window.vibebp.settings.client_id}`,{...c,method:"post",body:JSON.stringify({ids:l,type:s,token:X("vibebp").getToken()})}).then(e=>e.json()).then(e=>{let t=[];e.status&&e.values.map(e=>{W("vibebp").setData(e.type+"_"+e.key,e.value),t.push(localforage.setItem(e.type+"_"+e.key,JSON.stringify(e.value)))}),t.length?Promise.all(t).then(()=>{a(!1)}):a(!1)}):a(!1)}):a(!1)},[e.user_ids,e.type]),React.createElement(z,null,t?"":e.children)},{createElement:K,useState:Q,useEffect:Y,Fragment:ee,render:te}=wp.element,{dispatch:ae,select:ie}=wp.data;var ne=e=>{const[t,a]=Q({}),[i,n]=Q([]),[c,r]=Q([]);Y(()=>{a(e.reactions),r("all")},[e.reactions]),Y(()=>{"all"==c?s():n(t[c])},[c]);const s=()=>{let t=[];Object.keys(e.reactions).map(a=>{t=[...t,...e.reactions[a]]}),n(t)};return t&&Object.keys(t).length?React.createElement("div",{className:"rec-overviews"},React.createElement("div",{className:"tabs"},React.createElement("div",{className:"tab "+("all"===c?"active":""),onClick:()=>{r("all")}},window.vibebp.translations.all),Object.keys(t).map(e=>React.createElement("div",{className:"tab "+(c===e?"active":""),onClick:()=>{r(e)}},React.createElement("img",{src:window.vibebp.settings.reactions[e].icon}),React.createElement("span",null,t[e].length)))),i&&i.length?React.createElement("div",{className:"users"},React.createElement(G,{user_ids:i},i.map(e=>React.createElement(B,{type:"member",id:{user_id:e}})))):""):""};const{createElement:ce,useState:re,useEffect:se,Fragment:le,render:oe}=wp.element,{dispatch:de,select:pe}=wp.data;var me=e=>{const[t,a]=re([]),[i,n]=re({search:"",page:1}),[c,r]=re(!1),[s,l]=re(!0),[o,d]=re(null),[p,m]=re(!1);se(()=>{e.hasOwnProperty("media")&&n({...i,meta_key:e.media.url})},[e.type]);const v=()=>{n({...i,page:1})};se(()=>(document.addEventListener("vibebp_component_reload",v),()=>{document.removeEventListener("vibebp_component_reload",v)})),g(()=>{if(Object.keys(i).length){let e={...i};e.token=pe("vibebp").getToken(),o&&o.abort();let n={},c=new AbortController;o&&(n={signal:c.signal}),d(c),l(!0),fetch(`${window.vibebp.api.url}/${window.vibebp.api.endpoints.activity}?args=${i.search.length?"nocache":encodeURIComponent(JSON.stringify({...i,search:""}))}&force`,{method:"post",...n,headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(e)}).then(e=>e.json()).then(e=>{if(l(!1),e.status){let i=[];p?(i=[...t],e.data.activities.map(e=>{i.push(e)}),m(!1)):i=e.data.activities,a(i),r(e.data.has_more_items)}else e.hasOwnProperty("message")&&de("vibebp").addNotification({text:e.message})})}},500,[i]);const b=(e,n)=>{let c=[...t],r=`${window.vibebp.api.url}/${window.vibebp.api.endpoints.activity}?args=${encodeURIComponent(JSON.stringify({...i,search:""}))}`;if("remove"===n||"remove-favorite"==n&&"activity-favs"==i.filter){let n=[...t],c=n.findIndex(t=>t.id===e.id);if(-1!==c&&(console.log(c),n.splice(c,1),a(n),!i.search.length)){window.vibebp.api.url,window.vibebp.api.endpoints.activity,encodeURIComponent(JSON.stringify({...i,search:""}));localforage.getItem(r).then(e=>{let t=JSON.parse(e);t.data.activities=n,localforage.setItem(r,JSON.stringify(t))})}}"update"==n&&(c[c.findIndex(t=>t.id==e.id)]=e,i.search.length||localforage.getItem(r).then(e=>{let t=JSON.parse(e);t.data.activities=c,localforage.setItem(r,JSON.stringify(t))}))};let u=[...t];return i.hasOwnProperty("search")&&i.search.length&&(u=t.filter(e=>e.action.indexOf(i.search)>-1||e.content.indexOf(i.search)>-1)),i.hasOwnProperty("sorter")&&i.sorter.length&&(u=t.filter(e=>e.type==i.sorter>-1)),React.createElement("div",{className:"media_popup"},React.createElement("div",{className:"left_side"},(()=>{let t=e.media.type,a=e.media.url;return"image"==t?React.createElement("img",{src:a,className:"activity_meta image"}):"video"==t?React.createElement("div",{className:"video_wrapper"},React.createElement("video",{className:"activity_meta video",ref:e=>{e&&new Plyr(e)}},React.createElement("source",{src:a,type:"video/mp4"}))):"audio"==t?React.createElement("audio",{className:"activity_meta audio",ref:e=>{e&&new Plyr(e)}},React.createElement("source",{src:a,type:"audio/mp3"})):"attachment"==t?React.createElement("a",{href:a,target:"_blank",className:"vicon vicon-clip activity_meta"}):void 0})()),React.createElement("div",{className:"right_side"},React.createElement("div",{className:"vibebp_main"},e.canpost?React.createElement(M,{component:e.type,id:e.id,update:(e,n)=>{let c=[...t],r=`${window.vibebp.api.url}/${window.vibebp.api.endpoints.activity}?args=${encodeURIComponent(JSON.stringify({...i,search:""}))}`;"add"===n&&(c.unshift(e),a(c),i.search.length||localforage.getItem(r).then(e=>{let t=JSON.parse(e);t.data.activities=c,localforage.setItem(r,JSON.stringify(t))})),"update"==n&&(c[c.findIndex(t=>t.id==e.id)]=e,i.search.length||localforage.getItem(r).then(e=>{let t=JSON.parse(e);t.data.activities=c,localforage.setItem(r,JSON.stringify(t))}))},is_child:!0,media:e.media}):"",React.createElement("div",{className:"portal"},React.createElement("div",{className:"portal_body"},s&&!u.length?React.createElement("div",{class:"loading-roller"},React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null)):"",u.length?React.createElement("div",{className:"activity_list"},u.map(t=>React.createElement(Ce,{activity:t,rootActivityId:t.id,update:b,media:e.media}))):s?"":React.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_activity_found),s&&u.length?React.createElement("div",{class:"loading-roller"},React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null)):"",c?React.createElement("a",{className:"link",onClick:()=>{let e={...i};e.page=i.page+1,m(!0),n(e)}},window.vibebp.translations.more):"")))))};const{createElement:ve,useState:be,useEffect:ue,Fragment:we,render:he}=wp.element,{dispatch:ye,select:ge}=wp.data;var fe=e=>{const[t,a]=be(!1);ue(()=>{},[e.activity]);const i=t=>{fetch(`${window.vibebp.api.url}/${window.vibebp.api.endpoints.activity}/report?post`,{method:"post",body:JSON.stringify({activity:e.activity,token:ge("vibebp").getToken(),type:t})}).then(e=>e.json()).then(t=>{t.status&&(e.update(e.activity),ye("vibebp").addNotification({text:t.message}))})};return t?React.createElement(we,null,React.createElement("span",{className:"vicon vicon-arrow-left",onClick:()=>{a(!1)}}),React.createElement("div",{className:"reporting_wrap"},React.createElement("h3",null,window.vibebp.translations.report_post),React.createElement("div",{className:"spam",onClick:()=>{i("spam")}},React.createElement("span",{className:"vicon vicon-alert"}),window.vibebp.translations.its_spam),React.createElement("div",{className:"inapproporiate",onClick:()=>{i("inappropriate")}},React.createElement("span",{className:"vicon vicon-alert"}),window.vibebp.translations.its_inappropriate))):React.createElement("div",{className:"reporting_wrap"},React.createElement("h3",null,window.vibebp.translations.post_actions),React.createElement("div",{className:"hide_post",onClick:()=>{i("hide")}},React.createElement("span",{className:"vicon vicon-close"}),window.vibebp.translations.hide_post),React.createElement("div",{className:"report_post",onClick:()=>{a(!0)}},React.createElement("span",{className:"vicon vicon-alert"}),window.vibebp.translations.report_post))};const{createElement:_e,useState:Ee,useEffect:Re,Fragment:Ne,render:Oe}=wp.element,{dispatch:ke,select:Pe}=wp.data,Se=e=>{const[t,a]=Ee({}),[i,n]=Ee(!1),[c,r]=Ee(!1),[s,l]=Ee([]),[o,d]=Ee(!1),[p,m]=Ee(!1),[b,u]=Ee(!1);Re(()=>{a(e.activity),localforage.getItem("favorite_activities_"+Pe("vibebp").getUser().id).then(e=>{e&&(e=JSON.parse(e),r(e))}),localforage.getItem("liked_activities_"+Pe("vibebp").getUser().id).then(e=>{e&&(e=JSON.parse(e),l(e))})},[e.activity]);const w=(i,c)=>{let r={...t};if("add"===c&&(r.children?r.children[Object.keys(r.children).length]=i:("object"==typeof r.children&&null!==r.children||(r.children={}),r.children[0]=i),n(!1),a(r)),"remove"===c){let e=Object.keys(r.children).findIndex(e=>r.children[e].id===i.id);-1!==e&&(delete r.children[e],a(r))}if("update"===c){let t=Object.keys(r.children).findIndex(e=>r.children[e].id===i.id);-1!==t&&(r.children[t]=i,a(r),e.update(r,"update"))}"cancel"===c&&n(!1)};let h="activity_item "+t.type+" "+t.component;return t.hasOwnProperty("content")&&t.content.length&&(h+=" with_activity_content"),React.createElement("div",{className:h,"data-activity-id":t.id},React.createElement("div",{className:"activity_avatar"},React.createElement("img",{src:t.avatar})),React.createElement("div",{className:"activity_body"},React.createElement("div",{className:"activity_header"},React.createElement("span",{dangerouslySetInnerHTML:{__html:t.action}}),React.createElement("span",{className:"vicon vicon-more",onClick:()=>{u(!0)}})),t.hasOwnProperty("content")&&t.content.length?React.createElement("div",{className:"activity_content"},React.createElement("span",{dangerouslySetInnerHTML:{__html:t.content}}),React.createElement("div",{className:"activity_attachments"},t.hasOwnProperty("meta")&&Object.keys(t.meta).length?Object.keys(t.meta).map(e=>React.createElement(Ne,null,t.meta[e].map(a=>{if(a&&a.length>3)return React.createElement("div",{className:"media_file",onClick:()=>{d({type:e,url:a,activity:t})}},((e,t)=>"image"==e?React.createElement("img",{src:t,className:"activity_meta image"}):"video"==e?React.createElement("div",{className:"video_wrapper"},React.createElement("video",{className:"activity_meta video",ref:e=>{e&&new Plyr(e)}},React.createElement("source",{src:t,type:"video/mp4"}))):"audio"==e?React.createElement("audio",{className:"activity_meta audio",ref:e=>{e&&new Plyr(e)}},React.createElement("source",{src:t,type:"audio/mp3"})):"attachment"==e?React.createElement("a",{href:t,target:"_blank",className:"vicon vicon-clip activity_meta"}):void 0)(e,a))}))):"")):"",React.createElement(D,{time:t.date_recorded}),e.hasOwnProperty("noedit")?"":React.createElement(Ne,null,window.vibebp.settings.enable_reactions&&t.hasOwnProperty("reactions")&&t.reactions&&Object.keys(t.reactions).length?React.createElement("div",{className:"reactions-overview",onClick:()=>{m(t.reactions)}},(e=>{let t=0,a=[];return Object.keys(e.reactions).map(i=>{t+=e.reactions[i].length,a.push(React.createElement("img",{src:window.vibebp.settings.reactions[i].icon}))}),a.push(React.createElement("span",{className:"count"},t)),a})(t)):"",Pe("vibebp").getData("activityPostPermissions")?React.createElement("div",{className:"activity_actions"},window.vibebp.settings.enable_reactions?React.createElement("div",{className:"reactions-container"},React.createElement("div",{className:"my-reaction"},t.my_reaction&&t.my_reaction.length?React.createElement("img",{src:window.vibebp.settings.reactions[t.my_reaction].icon}):React.createElement("strong",{className:"vicon vicon-thumb-up"})),React.createElement("div",{className:"reactions"},window.vibebp.settings.reactions&&Object.keys(window.vibebp.settings.reactions).length?Object.keys(window.vibebp.settings.reactions).map((e,i)=>React.createElement("div",{className:"reaction",onClick:()=>{((e,i)=>{let n={...t};if(!Pe("vibebp").getToken()||!Pe("vibebp").getToken().length)return document.dispatchEvent(new Event("vibebp_show_login_popup")),!1;let c=0;n.hasOwnProperty("reactions")||(n.reactions={}),n.reactions.hasOwnProperty(e)||(n.reactions[e]=[]),n.hasOwnProperty("my_reaction")&&n.my_reaction?(c=n.my_reaction,n.my_reaction===e?(delete n.my_reaction,n.reactions[e].splice(n.reactions[e].findIndex(e=>e===Pe("vibebp").getUser().id),1)):(n.my_reaction=e,n.reactions[e].push(Pe("vibebp").getUser().id)),n.reactions[c].splice(n.reactions[c].findIndex(e=>e===Pe("vibebp").getUser().id),1),n.reactions[c].length<1&&delete n.reactions[c]):(n.my_reaction=e,n.reactions[e].push(Pe("vibebp").getUser().id)),a(n),fetch(`${window.vibebp.api.url}/${window.vibebp.api.endpoints.activity}/reaction?post`,{method:"post",body:JSON.stringify({activity:n,old:c,token:Pe("vibebp").getToken()})}).then(e=>e.json()).then(e=>{e.hasOwnProperty("message")&&ke("vibebp").addNotification({text:e.message})})})(e)}},React.createElement("img",{src:window.vibebp.settings.reactions[e].icon}),React.createElement("span",{className:"label"},window.vibebp.settings.reactions[e].label))):"")):window.vibebp.settings.likes?React.createElement("a",{className:-1===s.indexOf(t.id)?"vicon vicon-thumb-up":"vicon vicon-thumb-up filled",onClick:()=>{let a=[],i=-1;s&&(a=[...s],i=s.indexOf(t.id));let n="add-like";-1===i?a.push(t.id):(n="remove-like",e.update(t,"remove-like"),a.splice(i,1)),fetch(`${window.vibebp.api.url}/${window.vibebp.api.endpoints.activity}/${n}?post`,{method:"post",headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify({activity_id:t.id,token:Pe("vibebp").getToken()})}).then(e=>e.json()).then(e=>{e.hasOwnProperty("message")&&ke("vibebp").addNotification({text:e.message}),localforage.setItem("liked_activities_"+Pe("vibebp").getUser().id,JSON.stringify(a))}),l(a)}}):"",React.createElement("a",{className:t.hasOwnProperty("children")&&t.children?"vicon vicon-comment-alt":"vicon vicon-comment",onClick:()=>{n(!i)}}),React.createElement("a",{className:c&&-1!==c.indexOf(t.id)?"vicon vicon-star filled":"vicon vicon-star",onClick:()=>{if(!Pe("vibebp").getToken()||!Pe("vibebp").getToken().length)return document.dispatchEvent(new Event("vibebp_show_login_popup")),!1;let a=[],i=-1;c&&(a=[...c],i=c.indexOf(t.id));let n="add-favorite";-1===i?a.push(t.id):(n="remove-favorite",e.update(t,"remove-favorite"),a.splice(i,1)),fetch(`${window.vibebp.api.url}/${window.vibebp.api.endpoints.activity}/${n}`,{method:"post",body:JSON.stringify({activity_id:t.id,token:Pe("vibebp").getToken()})}).then(e=>e.json()).then(e=>{e.hasOwnProperty("message")&&ke("vibebp").addNotification({text:e.message}),localforage.setItem("favorite_activities_"+Pe("vibebp").getUser().id,JSON.stringify(a)),r(a)})}}),t.hasOwnProperty("user_id")&&parseInt(t.user_id)===parseInt(Pe("vibebp").getUser().id)?React.createElement("a",{className:"vicon vicon-trash",onClick:()=>{fetch(`${window.vibebp.api.url}/${window.vibebp.api.endpoints.activity}/remove?post`,{method:"post",body:JSON.stringify({activity_id:t.id,parent_id:e.rootActivityId,token:Pe("vibebp").getToken()})}).then(e=>e.json()).then(a=>{a.hasOwnProperty("message")&&ke("vibebp").addNotification({text:a.message}),e.update(t,"remove")})}}):""):"",i?React.createElement(M,{activity_id:e.rootActivityId,update:w,comment_id:t.id,media:e.media,is_child:!0}):""),t.hasOwnProperty("children")&&t.children?React.createElement("div",{class:"activity_list"},Object.keys(t.children).map(a=>React.createElement(Se,{activity:t.children[a],rootActivityId:e.rootActivityId,update:w,media:e.media}))):""),React.createElement(v,{open:o,onClose:()=>d(!1)},React.createElement(me,{media:o,type:t.type,canpost:Pe("vibebp").getData("activityPostPermissions")})),React.createElement(v,{open:p,onClose:()=>m(!1)},React.createElement(ne,{reactions:p})),React.createElement(v,{open:b,onClose:()=>u(!1)},React.createElement(fe,{activity:t,update:t=>{console.log(t),e.update(t,"remove"),u(!1)}})))};var Ce=Se;const{createElement:Ie,useState:xe,useEffect:$e,Fragment:je,render:Je}=wp.element,{dispatch:Me,select:He}=wp.data;var Ue=e=>{const[t,a]=xe([]),[i,n]=xe({}),[c,r]=xe(!1),[s,l]=xe(!0),[o,d]=xe(null),[p,m]=xe(!1),[v,b]=xe([]),[u,w]=xe(!1);$e(()=>{let t={search:"",sorter:"",page:1};"personal"===e.type&&(t.filter="just-me"),"public"===e.type&&(t.filter="public"),e.hasOwnProperty("user_id")&&(t.user_id=e.user_id),e.hasOwnProperty("id")&&(t.id=e.id),"groups"===e.type&&(t.filter="groups"),"course"===e.type&&(t.filter="course"),e.hasOwnProperty("filter")&&(t.filter=e.filter),e.hasOwnProperty("secondary_item_id")&&(t.secondary_item_id=e.secondary_item_id),n(t);let a=[];"public"===e.type?a.push({class:["menu-child"],css_id:"activity-likes",name:window.vibebp.translations.liked,parent:"activity"}):(a=He("vibebp").getMenu().filter(e=>"activity"===e.parent_slug),window.vibebp.settings.followers&&a.push({class:["menu-child"],css_id:"activity-following",name:window.vibebp.translations.following,parent:"activity"}),window.vibebp.settings.likes&&a.push({class:["menu-child"],css_id:"activity-likes",name:window.vibebp.translations.liked,parent:"activity"}),window.vibebp.settings.enable_reactions&&(a.push({class:["menu-child"],css_id:"public",name:window.vibebp.translations.wall,parent:"activity"}),a.push({class:["menu-child"],css_id:"reported",name:window.vibebp.translations.reported,parent:"activity"})),a.map((e,t)=>{if(-1===a.findIndex(e=>e.class.indexOf("current-menu-item")>-1)){a[t].class.push("current-menu-item");var i=new CustomEvent("action_loaded",{detail:{component:window.vibebp.api.endpoints.activity,action:a[t].class}});document.dispatchEvent(i)}}));const i=He("vibebp").getUser();i&&i.hasOwnProperty("caps")&&i.caps.hasOwnProperty("manage_options")&&a.push({class:["menu-child"],css_id:"all_activity",name:window.vibebp.translations.site_activity,parent:"activity"}),a.map((e,t)=>{e.hasOwnProperty("caps")&&(i.caps.hasOwnProperty(e.caps)||a.splice(t,1))}),b(a),-1==document.querySelector("body").classList.value.indexOf("withsidebar")&&document.querySelector("body").classList.add("withsidebar"),f()},[e.type]);const h=()=>{n({...i,page:1})};$e(()=>(document.addEventListener("vibebp_component_reload",h),()=>{document.removeEventListener("vibebp_component_reload",h)})),g(()=>{if(Object.keys(i).length){let n={...i};n.token=He("vibebp").getToken(),e.hasOwnProperty("token")&&e.token.length&&(n.token=e.token),o&&o.abort();let c={},s=new AbortController;o&&(c={signal:s.signal}),d(s),l(!0);let v=`${window.vibebp.api.url}/${window.vibebp.api.endpoints.activity}?args=${i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify({...i,search:""}))}&force`;"public"===e.type&&e.hasOwnProperty("user_id")&&(v=`${window.vibebp.api.url}/${window.vibebp.api.endpoints.public_activity}?args=${i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify({...i,search:""}))}&force&client_id=${window.vibebp.settings.client_id}`),fetch(v,{method:"post",...c,headers:window.vibebp.xnonce?{"X-WP-Nonce":window.vibebp.xnonce}:{},body:JSON.stringify(n)}).then(e=>e.json()).then(e=>{if(l(!1),e.status){let n=[];if(p)n=[...t],e.data.activities.map(e=>{n.push(e)}),m(!1);else{if("activity-favs"===i.filter){let t=[];localforage.getItem("favorite_activities_"+He("vibebp").getUser().id).then(a=>{a&&((a=JSON.parse(a))&&a.length&&(t=[...a]),e.data.activities.map(e=>{-1===t.indexOf(e.id)&&t.push(e.id)}),localforage.setItem("favorite_activities_"+He("vibebp").getUser().id,JSON.stringify(t)))})}if("activity-likes"===i.filter){let t=[];localforage.getItem("liked_activities_"+He("vibebp").getUser().id).then(a=>{a&&((a=JSON.parse(a))&&a.length&&(t=[...a]),e.data.activities.map(e=>{-1===t.indexOf(e.id)&&t.push(e.id)}),localforage.setItem("liked_activities_"+He("vibebp").getUser().id,JSON.stringify(t)))})}n=e.data.activities}a(n),r(e.data.has_more_items)}else e.hasOwnProperty("message")&&Me("vibebp").addNotification({text:e.message})})}},500,[i]);const y=(n,c)=>{let r=[...t],s=`${window.vibebp.api.url}/${window.vibebp.api.endpoints.activity}?args=${i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify({...i,search:""}))}&force`;if("public"===e.type&&e.hasOwnProperty("user_id")&&(s=`${window.vibebp.api.url}/${window.vibebp.api.endpoints.public_activity}?args=${i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify({...i,search:""}))}&force&client_id=${window.vibebp.settings.client_id}`),"remove"===c||"remove-favorite"==c&&"activity-favs"==i.filter){let e=[...t],c=e.findIndex(e=>e.id===n.id);if(-1!==c&&(console.log(c),e.splice(c,1),a(e),!i.search.length)){window.vibebp.api.url,window.vibebp.api.endpoints.activity,encodeURIComponent(JSON.stringify({...i,search:""}));localforage.getItem(s).then(t=>{let a=JSON.parse(t);a.data.activities=e,localforage.setItem(s,JSON.stringify(a))})}}"update"==c&&(r[r.findIndex(e=>e.id==n.id)]=n,i.search.length||localforage.getItem(s).then(e=>{let t=JSON.parse(e);t.data.activities=r,localforage.setItem(s,JSON.stringify(t))}))},f=()=>{let t=!1;Me("vibebp").setData("wallUserId",0),Me("vibebp").setData("activityPostPermissions",!1),He("vibebp").getToken()&&He("vibebp").getToken().length?e.hasOwnProperty("user_id")&&e.user_id?(w(!1),fetch(window.vibebp.api.url+"/wall/whocanpost/check?force",{method:"post",body:JSON.stringify({token:He("vibebp").getToken(),user_id:e.user_id})}).then(e=>e.json()).then(e=>{e.hasOwnProperty("value")&&Me("vibebp").setData("activityPostPermissions",e.value),w(!0)}),Me("vibebp").setData("wallUserId",e.user_id)):(t=!0,Me("vibebp").setData("activityPostPermissions",t),w(!0)):(t=!1,Me("vibebp").setData("activityPostPermissions",t),w(!0))};let _=[...t];return i.hasOwnProperty("search")&&i.search.length&&(_=t.filter(e=>e.action.indexOf(i.search)>-1||e.content.indexOf(i.search)>-1)),i.hasOwnProperty("sorter")&&i.sorter.length&&(_=t.filter(e=>e.type==i.sorter>-1)),React.createElement("div",{className:"vibebp_sidebars"},"personal"===e.type?React.createElement("div",{className:"vibebp_left_sidebar_wrapper"},React.createElement("div",{className:"vibebp_left_sidebar"},React.createElement("h3",null,"public"===e.type?window.vibebp.components.wall:window.vibebp.components.activity.label),v.map((e,t)=>React.createElement("a",{className:e.class.join(" "),onClick:a=>{let c={...i};c.filter=e.css_id,c.page=1,n(c);let r=[...v],s=r.findIndex(e=>e.class.indexOf("current-menu-item")>-1);r[s].class.splice(r[s].class.indexOf("current-menu-item"),1),r[t].class.push("current-menu-item"),b(r)}},e.name)))):"","public"!==e.type||e.hasOwnProperty("user_id")?"":React.createElement("div",{className:"vibebp_left_sidebar_wrapper"},React.createElement("div",{className:"vibebp_left_sidebar"},React.createElement("h3",null,"public"===e.type?window.vibebp.components.wall.label:window.vibebp.components.activity.label),v.map((e,t)=>React.createElement("a",{className:e.class.join(" "),onClick:a=>{let c={...i};c.filter=e.css_id,c.page=1,n(c);let r=[...v],s=r.findIndex(e=>e.class.indexOf("current-menu-item")>-1);s>-1&&r[s].class.splice(r[s].class.indexOf("current-menu-item"),1),r[t].class.push("current-menu-item"),b(r)}},e.name)))),u?React.createElement("div",{className:"vibebp_main"},He("vibebp").getData("activityPostPermissions")?React.createElement(M,{component:e.type,id:e.id,secondary_item_id:e.secondary_item_id,update:(n,c)=>{let r=[...t],s=`${window.vibebp.api.url}/${window.vibebp.api.endpoints.activity}?args=${i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify({...i,search:""}))}&force`;"public"===e.type&&e.hasOwnProperty("user_id")&&(s=`${window.vibebp.api.url}/${window.vibebp.api.endpoints.public_activity}?args=${i.hasOwnProperty("search")&&i.search.length?"nocache":encodeURIComponent(JSON.stringify({...i,search:""}))}&force&client_id=${window.vibebp.settings.client_id}`),"add"===c&&(r.unshift(n),a(r),i.search.length||localforage.getItem(s).then(e=>{let t=JSON.parse(e);t&&(t.data.activities=r,localforage.setItem(s,JSON.stringify(t)))})),"update"==c&&(r[r.findIndex(e=>e.id==n.id)]=n,i.search.length||localforage.getItem(s).then(e=>{let t=JSON.parse(e);t.data.activities=r,localforage.setItem(s,JSON.stringify(t))}))}}):"",React.createElement("div",{className:"portal"},React.createElement("div",{className:"portal_header"},React.createElement("div",{className:"header_links"},React.createElement("div",{className:"searchbox active"},React.createElement("span",{className:"vicon vicon-search"}),React.createElement("input",{type:"text",placeholder:window.vibebp.translations.search_text,value:i.search,onChange:e=>{let t={...i};t.search=e.target.value,t.page=1,n(t)}}))),React.createElement("div",{className:"header_extras"},React.createElement("select",{onChange:e=>{return t=e.target.value,void n({...i,sorter:t});var t}},Object.keys(window.vibebp.components.activity.sorters).map(e=>React.createElement("option",{value:e},window.vibebp.components.activity.sorters[e]))))),React.createElement("div",{className:"portal_body"},s&&!_.length?React.createElement("div",{class:"loading-roller"},React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null)):"",_.length?React.createElement("div",{className:"activity_list"},_.map(e=>React.createElement(Ce,{activity:e,rootActivityId:e.id,update:y}))):s?"":React.createElement("div",{className:"vbp_message"},window.vibebp.translations.no_activity_found),s&&_.length?React.createElement("div",{class:"loading-roller"},React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null),React.createElement("div",null)):"",c?React.createElement("a",{className:"link",onClick:()=>{let e={...i};e.page=i.page+1,m(!0),n(e)}},window.vibebp.translations.more):""))):"")};function Ve(){return(Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var i,n,c,r,s=[],l=!0,o=!1;try{if(c=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(i=c.call(a)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){o=!0,n=e}finally{try{if(!l&&null!=a.return&&(r=a.return(),Object(r)!==r))return}finally{if(o)throw n}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Te(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}var De=wp.element,Le=(De.createElement,De.useState),Ze=De.useEffect,Fe=(De.Fragment,De.render,wp.data),ze=(Fe.dispatch,Fe.select,function(e){var t=Ae(Le(!0),2),a=t[0],i=t[1],n=Ae(Le(!0),2),c=n[0],r=n[1];return Ze((function(){localforage.getItem("bp_login_token").then((function(e){c&&r(e),i(!1)}))}),[e.user_id]),a?wp.element.createElement("div",{class:"lds-ellipsis"},wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null),wp.element.createElement("div",null)):wp.element.createElement("div",{className:"activity_wall"},wp.element.createElement(Ue,Ve({user_id:e.user_id,type:"public"},c?{token:c}:{})))}),qe=wp.element,We=(qe.createElement,qe.useState,qe.useEffect,qe.Fragment,qe.render),Xe=qe.unmountComponentAtNode,Be=wp.data,Ge=(Be.dispatch,Be.select,0);document.addEventListener("DOMContentLoaded",(function(){Ke()})),document.addEventListener("userLoaded",(function(){Ge||(document.querySelectorAll(".vibebp_user_wall")&&document.querySelectorAll(".vibebp_user_wall").length&&document.querySelectorAll(".vibebp_user_wall").forEach((function(e){e.getAttribute("data-user");Xe(e)})),Ke(),Ge=1)}));var Ke=function(){document.querySelectorAll(".vibebp_user_wall")&&document.querySelectorAll(".vibebp_user_wall").length&&document.querySelectorAll(".vibebp_user_wall").forEach((function(e){var t=e.getAttribute("data-user");We(wp.element.createElement(ze,{user_id:t}),e)}))};Ke()}]);